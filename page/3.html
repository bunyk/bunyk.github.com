<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Taras Bunyk</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/f969c0c492dd18a0081f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f969c0c492dd18a0081f.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-fb76148cfcfb42ca18eb.js" defer=""></script><script src="/_next/static/chunks/framework-2191d16384373197bc0a.js" defer=""></script><script src="/_next/static/chunks/main-89e612c37cd79392e22d.js" defer=""></script><script src="/_next/static/chunks/pages/_app-459ac92bde4bcd5c6050.js" defer=""></script><script src="/_next/static/chunks/762-0f685813c4b6ace6d024.js" defer=""></script><script src="/_next/static/chunks/493-1b1d0a0a11d8c4d6a4cd.js" defer=""></script><script src="/_next/static/chunks/pages/page/%5Bpage%5D-d25fad32867d5745061b.js" defer=""></script><script src="/_next/static/vTIm-6E4fBbgVLRlj9tfU/_buildManifest.js" defer=""></script><script src="/_next/static/vTIm-6E4fBbgVLRlj9tfU/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="MuiContainer-root MuiContainer-maxWidthMd"><div class="MuiToolbar-root MuiToolbar-regular jss2 MuiToolbar-gutters"><h1 class="MuiTypography-root jss3 MuiTypography-h5 MuiTypography-noWrap" aligh="center">Taras Bunyk</h1></div><nav class="MuiToolbar-root MuiToolbar-dense jss4 MuiToolbar-gutters"><a href="/">Home</a><a href="http://bunyk.github.io/mandala/">Snowflake drawing</a><a href="/resume">Resume</a><a href="https://bunyk.wordpress.com/">Old blog (in Ukrainian)</a></nav><div class="MuiGrid-root MuiGrid-container MuiGrid-spacing-xs-5"><div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-12 MuiGrid-grid-md-9"><div class="MuiPaper-root MuiCard-root jss1 MuiPaper-elevation1 MuiPaper-rounded"><div class="MuiCardHeader-root"><div class="MuiCardHeader-content"><span class="MuiTypography-root MuiCardHeader-title MuiTypography-h5 MuiTypography-displayBlock">SICP 1.3.3 Procedures as general methods</span><span class="MuiTypography-root MuiCardHeader-subheader MuiTypography-body1 MuiTypography-colorTextSecondary MuiTypography-displayBlock">Published: 2020-06-29 Tags: SICP</span></div></div><div class="MuiCardContent-root"><p>I'll attach solution from previous section to this post as it was the only exercise there.</p></div><div class="MuiCardActions-root MuiCardActions-spacing"><a class="MuiButtonBase-root MuiButton-root MuiButton-text" tabindex="0" aria-disabled="false" href="/posts/sicp1.3.3"><span class="MuiButton-label">More</span></a></div></div><div class="MuiPaper-root MuiCard-root jss1 MuiPaper-elevation1 MuiPaper-rounded"><div class="MuiCardHeader-root"><div class="MuiCardHeader-content"><span class="MuiTypography-root MuiCardHeader-title MuiTypography-h5 MuiTypography-displayBlock">SICP 1.3.1 Procedures as arguments</span><span class="MuiTypography-root MuiCardHeader-subheader MuiTypography-body1 MuiTypography-colorTextSecondary MuiTypography-displayBlock">Published: 2020-06-27 Tags: SICP</span></div></div><div class="MuiCardContent-root"><p>Solving more exercises, trying not to skip to be able to learn next chapters better.</p></div><div class="MuiCardActions-root MuiCardActions-spacing"><a class="MuiButtonBase-root MuiButton-root MuiButton-text" tabindex="0" aria-disabled="false" href="/posts/sicp1.3.1"><span class="MuiButton-label">More</span></a></div></div><div class="MuiPaper-root MuiCard-root jss1 MuiPaper-elevation1 MuiPaper-rounded"><div class="MuiCardHeader-root"><div class="MuiCardHeader-content"><span class="MuiTypography-root MuiCardHeader-title MuiTypography-h5 MuiTypography-displayBlock">SICP 1.2.6 Primes</span><span class="MuiTypography-root MuiCardHeader-subheader MuiTypography-body1 MuiTypography-colorTextSecondary MuiTypography-displayBlock">Published: 2020-06-21 Tags: SICP</span></div></div><div class="MuiCardContent-root"><p>A little bit of number theory.</p></div><div class="MuiCardActions-root MuiCardActions-spacing"><a class="MuiButtonBase-root MuiButton-root MuiButton-text" tabindex="0" aria-disabled="false" href="/posts/sicp1.2.6"><span class="MuiButton-label">More</span></a></div></div><div class="MuiPaper-root MuiCard-root jss1 MuiPaper-elevation1 MuiPaper-rounded"><div class="MuiCardHeader-root"><div class="MuiCardHeader-content"><span class="MuiTypography-root MuiCardHeader-title MuiTypography-h5 MuiTypography-displayBlock">SICP 1.2.4 Exponentiation</span><span class="MuiTypography-root MuiCardHeader-subheader MuiTypography-body1 MuiTypography-colorTextSecondary MuiTypography-displayBlock">Published: 2020-06-20 Tags: SICP</span></div></div><div class="MuiCardContent-root"></div><div class="MuiCardActions-root MuiCardActions-spacing"><a class="MuiButtonBase-root MuiButton-root MuiButton-text" tabindex="0" aria-disabled="false" href="/posts/sicp1.2.4"><span class="MuiButton-label">More</span></a></div></div><div class="MuiPaper-root MuiCard-root jss1 MuiPaper-elevation1 MuiPaper-rounded"><div class="MuiCardHeader-root"><div class="MuiCardHeader-content"><span class="MuiTypography-root MuiCardHeader-title MuiTypography-h5 MuiTypography-displayBlock">SICP 1.2.2 Tree recursion</span><span class="MuiTypography-root MuiCardHeader-subheader MuiTypography-body1 MuiTypography-colorTextSecondary MuiTypography-displayBlock">Published: 2020-06-14 Tags: SICP</span></div></div><div class="MuiCardContent-root"></div><div class="MuiCardActions-root MuiCardActions-spacing"><a class="MuiButtonBase-root MuiButton-root MuiButton-text" tabindex="0" aria-disabled="false" href="/posts/sicp1.2.2"><span class="MuiButton-label">More</span></a></div></div><div class="MuiPaper-root MuiCard-root jss1 MuiPaper-elevation1 MuiPaper-rounded"><div class="MuiCardHeader-root"><div class="MuiCardHeader-content"><span class="MuiTypography-root MuiCardHeader-title MuiTypography-h5 MuiTypography-displayBlock">SICP1.2.1 Recursion &amp; Iteration</span><span class="MuiTypography-root MuiCardHeader-subheader MuiTypography-body1 MuiTypography-colorTextSecondary MuiTypography-displayBlock">Published: 2020-06-14 Tags: SICP</span></div></div><div class="MuiCardContent-root"><p>Ok, second subchapter is more challenging, so I'll go by subsections.</p>
<p>Here is <a href="https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-11.html#%25_sec_1.2.1">link to the chapter of the book I would solve today</a></p></div><div class="MuiCardActions-root MuiCardActions-spacing"><a class="MuiButtonBase-root MuiButton-root MuiButton-text" tabindex="0" aria-disabled="false" href="/posts/sicp1.2.1"><span class="MuiButton-label">More</span></a></div></div><div class="MuiPaper-root MuiCard-root jss1 MuiPaper-elevation1 MuiPaper-rounded"><div class="MuiCardHeader-root"><div class="MuiCardHeader-content"><span class="MuiTypography-root MuiCardHeader-title MuiTypography-h5 MuiTypography-displayBlock">SICP 1.1 The Elements of Programming</span><span class="MuiTypography-root MuiCardHeader-subheader MuiTypography-body1 MuiTypography-colorTextSecondary MuiTypography-displayBlock">Published: 2020-06-13 Tags: SICP</span></div></div><div class="MuiCardContent-root"><p>Decided to finally try and go through this book. Will try to keep journal with notes here.</p></div><div class="MuiCardActions-root MuiCardActions-spacing"><a class="MuiButtonBase-root MuiButton-root MuiButton-text" tabindex="0" aria-disabled="false" href="/posts/sicp1.1"><span class="MuiButton-label">More</span></a></div></div><div class="MuiPaper-root MuiCard-root jss1 MuiPaper-elevation1 MuiPaper-rounded"><div class="MuiCardHeader-root"><div class="MuiCardHeader-content"><span class="MuiTypography-root MuiCardHeader-title MuiTypography-h5 MuiTypography-displayBlock">HTTP2 vs WebSockets: a study of dashboard performance</span><span class="MuiTypography-root MuiCardHeader-subheader MuiTypography-body1 MuiTypography-colorTextSecondary MuiTypography-displayBlock">Published: 2018-12-20 Tags: </span></div></div><div class="MuiCardContent-root"><p>In this post, we will compare the performance of different approaches to load data for analytics dashboards, or any page where we have lots of different requests to the same server.</p></div><div class="MuiCardActions-root MuiCardActions-spacing"><a class="MuiButtonBase-root MuiButton-root MuiButton-text" tabindex="0" aria-disabled="false" href="/posts/http2-vs-websockets"><span class="MuiButton-label">More</span></a></div></div><a class="MuiButtonBase-root MuiButton-root MuiButton-text" tabindex="0" aria-disabled="false" href="/page/1"><span class="MuiButton-label">1</span></a><a class="MuiButtonBase-root MuiButton-root MuiButton-text" tabindex="0" aria-disabled="false" href="/page/2"><span class="MuiButton-label">2</span></a><button class="MuiButtonBase-root MuiButton-root MuiButton-text Mui-disabled Mui-disabled" tabindex="-1" type="button" disabled=""><span class="MuiButton-label">3</span></button></div><div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-12 MuiGrid-grid-md-3"><h6 class="MuiTypography-root jss6 MuiTypography-h6 MuiTypography-gutterBottom">Archives</h6><ul><li><a href="/month/2021-10/page/1">2021-10</a> <span title="posts count">(<!-- -->1<!-- -->)</span></li><li><a href="/month/2021-01/page/1">2021-01</a> <span title="posts count">(<!-- -->4<!-- -->)</span></li><li><a href="/month/2020-12/page/1">2020-12</a> <span title="posts count">(<!-- -->1<!-- -->)</span></li><li><a href="/month/2020-09/page/1">2020-09</a> <span title="posts count">(<!-- -->2<!-- -->)</span></li><li><a href="/month/2020-08/page/1">2020-08</a> <span title="posts count">(<!-- -->2<!-- -->)</span></li><li><a href="/month/2020-07/page/1">2020-07</a> <span title="posts count">(<!-- -->10<!-- -->)</span></li><li><a href="/month/2020-06/page/1">2020-06</a> <span title="posts count">(<!-- -->7<!-- -->)</span></li><li><a href="/month/2018-12/page/1">2018-12</a> <span title="posts count">(<!-- -->1<!-- -->)</span></li></ul><h6 class="MuiTypography-root jss6 MuiTypography-h6 MuiTypography-gutterBottom">Topics</h6><ul><li><a href="/tag/MOOC/page/1">MOOC</a> <span title="posts count">(<!-- -->2<!-- -->)</span></li><li><a href="/tag/SICP/page/1">SICP</a> <span title="posts count">(<!-- -->20<!-- -->)</span></li><li><a href="/tag/asm/page/1">asm</a> <span title="posts count">(<!-- -->1<!-- -->)</span></li><li><a href="/tag/ideas/page/1">ideas</a> <span title="posts count">(<!-- -->1<!-- -->)</span></li><li><a href="/tag/notes/page/1">notes</a> <span title="posts count">(<!-- -->6<!-- -->)</span></li><li><a href="/tag/on%20writing/page/1">on writing</a> <span title="posts count">(<!-- -->3<!-- -->)</span></li></ul></div><p class="MuiTypography-root MuiTypography-body2 MuiTypography-colorTextSecondary MuiTypography-alignCenter">© <!-- -->2021<!-- --> Bunyk Taras. Built with Material UI &amp; Next.js</p></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"pageNumber":"3","posts":[{"id":"sicp1.3.3","title":"SICP 1.3.3 Procedures as general methods","date":"2020-06-29","tags":["SICP"],"excerpt":"\u003cp\u003eI'll attach solution from previous section to this post as it was the only exercise there.\u003c/p\u003e","content":"\u003cp\u003eI'll attach solution from previous section to this post as it was the only exercise there.\u003c/p\u003e\n\u003ch2\u003eExercise 1.34 Runtime error with types\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e g)\n  (\u003cspan class=\"hljs-name\"\u003eg\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e))\n(\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e f) -\u003e (\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e) -\u003e (\u003cspan class=\"hljs-name\"\u003e2\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e2 is obviously not a function, so scheme gives error when you try to apply it as function.\u003c/p\u003e\n\u003ch2\u003eExercise 1.35 Use fixed point procedure for finding golden ratio\u003c/h2\u003e\n\u003cp\u003eSo, let's divide both sides of equation Φ2 = Φ + 1. We get Φ  = 1 + 1/Φ - and this is exactly the formula to find fixed point for.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e tolerance \u003cspan class=\"hljs-number\"\u003e0.00001\u003c/span\u003e)\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003efixed-point\u003c/span\u003e f first-guess)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eclose-enough?\u003c/span\u003e v1 v2)\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e\u0026#x3C;\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eabs\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e v1 v2)) tolerance))\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003etry\u003c/span\u003e guess)\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003elet\u003c/span\u003e\u003c/span\u003e ((\u003cspan class=\"hljs-name\"\u003enext\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e guess)))\n      (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eclose-enough?\u003c/span\u003e guess next)\n          next\n          (\u003cspan class=\"hljs-name\"\u003etry\u003c/span\u003e next))))\n  (\u003cspan class=\"hljs-name\"\u003etry\u003c/span\u003e first-guess))\n(\u003cspan class=\"hljs-name\"\u003efixed-point\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003elambda\u003c/span\u003e\u003c/span\u003e (x) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e/\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e x))) \u003cspan class=\"hljs-number\"\u003e1.0\u003c/span\u003e)\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eExercise 1.36 Printing sequence of approximations\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e tolerance \u003cspan class=\"hljs-number\"\u003e0.00001\u003c/span\u003e)\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003efixed-point\u003c/span\u003e f first-guess)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eclose-enough?\u003c/span\u003e v1 v2)\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e\u0026#x3C;\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eabs\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e v1 v2)) tolerance))\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003etry\u003c/span\u003e guess)\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003elet\u003c/span\u003e\u003c/span\u003e ((\u003cspan class=\"hljs-name\"\u003enext\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e guess)))\n      (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edisplay\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"Approximation: \"\u003c/span\u003e) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edisplay\u003c/span\u003e\u003c/span\u003e next)(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003enewline\u003c/span\u003e\u003c/span\u003e)\n      (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eclose-enough?\u003c/span\u003e guess next)\n          next\n          (\u003cspan class=\"hljs-name\"\u003etry\u003c/span\u003e next))))\n  (\u003cspan class=\"hljs-name\"\u003etry\u003c/span\u003e first-guess))\n(\u003cspan class=\"hljs-name\"\u003efixed-point\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003elambda\u003c/span\u003e\u003c/span\u003e (x) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e/\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003elog\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003elog\u003c/span\u003e\u003c/span\u003e x))) \u003cspan class=\"hljs-number\"\u003e2.0\u003c/span\u003e)\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eExercise 1.37 Golden ratio from continued fraction\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003econt-frac\u003c/span\u003e n d k)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e i) \n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e/\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003en\u003c/span\u003e i) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e i k)\n       (\u003cspan class=\"hljs-name\"\u003ed\u003c/span\u003e i)\n       (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ed\u003c/span\u003e i) (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e i \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)))\n    ))\n  )\n  (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n)\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003egolden\u003c/span\u003e k)\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e/\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003econt-frac\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003elambda\u003c/span\u003e\u003c/span\u003e (i) \u003cspan class=\"hljs-number\"\u003e1.0\u003c/span\u003e)\n           (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003elambda\u003c/span\u003e\u003c/span\u003e (i) \u003cspan class=\"hljs-number\"\u003e1.0\u003c/span\u003e)\n           k))\n)\n\n(\u003cspan class=\"hljs-name\"\u003egolden\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e)\n\u003cspan class=\"hljs-comment\"\u003e;Value: 1.6180555555555558\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIterative continuous fraction:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003econt-frac\u003c/span\u003e n d k)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e i result) \n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e i \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n      result\n      (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e\n        (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e i \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n        (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e/\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003en\u003c/span\u003e i) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ed\u003c/span\u003e i) result))\n      )\n    )\n  )\n  (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e k \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n)\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eExercise 1.38 Euler number\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ee\u003c/span\u003e k)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003econt-frac\u003c/span\u003e\n         (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003elambda\u003c/span\u003e\u003c/span\u003e (i) \u003cspan class=\"hljs-number\"\u003e1.0\u003c/span\u003e)\n         (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003elambda\u003c/span\u003e\u003c/span\u003e (i)\n           (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eremainder\u003c/span\u003e\u003c/span\u003e i \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)\n             (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003efloor\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e/\u003c/span\u003e\u003c/span\u003e i \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e))) \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)\n             \u003cspan class=\"hljs-number\"\u003e1.0\u003c/span\u003e\n            )\n         )\n         k\n  ))\n)\n\n(\u003cspan class=\"hljs-name\"\u003ee\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e15\u003c/span\u003e)\n\u003cspan class=\"hljs-comment\"\u003e;Value: 2.718281828470584\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eExercise 1.39 Continued fraction tangent\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003etan\u003c/span\u003e\u003c/span\u003e x k)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003elet\u003c/span\u003e\u003c/span\u003e ((\u003cspan class=\"hljs-name\"\u003en_sqr\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e x x))))\n      (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e/\u003c/span\u003e\u003c/span\u003e x (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003econt-frac\u003c/span\u003e\n        (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003elambda\u003c/span\u003e\u003c/span\u003e (i) n_sqr)\n        (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003elambda\u003c/span\u003e\u003c/span\u003e (i) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e i \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)))\n        k\n      )))\n  )\n)\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003etan\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e/\u003c/span\u003e\u003c/span\u003e pi \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e)\n\u003cspan class=\"hljs-comment\"\u003e;Value: .9999999732051038\u003c/span\u003e\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003etan\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e/\u003c/span\u003e\u003c/span\u003e pi \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e)\n\u003cspan class=\"hljs-comment\"\u003e;Value: 37320539.58514773\u003c/span\u003e\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003etan\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e)\n\u003cspan class=\"hljs-comment\"\u003e;Value: 0\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eApproximately so.\u003c/p\u003e"},{"id":"sicp1.3.1","title":"SICP 1.3.1 Procedures as arguments","date":"2020-06-27","tags":["SICP"],"excerpt":"\u003cp\u003eSolving more exercises, trying not to skip to be able to learn next chapters better.\u003c/p\u003e","content":"\u003cp\u003eSolving more exercises, trying not to skip to be able to learn next chapters better.\u003c/p\u003e\n\u003ch2\u003eExercise 1.29 Simpson rule integration\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ecube\u003c/span\u003e x) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e x x x))\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eintegral\u003c/span\u003e f a b dx)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eadd-dx\u003c/span\u003e x) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e x dx))\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003esum\u003c/span\u003e f (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e a (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e/\u003c/span\u003e\u003c/span\u003e dx \u003cspan class=\"hljs-number\"\u003e2.0\u003c/span\u003e)) add-dx b)\n     dx))\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003esum\u003c/span\u003e term a next b)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e a b)\n      \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n      (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eterm\u003c/span\u003e a)\n         (\u003cspan class=\"hljs-name\"\u003esum\u003c/span\u003e term (\u003cspan class=\"hljs-name\"\u003enext\u003c/span\u003e a) next b))))\n\n(\u003cspan class=\"hljs-name\"\u003eintegral\u003c/span\u003e cube \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.01\u003c/span\u003e)\n\u003cspan class=\"hljs-comment\"\u003e; .24998750000000042\u003c/span\u003e\n(\u003cspan class=\"hljs-name\"\u003eintegral\u003c/span\u003e cube \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.001\u003c/span\u003e)\n\u003cspan class=\"hljs-comment\"\u003e;.249999875000001\u003c/span\u003e\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003esimpson-rule-integral\u003c/span\u003e f a b n)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003einc\u003c/span\u003e x) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e x \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e))\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eterm\u003c/span\u003e i)\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003econd\u003c/span\u003e\u003c/span\u003e\n      ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e i \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) (\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e a))\n      ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e i n) (\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e b))\n      ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eeven?\u003c/span\u003e\u003c/span\u003e i) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e a (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e/\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e b a) n) i)))))\n      (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eelse\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e a (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e/\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e b a) n) i)))))\n    )\n  )\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003esum\u003c/span\u003e term \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e inc n)\n     (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e/\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e b a) n \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e))\n)\n\n(\u003cspan class=\"hljs-name\"\u003esimpson-rule-integral\u003c/span\u003e cube \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e)\n\u003cspan class=\"hljs-comment\"\u003e;Value: 1/4\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSeems to work very precise. Gives rational numbers, wow. Even when try with different functions:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eidentity\u003c/span\u003e x) x)\n(\u003cspan class=\"hljs-name\"\u003esimpson-rule-integral\u003c/span\u003e identity \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e)\n\u003cspan class=\"hljs-comment\"\u003e;Value: 1/2\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eExercise 1.30 Iterative summation\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003esum\u003c/span\u003e term a next b)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e a result)\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e a b)\n        result\n        (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003enext\u003c/span\u003e a) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eterm\u003c/span\u003e a) result))))\n  (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e a \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e))\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eExercise 1.31 Product\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eproduct\u003c/span\u003e term a next b)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e a result)\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e a b)\n        result\n        (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003enext\u003c/span\u003e a) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eterm\u003c/span\u003e a) result))))\n  (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e a \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e))\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eFactorial:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003einc\u003c/span\u003e i) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e i \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e))\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eidentity\u003c/span\u003e x) x)\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003efactorial\u003c/span\u003e n) (\u003cspan class=\"hljs-name\"\u003eproduct\u003c/span\u003e identity \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e inc n))\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eApproximating Pi:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003epi\u003c/span\u003e precision) \n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eterm\u003c/span\u003e i)\n        (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e k (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e i \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e))\n        (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e/\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e k (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e k \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)) (\u003cspan class=\"hljs-name\"\u003esquare\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e k \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)))\n    )\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e4.0\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eproduct\u003c/span\u003e term \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e inc precision))\n)\n(\u003cspan class=\"hljs-name\"\u003epi\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e)\n\u003cspan class=\"hljs-comment\"\u003e;Value: 3.1493784731686008\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eRecursive product:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eproduct\u003c/span\u003e term a next b)\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e a b)\n        \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n        (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eterm\u003c/span\u003e a) (\u003cspan class=\"hljs-name\"\u003eproduct\u003c/span\u003e term (\u003cspan class=\"hljs-name\"\u003enext\u003c/span\u003e a) next b))\n    )\n)\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eExercise 1.32: Accumulate\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eaccumulate\u003c/span\u003e combiner null-value term a next b)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e a b)\n    null-value\n    (\u003cspan class=\"hljs-name\"\u003ecombiner\u003c/span\u003e\n      (\u003cspan class=\"hljs-name\"\u003eterm\u003c/span\u003e a)\n      (\u003cspan class=\"hljs-name\"\u003eaccumulate\u003c/span\u003e combiner null-value term (\u003cspan class=\"hljs-name\"\u003enext\u003c/span\u003e a) next b)\n    )\n  )\n)\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003esum\u003c/span\u003e term a next b)\n  (\u003cspan class=\"hljs-name\"\u003eaccumulate\u003c/span\u003e + \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e term a next b)\n)\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eproduct\u003c/span\u003e term a next b)\n  (\u003cspan class=\"hljs-name\"\u003eaccumulate\u003c/span\u003e * \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e term a next b)\n)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIterative:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eaccumulate\u003c/span\u003e combiner null-value term a next b)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e a result)\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e a b)\n      result\n      (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003enext\u003c/span\u003e a) (\u003cspan class=\"hljs-name\"\u003ecombiner\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eterm\u003c/span\u003e a) result))\n    )\n  )\n  (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e a null-value)\n)\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eExercise 1.33 Filtered accumulate\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003efiltered-accumulate\u003c/span\u003e combiner null-value term a next b filter)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e a result)\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e a b)\n      result\n      (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003efilter\u003c/span\u003e a) \n          (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003enext\u003c/span\u003e a) result)\n          (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003enext\u003c/span\u003e a) (\u003cspan class=\"hljs-name\"\u003ecombiner\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eterm\u003c/span\u003e a) result))\n      )\n    )\n  )\n  (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e a null-value)\n)\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003esum-of-squares-of-primes-in-interval\u003c/span\u003e a b)\n    (\u003cspan class=\"hljs-name\"\u003efiltered-accumulate\u003c/span\u003e + \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e sqr a inc b prime?)\n)\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eproduct-of-relatively-primes-to\u003c/span\u003e n)\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e!rel-prime\u003c/span\u003e x)\n      (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003enot\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003egcd\u003c/span\u003e\u003c/span\u003e x n) \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e))\n    )\n    (\u003cspan class=\"hljs-name\"\u003efiltered-accumulate\u003c/span\u003e * \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e identity \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e inc n !rel-prime)\n)\u003c/code\u003e\u003c/pre\u003e"},{"id":"sicp1.2.6","title":"SICP 1.2.6 Primes","date":"2020-06-21","tags":["SICP"],"excerpt":"\u003cp\u003eA little bit of number theory.\u003c/p\u003e","content":"\u003cp\u003eA little bit of number theory.\u003c/p\u003e\n\u003ch2\u003eExercise 1.21: Smallest divisors\u003c/h2\u003e\n\u003cp\u003eThis is so trivial, so I'll try to rewrite example, because it's just copypaste otherwise:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003edivisor?\u003c/span\u003e d n) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eremainder\u003c/span\u003e\u003c/span\u003e n d) \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e))\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003esmallest-divisor\u003c/span\u003e n)\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003efind-divisor\u003c/span\u003e n d)\n        (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003econd\u003c/span\u003e\u003c/span\u003e ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003esqr\u003c/span\u003e d) n) n)\n            ((\u003cspan class=\"hljs-name\"\u003edivisor?\u003c/span\u003e d n) d)\n            (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eelse\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003efind-divisor\u003c/span\u003e n (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e d \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)))\n        )\n\n    )\n    (\u003cspan class=\"hljs-name\"\u003efind-divisor\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)\n)\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e ]=\u003e (\u003cspan class=\"hljs-name\"\u003esmallest-divisor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e199\u003c/span\u003e)\n\n\u003cspan class=\"hljs-comment\"\u003e;Value: 199\u003c/span\u003e\n\n\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e ]=\u003e (\u003cspan class=\"hljs-name\"\u003esmallest-divisor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1999\u003c/span\u003e)\n\n\u003cspan class=\"hljs-comment\"\u003e;Value: 1999\u003c/span\u003e\n\n\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e ]=\u003e (\u003cspan class=\"hljs-name\"\u003esmallest-divisor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e19999\u003c/span\u003e)\n\n\u003cspan class=\"hljs-comment\"\u003e;Value: 7\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWell, that was unexpected. :)\u003c/p\u003e\n\u003ch2\u003eExercise 1.22:\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eprime?\u003c/span\u003e n)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e n (\u003cspan class=\"hljs-name\"\u003esmallest-divisor\u003c/span\u003e n)))\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003enext-prime\u003c/span\u003e n) \n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eprime?\u003c/span\u003e n)\n        n\n        (\u003cspan class=\"hljs-name\"\u003enext-prime\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e))\n    )\n)\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003etimed-prime-test\u003c/span\u003e n)\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003estart-prime-test\u003c/span\u003e n start-time)\n      (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edisplay\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"next prime after \"\u003c/span\u003e) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edisplay\u003c/span\u003e\u003c/span\u003e n)\n      (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edisplay\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\": \"\u003c/span\u003e) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edisplay\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003enext-prime\u003c/span\u003e n)) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003enewline\u003c/span\u003e\u003c/span\u003e)\n      (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edisplay\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"Time: \"\u003c/span\u003e) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edisplay\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eruntime\u003c/span\u003e) start-time))\n      (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003enewline\u003c/span\u003e\u003c/span\u003e)\n    )\n    (\u003cspan class=\"hljs-name\"\u003estart-prime-test\u003c/span\u003e n (\u003cspan class=\"hljs-name\"\u003eruntime\u003c/span\u003e))\n)\n(\u003cspan class=\"hljs-name\"\u003etimed-prime-test\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e10000000001\u003c/span\u003e)\n\u003cspan class=\"hljs-comment\"\u003e; next prime after 10000000001: 10000000019\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e; Time: .19999999999998863\u003c/span\u003e\n(\u003cspan class=\"hljs-name\"\u003etimed-prime-test\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1000000000001\u003c/span\u003e)\n\u003cspan class=\"hljs-comment\"\u003e; next prime after 1000000000001: 1000000000039\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e; Time: 1.3700000000000045\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSeems to take 10 times more time for 100 times bigger number.\u003c/p\u003e\n\u003ch2\u003eExercise 1.23\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003enext\u003c/span\u003e n) \n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e))\n)\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003esmallest-divisor\u003c/span\u003e n)\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003efind-divisor\u003c/span\u003e n d)\n        (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003econd\u003c/span\u003e\u003c/span\u003e ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003esqr\u003c/span\u003e d) n) n)\n            ((\u003cspan class=\"hljs-name\"\u003edivisor?\u003c/span\u003e d n) d)\n            (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eelse\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003efind-divisor\u003c/span\u003e n (\u003cspan class=\"hljs-name\"\u003enext\u003c/span\u003e d)))\n        )\n\n    )\n    (\u003cspan class=\"hljs-name\"\u003efind-divisor\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)\n)\n\n(\u003cspan class=\"hljs-name\"\u003etimed-prime-test\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e10000000001\u003c/span\u003e)\n\u003cspan class=\"hljs-comment\"\u003e;Time: .12000000000000455\u003c/span\u003e\n\n(\u003cspan class=\"hljs-name\"\u003etimed-prime-test\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1000000000001\u003c/span\u003e)\n\u003cspan class=\"hljs-comment\"\u003e; Time: .8000000000000114\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eA little bit less than twice as fast. I assume this is because calling next and doing comparisons inside it takes more time than just (+ n 1)\u003c/p\u003e\n\u003ch2\u003eExercise 1.24\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eexpmod\u003c/span\u003e base exp m)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003econd\u003c/span\u003e\u003c/span\u003e ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e exp \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n        ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eeven?\u003c/span\u003e\u003c/span\u003e exp)\n         (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eremainder\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003esquare\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eexpmod\u003c/span\u003e base (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e/\u003c/span\u003e\u003c/span\u003e exp \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e) m))\n                    m))\n        (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eelse\u003c/span\u003e\u003c/span\u003e\n         (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eremainder\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e base (\u003cspan class=\"hljs-name\"\u003eexpmod\u003c/span\u003e base (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e exp \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) m))\n                    m))))        \n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003efermat-test\u003c/span\u003e n)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003etry-it\u003c/span\u003e a)\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eexpmod\u003c/span\u003e a n n) a))\n  (\u003cspan class=\"hljs-name\"\u003etry-it\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003erandom\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)))))\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003efast-prime?\u003c/span\u003e n times)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003econd\u003c/span\u003e\u003c/span\u003e ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e times \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) true)\n        ((\u003cspan class=\"hljs-name\"\u003efermat-test\u003c/span\u003e n) (\u003cspan class=\"hljs-name\"\u003efast-prime?\u003c/span\u003e n (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e times \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)))\n        (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eelse\u003c/span\u003e\u003c/span\u003e false)))\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003enext-prime\u003c/span\u003e n) \n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003efast-prime?\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e)\n        n\n        (\u003cspan class=\"hljs-name\"\u003enext-prime\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e))\n    )\n)\n\n(\u003cspan class=\"hljs-name\"\u003etimed-prime-test\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1000000000001\u003c/span\u003e)\n\u003cspan class=\"hljs-comment\"\u003e; next prime after 1000000000001: 1000000000039\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e; Time: 9.999999999990905e-3\u003c/span\u003e\n\n(\u003cspan class=\"hljs-name\"\u003etimed-prime-test\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e10000000000000000000001\u003c/span\u003e)\n\u003cspan class=\"hljs-comment\"\u003e; next prime after 10000000000000000000001: 10000000000000000000009\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e; Time: 9.999999999990905e-3\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTime seems to not change at all (but of course first search checked more numbers).\u003c/p\u003e\n\u003ch2\u003eExercise 1.25\u003c/h2\u003e\n\u003cp\u003eThat would slow down our computations tremendously, because we would need to multiply huge numbers. With millions of digits, which would take megabytes of memory.\u003c/p\u003e\n\u003ch2\u003eExercise 1.26\u003c/h2\u003e\n\u003cp\u003eIn correct \u003ccode\u003eexpmod\u003c/code\u003e, every time \u003ccode\u003eexpmod\u003c/code\u003e is recursively called with half of \u003ccode\u003eexp\u003c/code\u003e argument, it is called once.\u003c/p\u003e\n\u003cp\u003eIn Louis Reasoner implementation, when \u003ccode\u003eexpmod\u003c/code\u003e is called with halved \u003ccode\u003eexp\u003c/code\u003e argument, it is called twice, so halving the argument is compensated by doubling the tree of recursion, and that's why number of calls to \u003ccode\u003eexpmod\u003c/code\u003e is proportional to the argument.\u003c/p\u003e\n\u003ch2\u003eExercise 1.27\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003efull-fermat\u003c/span\u003e n)\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ef-prime?\u003c/span\u003e a)\n        (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eexpmod\u003c/span\u003e a n n) a)\n    )\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e a)\n        (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e a n)\n            \u003cspan class=\"hljs-literal\"\u003e#t\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e; test passed\u003c/span\u003e\n            (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ef-prime?\u003c/span\u003e a)\n                (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e a \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e))\n                \u003cspan class=\"hljs-literal\"\u003e#f\u003c/span\u003e\u003cspan class=\"hljs-comment\"\u003e; test failed\u003c/span\u003e\n            )\n        )\n    )\n    (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)\n)\n\n(\u003cspan class=\"hljs-name\"\u003efull-fermat\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e)\u003cspan class=\"hljs-comment\"\u003e; #t\u003c/span\u003e\n(\u003cspan class=\"hljs-name\"\u003efull-fermat\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e15\u003c/span\u003e)\u003cspan class=\"hljs-comment\"\u003e; #f\u003c/span\u003e\n(\u003cspan class=\"hljs-name\"\u003efull-fermat\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e561\u003c/span\u003e)\u003cspan class=\"hljs-comment\"\u003e; #t\u003c/span\u003e\n(\u003cspan class=\"hljs-name\"\u003efull-fermat\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1105\u003c/span\u003e)\u003cspan class=\"hljs-comment\"\u003e; #t\u003c/span\u003e\n(\u003cspan class=\"hljs-name\"\u003efull-fermat\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1729\u003c/span\u003e)\u003cspan class=\"hljs-comment\"\u003e; #t\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eExercise 1.28: Miller-Rabin test\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e!=\u003c/span\u003e a b) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003enot\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e a b))) \u003cspan class=\"hljs-comment\"\u003e; I need some Scheme reference, really. How this is not built-in?\u003c/span\u003e\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ereport\u003c/span\u003e n m)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edisplay\u003c/span\u003e\u003c/span\u003e n)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edisplay\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\" is a nontrivial square root of 1 modulo \"\u003c/span\u003e)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edisplay\u003c/span\u003e\u003c/span\u003e m)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003enewline\u003c/span\u003e\u003c/span\u003e)\n  \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n)\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eexpmod\u003c/span\u003e base exp m)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003esquaremod-signal\u003c/span\u003e n)\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eis-root?\u003c/span\u003e sq) \n        (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eand\u003c/span\u003e\u003c/span\u003e  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e sq \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) (\u003cspan class=\"hljs-name\"\u003e!=\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) (\u003cspan class=\"hljs-name\"\u003e!=\u003c/span\u003e n (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e m \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)))\n            (\u003cspan class=\"hljs-name\"\u003ereport\u003c/span\u003e n m)\n            sq\n        )\n    )\n    (\u003cspan class=\"hljs-name\"\u003eis-root?\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eremainder\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003esquare\u003c/span\u003e n) m))\n  )\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003econd\u003c/span\u003e\u003c/span\u003e ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e exp \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n        ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eeven?\u003c/span\u003e\u003c/span\u003e exp)\n         (\u003cspan class=\"hljs-name\"\u003esquaremod-signal\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eexpmod\u003c/span\u003e base (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e/\u003c/span\u003e\u003c/span\u003e exp \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e) m)))\n        (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eelse\u003c/span\u003e\u003c/span\u003e\n         (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eremainder\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e base (\u003cspan class=\"hljs-name\"\u003eexpmod\u003c/span\u003e base (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e exp \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) m))\n                    m))))        \n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003efast-prime?\u003c/span\u003e n times)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003econd\u003c/span\u003e\u003c/span\u003e ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e times \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) true)\n        ((\u003cspan class=\"hljs-name\"\u003emiller-rabin-test\u003c/span\u003e n) (\u003cspan class=\"hljs-name\"\u003efast-prime?\u003c/span\u003e n (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e times \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)))\n        (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eelse\u003c/span\u003e\u003c/span\u003e false)))\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003emiller-rabin-test\u003c/span\u003e n)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003etry-it\u003c/span\u003e a)\n    (\u003cspan class=\"hljs-name\"\u003e!=\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eexpmod\u003c/span\u003e a (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) n) \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n  )\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eeven?\u003c/span\u003e\u003c/span\u003e n)\n      \u003cspan class=\"hljs-literal\"\u003e#f\u003c/span\u003e\n      (\u003cspan class=\"hljs-name\"\u003etry-it\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003erandom\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e))))\n  )\n)\n(\u003cspan class=\"hljs-name\"\u003efast-prime?\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1009\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e)\n(\u003cspan class=\"hljs-name\"\u003efast-prime?\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e)\n(\u003cspan class=\"hljs-name\"\u003efast-prime?\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e6601\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWhew! How this even work - no idea, but somehow it does. Thankfully I'm good in this technique:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/content/trying-stuff-orly.jpg\" alt=\"Trying Stuff Until it Works\" title=\"Trying Stuff Until it Works\"\u003e\u003c/p\u003e"},{"id":"sicp1.2.4","title":"SICP 1.2.4 Exponentiation","date":"2020-06-20","tags":["SICP"],"excerpt":"","content":"\u003cp\u003eToday I learned that ancient mit-scheme REPL could be improved with history \u0026#x26; tab completion. Thanks to this \u003ca href=\"https://stackoverflow.com/a/11916365/816449\"\u003eStackOverflow answer\u003c/a\u003e. \u003ccode\u003esudo apt-get install rlwrap\u003c/code\u003e, and then run scheme as \u003ccode\u003erlwrap scheme\u003c/code\u003e That answer is not very recent too, but here we are trying to learn really ancient magic.\u003c/p\u003e\n\u003cp\u003eAnd \u003ca href=\"https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-11.html#%25_sec_1.2.4\"\u003ethis section\u003c/a\u003e really starts to feel like magic. In the end, I learned that there is a way to compute n-th Fibonacci number with time complexity \u003ccode\u003eO(log(n))\u003c/code\u003e. And just few sections before, authors show how computing Fibonacci sequence using wrong approach could blow up exponencially.\u003c/p\u003e\n\u003ch2\u003eExercise 1.16: Fast exponentiation\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003esqr\u003c/span\u003e x) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e x x))\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003efast-exp\u003c/span\u003e x n) \n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e x n a) \n       (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003econd\u003c/span\u003e\u003c/span\u003e\n       ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) a)\n       ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eeven?\u003c/span\u003e\u003c/span\u003e n) (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003esqr\u003c/span\u003e x) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e/\u003c/span\u003e\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e) a))\n       (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eelse\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e x (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e a x)))\n       ) \n    )\n    (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e x n \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n)\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eExercise 1.17: \"Fast\" multiplication\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003edouble\u003c/span\u003e x) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e x x))\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ehalve\u003c/span\u003e x) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e/\u003c/span\u003e\u003c/span\u003e x \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e))\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003efast-m\u003c/span\u003e a b) \n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003econd\u003c/span\u003e\u003c/span\u003e ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e b \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) a)\n        ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eeven?\u003c/span\u003e\u003c/span\u003e b) (\u003cspan class=\"hljs-name\"\u003efast-m\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003edouble\u003c/span\u003e a) (\u003cspan class=\"hljs-name\"\u003ehalve\u003c/span\u003e b)))\n        (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eelse\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e a (\u003cspan class=\"hljs-name\"\u003efast-m\u003c/span\u003e a (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e b \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)))\n    )\n)\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eExercise 1.18: Iterative multiplicaton\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003efast-m\u003c/span\u003e a b) \n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e a b p) \n       (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003econd\u003c/span\u003e\u003c/span\u003e\n       ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e b \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e a p))\n       ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eeven?\u003c/span\u003e\u003c/span\u003e b) (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003edouble\u003c/span\u003e a) (\u003cspan class=\"hljs-name\"\u003ehalve\u003c/span\u003e b) p))\n       (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eelse\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e a (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e b \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e p a)))\n       ) \n    )\n    (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e a b \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n)\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eExercise 1.19: Fast Fibonacci\u003c/h2\u003e\n\u003cp\u003eWith this exercise first, you discover that there is Fibonacci sequence inside Fibonacci formulas, and then, you figure out from where there appears exponential rise. Magical:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003efib\u003c/span\u003e n)\n  (\u003cspan class=\"hljs-name\"\u003efib-iter\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e n))\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003efib-iter\u003c/span\u003e a b p q count)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003econd\u003c/span\u003e\u003c/span\u003e ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e count \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) b)\n        ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eeven?\u003c/span\u003e\u003c/span\u003e count)\n         (\u003cspan class=\"hljs-name\"\u003efib-iter\u003c/span\u003e a\n                   b\n                   (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e p p) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e q q))   \u003cspan class=\"hljs-comment\"\u003e; compute p'\u003c/span\u003e\n                   (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e q q) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e p q)) \u003cspan class=\"hljs-comment\"\u003e; compute q'\u003c/span\u003e\n                   (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e/\u003c/span\u003e\u003c/span\u003e count \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)))\n        (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eelse\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003efib-iter\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e b q) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e a q) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e a p))\n                        (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e b p) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e a q))\n                        p\n                        q\n                        (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e count \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)))))\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eI not dediced yet on how to get latex in Hugo, so I'll not add here my calculations for \u003ccode\u003ep'\u003c/code\u003e and \u003ccode\u003eq'\u003c/code\u003e.\u003c/p\u003e"},{"id":"sicp1.2.2","title":"SICP 1.2.2 Tree recursion","date":"2020-06-14","tags":["SICP"],"excerpt":"","content":"\u003cp\u003eI like how they did not shown yet how to work with any data structures, but wrote function that behaves like a immutable array:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003efirst-denomination\u003c/span\u003e kinds-of-coins)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003econd\u003c/span\u003e\u003c/span\u003e ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e kinds-of-coins \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n        ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e kinds-of-coins \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e)\n        ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e kinds-of-coins \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e)\n        ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e kinds-of-coins \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e25\u003c/span\u003e)\n        ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e kinds-of-coins \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e)))\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eExercise 1.11\u003c/h2\u003e\n\u003cp\u003eFunctions should produce following sequence: 1, 2, 4, 11, 25, 59, 142\n(\u003ca href=\"https://oeis.org/A100550\"\u003eSequence A100550\u003c/a\u003e in the On-Line Encyclopedia of Integer Sequences)\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003enext-f\u003c/span\u003e c d e)\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e d) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e c)))\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e n) \n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e\u0026#x3C;\u003c/span\u003e\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e) \n        n\n        (\u003cspan class=\"hljs-name\"\u003enext-f\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e))\n           (\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e))\n           (\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)))))\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e n)\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ef-iter\u003c/span\u003e a b c n)\n        (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e\u0026#x3C;\u003c/span\u003e\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e)\n            c\n            (\u003cspan class=\"hljs-name\"\u003ef-iter\u003c/span\u003e b c (\u003cspan class=\"hljs-name\"\u003enext-f\u003c/span\u003e a b c) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e))))\n    (\u003cspan class=\"hljs-name\"\u003ef-iter\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e n))\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eDone.\u003c/p\u003e\n\u003ch2\u003eExercise 1.12. Pascal triangle\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eP\u003c/span\u003e row col) \n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003econd\u003c/span\u003e\u003c/span\u003e\n        ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e col \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) \u003cspan class=\"hljs-comment\"\u003e; first number in row is 1\u003c/span\u003e\n        ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e col row) \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) \u003cspan class=\"hljs-comment\"\u003e; last number is 1 too\u003c/span\u003e\n        (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eelse\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e; otherwise it's sum of two number above\u003c/span\u003e\n            (\u003cspan class=\"hljs-name\"\u003eP\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e row \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e col \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e))\n            (\u003cspan class=\"hljs-name\"\u003eP\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e row \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) col)))))\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eExercise 1.13\u003c/h2\u003e\n\u003cp\u003eThis is hard one for me, because I'm not so good with math. I'll skip this for now.\u003c/p\u003e"},{"id":"sicp1.2.1","title":"SICP1.2.1 Recursion \u0026 Iteration","date":"2020-06-14","tags":["SICP"],"excerpt":"\u003cp\u003eOk, second subchapter is more challenging, so I'll go by subsections.\u003c/p\u003e\n\u003cp\u003eHere is \u003ca href=\"https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-11.html#%25_sec_1.2.1\"\u003elink to the chapter of the book I would solve today\u003c/a\u003e\u003c/p\u003e","content":"\u003cp\u003eOk, second subchapter is more challenging, so I'll go by subsections.\u003c/p\u003e\n\u003cp\u003eHere is \u003ca href=\"https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-11.html#%25_sec_1.2.1\"\u003elink to the chapter of the book I would solve today\u003c/a\u003e\u003c/p\u003e\n\u003ch2\u003eExercise 1.9\u003c/h2\u003e\n\u003cp\u003eThis is trivial. This procedure generates recursive process:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e a b)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e a \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n      b\n      (\u003cspan class=\"hljs-name\"\u003einc\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003edec\u003c/span\u003e a) b))))\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd this iterative:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e a b)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e a \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n      b\n      (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003edec\u003c/span\u003e a) (\u003cspan class=\"hljs-name\"\u003einc\u003c/span\u003e b))))\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWe could see this even without substitution model, if function returns itself in the and without any additional operation on its result - it is tail-recursive, so generates iterative process, otherwise - recursive.\u003c/p\u003e\n\u003ch2\u003eExercise 1.10 (Ackerman function)\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e x y)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003econd\u003c/span\u003e\u003c/span\u003e ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e y \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n        ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e x \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e y))\n        ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e y \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)\n        (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eelse\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e x \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n                 (\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e x (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e y \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e))))))\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e)\n    =\u003e (\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e9\u003c/span\u003e))\n    =\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e9\u003c/span\u003e))\n    =\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e*2\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e8\u003c/span\u003e)))\n    ...\n    =\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e^9 (\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e))\n    =\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e^\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e)\n    =\u003e (\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e))\n    =\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e^(\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e)\n    \u003cspan class=\"hljs-comment\"\u003e;;; see below ;;;\u003c/span\u003e\n    =\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e^\u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e)\n    =\u003e (\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)) \n    =\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e^(\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)\n    \u003cspan class=\"hljs-comment\"\u003e;;; see below ;;;\u003c/span\u003e\n    =\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e^\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e =\u003e \u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)\n    =\u003e (\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e))\n    =\u003e (\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)\n    =\u003e (\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)) \n    =\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)\n    =\u003e \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e)\n    =\u003e (\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e))\n    =\u003e (\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)))\n    =\u003e (\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e))\n    \u003cspan class=\"hljs-comment\"\u003e;;; see one above ;;;\u003c/span\u003e\n    =\u003e (\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e)\n    \u003cspan class=\"hljs-comment\"\u003e;;; see 3 above ;;;\u003c/span\u003e\n    =\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e^\u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e n) (\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e n))\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003ef(n) = 2n\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eg\u003c/span\u003e n) (\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e n))\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003eg(n) = 2^n\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eh\u003c/span\u003e n) (\u003cspan class=\"hljs-name\"\u003eA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e n))\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003eh(1) = 2\u003c/code\u003e\n\u003ccode\u003eh(n) = 2^(h(n-1))\u003c/code\u003e\u003c/p\u003e"},{"id":"sicp1.1","title":"SICP 1.1 The Elements of Programming","date":"2020-06-13","tags":["SICP"],"excerpt":"\u003cp\u003eDecided to finally try and go through this book. Will try to keep journal with notes here.\u003c/p\u003e","content":"\u003cp\u003eDecided to finally try and go through this book. Will try to keep journal with notes here.\u003c/p\u003e\n\u003cp\u003eInterpreter recommended for it - MIT Scheme, could be installed in Ubuntu by installing package \u003ccode\u003emit-scheme\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eThen \u003ccode\u003escheme\u003c/code\u003e command starts interpreter, \u003ccode\u003escheme --load sqr.scm\u003c/code\u003e loads \u0026#x26; evaluates file \u003ccode\u003esqr.scm\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eAnd here is my own implementation for finding the square root:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eabs\u003c/span\u003e\u003c/span\u003e x)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e\u0026#x3C;\u003c/span\u003e\u003c/span\u003e x \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e x)\n    x\n  ))\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e~=\u003c/span\u003e x y)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e\u0026#x3C;\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eabs\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e x y)) \u003cspan class=\"hljs-number\"\u003e0.0001\u003c/span\u003e))\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003esqr\u003c/span\u003e x) \n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e x x))\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eavg\u003c/span\u003e a b) \n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e/\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e a b) \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e))\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003esqrt\u003c/span\u003e\u003c/span\u003e x) \n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003esqrt-iter\u003c/span\u003e guess) \n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e~=\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003esqr\u003c/span\u003e guess) x)\n      guess\n      (\u003cspan class=\"hljs-name\"\u003esqrt-iter\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eavg\u003c/span\u003e guess (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e/\u003c/span\u003e\u003c/span\u003e x guess)))))\n  (\u003cspan class=\"hljs-name\"\u003esqrt-iter\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1.0\u003c/span\u003e))\u003c/code\u003e\u003c/pre\u003e"},{"id":"http2-vs-websockets","title":"HTTP2 vs WebSockets: a study of dashboard performance","date":"2018-12-20","excerpt":"\u003cp\u003eIn this post, we will compare the performance of different approaches to load data for analytics dashboards, or any page where we have lots of different requests to the same server.\u003c/p\u003e","content":"\u003cp\u003eIn this post, we will compare the performance of different approaches to load data for analytics dashboards, or any page where we have lots of different requests to the same server.\u003c/p\u003e\n\u003ch2\u003eBaseline\u003c/h2\u003e\n\u003cp\u003eWe will start from sample dashboard created with Vue.js and Chart.js (which does not matter) and loaded over HTTP/1.1 (which does matter). It should look like this, and appearance of it would not change till the end of this article, but we will try to change how quickly it appears in the browser window:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/content/dashboard.png\" alt=\"Example dashboard\" title=\"Our sample dashboard\"\u003e\u003c/p\u003e\n\u003cp\u003eStatic content will be served by Nginx server, which would also be a proxy to our backend python server which would serve data. It will expose 8080 port for HTTP and 8083 for HTTPS:\u003c/p\u003e\n\u003cp\u003e(If you are bored with lot's of code - scroll down, there will be explanations of what happens, I just publish it here to make this experiment reproducible)\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yml\"\u003e\u003cspan class=\"hljs-attr\"\u003eversion:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'3'\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eservices:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eserver:\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003eimage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eserver\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003ebuild:\u003c/span\u003e\n            \u003cspan class=\"hljs-attr\"\u003econtext:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e.\u003c/span\u003e\n            \u003cspan class=\"hljs-attr\"\u003edockerfile:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003enginx.docker\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003eports:\u003c/span\u003e\n            \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e:80\u003c/span\u003e\n            \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e8083\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e:443\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003ebackend:\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003eimage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ebackend\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003ebuild:\u003c/span\u003e\n            \u003cspan class=\"hljs-attr\"\u003econtext:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e.\u003c/span\u003e\n            \u003cspan class=\"hljs-attr\"\u003edockerfile:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ebackend.docker\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNginx container just runs image with a copy of configuration file and our HTML inside:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-docker\"\u003e\u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e nginx\n\n\u003cspan class=\"hljs-keyword\"\u003eCOPY\u003c/span\u003e\u003cspan class=\"bash\"\u003e nginx.conf /etc/nginx/nginx.conf\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eCOPY\u003c/span\u003e\u003cspan class=\"bash\"\u003e dashboard.html /var/www/index.html\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd this is its configuration file. It tells to listen at port 80, serve files from \u003ccode\u003e/var/www\u003c/code\u003e, and redirect requests to all URLs that have prefix \u003ccode\u003e/api/\u003c/code\u003e to our backend container:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003euser nginx;\n\nevents {\n  worker_connections 1024;\n}\n\nhttp {\n    sendfile on;\n    \n    include /etc/nginx/mime.types;\n\n    server {\n        listen 80;\n\n        root /var/www;\n\n        location /api/ {\n            proxy_pass      http://backend:8080/;\n        }\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHere is Dockerfile for backend server:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-docker\"\u003e\u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e python:\u003cspan class=\"hljs-number\"\u003e3.7\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eENV\u003c/span\u003e PYTHONUNBUFFERED \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eRUN\u003c/span\u003e\u003cspan class=\"bash\"\u003e mkdir /code\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eWORKDIR\u003c/span\u003e\u003cspan class=\"bash\"\u003e /code\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eRUN\u003c/span\u003e\u003cspan class=\"bash\"\u003e pip install sanic\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eCOPY\u003c/span\u003e\u003cspan class=\"bash\"\u003e server.py /code/server.py\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eEXPOSE\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eCMD\u003c/span\u003e\u003cspan class=\"bash\"\u003e python /code/server.py\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIt has Python3.7 inside, installs Sanic framework, exposes port 8080 and runs \u003ccode\u003eserver.py\u003c/code\u003e, which will provide us with data:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e asyncio\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e random\n\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e sanic \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e Sanic\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e sanic.response \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e json \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e json_response\n\napp = Sanic() \u003cspan class=\"hljs-comment\"\u003e# It is almost like Flask, just asyncronous\u003c/span\u003e\n\n\u003cspan class=\"hljs-meta\"\u003e@app.route(\u003cspan class=\"hljs-params\"\u003e\u003cspan class=\"hljs-string\"\u003e'/data/\u0026#x3C;data:int\u003e'\u003c/span\u003e\u003c/span\u003e)\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ereturn_data\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003erequest, data\u003c/span\u003e):\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e json_response(\u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e get_data(\n        data, \u003cspan class=\"hljs-built_in\"\u003eint\u003c/span\u003e(request.args.get(\u003cspan class=\"hljs-string\"\u003e'size'\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e))\n    ))\n\n\u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eget_data\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003edata, size\u003c/span\u003e):\u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e# First we wait 1-5 seconds to simulate request to database\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e asyncio.sleep(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e + random.random() * \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e)\n\n    \u003cspan class=\"hljs-comment\"\u003e# then start random walk from point that equals to data given\u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e# This is done to be able to distinguish between different graphs\u003c/span\u003e\n    position = data\n    data = []\n    \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e i \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003erange\u003c/span\u003e(size):\n        position += random.random() - \u003cspan class=\"hljs-number\"\u003e0.5\u003c/span\u003e\n        data.append(position)\n    \u003cspan class=\"hljs-comment\"\u003e# And return the data of that random walk\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e data\n\n\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e __name__ == \u003cspan class=\"hljs-string\"\u003e'__main__'\u003c/span\u003e:\n    app.run(host=\u003cspan class=\"hljs-string\"\u003e'0.0.0.0'\u003c/span\u003e, port=\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd the biggest listing in this post - HTML (well, mostly JavaScript) of the dashboard:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-html\"\u003e\u003cspan class=\"hljs-meta\"\u003e\u0026#x3C;!DOCTYPE \u003cspan class=\"hljs-meta-keyword\"\u003ehtml\u003c/span\u003e\u003e\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ehtml\u003c/span\u003e\u003e\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ehead\u003c/span\u003e\u003e\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003emeta\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003echarset\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"UTF-8\"\u003c/span\u003e\u003e\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003etitle\u003c/span\u003e\u003e\u003c/span\u003eDashboard\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003etitle\u003c/span\u003e\u003e\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003estyle\u003c/span\u003e\u003e\u003c/span\u003e\u003cspan class=\"css\"\u003e\n        \u003cspan class=\"hljs-selector-class\"\u003e.chart\u003c/span\u003e {\n            \u003cspan class=\"hljs-attribute\"\u003ewidth\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e350px\u003c/span\u003e; \u003cspan class=\"hljs-attribute\"\u003eheight\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e200px\u003c/span\u003e;\n            \u003cspan class=\"hljs-attribute\"\u003emargin\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e3px\u003c/span\u003e; \u003cspan class=\"hljs-attribute\"\u003eborder\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1px\u003c/span\u003e solid black;\n            \u003cspan class=\"hljs-attribute\"\u003eposition\u003c/span\u003e: relative; \u003cspan class=\"hljs-attribute\"\u003efloat\u003c/span\u003e: left;\n        }\n    \u003c/span\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003estyle\u003c/span\u003e\u003e\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ehead\u003c/span\u003e\u003e\u003c/span\u003e\n\n\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ebody\u003c/span\u003e\u003e\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"app\"\u003c/span\u003e\u003e\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u003e\u003c/span\u003eLoaded charts: {{loaded_chart_count}}\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u003e\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ev-for\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"chart in charts\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"chart\"\u003c/span\u003e\u003e\u003c/span\u003e\n            \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003echart\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003e:widget\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"chart\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ev-once\u003c/span\u003e\u003e\u003c/span\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003echart\u003c/span\u003e\u003e\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\n  \n\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003escript\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003esrc\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js'\u003c/span\u003e\u003e\u003c/span\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003escript\u003c/span\u003e\u003e\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003escript\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003esrc\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e'https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.11/lodash.min.js'\u003c/span\u003e\u003e\u003c/span\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003escript\u003c/span\u003e\u003e\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003escript\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003esrc\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e'https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.21/vue.min.js'\u003c/span\u003e\u003e\u003c/span\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003escript\u003c/span\u003e\u003e\u003c/span\u003e\n\n\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003escript\u003c/span\u003e \u003e\u003c/span\u003e\u003cspan class=\"javascript\"\u003e\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.time(\u003cspan class=\"hljs-string\"\u003e'load'\u003c/span\u003e); \u003cspan class=\"hljs-comment\"\u003e// Measure time from here to end of load\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e DATA_LEN = \u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e CHARTS_COUNT = \u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e data = {\n    \u003cspan class=\"hljs-attr\"\u003echarts\u003c/span\u003e: _.range(CHARTS_COUNT),\n    \u003cspan class=\"hljs-attr\"\u003eloaded_chart_count\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e,\n};\n\n\nVue.component(\u003cspan class=\"hljs-string\"\u003e'chart'\u003c/span\u003e, {\n  \u003cspan class=\"hljs-attr\"\u003etemplate\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'\u0026#x3C;canvas width=\"350\" height=\"200\"\u003e\u0026#x3C;/canvas\u003e'\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003eprops\u003c/span\u003e: [\u003cspan class=\"hljs-string\"\u003e'widget'\u003c/span\u003e],\n  \u003cspan class=\"hljs-attr\"\u003emounted\u003c/span\u003e: \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) \u003c/span\u003e{\n    createChart(\u003cspan class=\"hljs-built_in\"\u003ethis\u003c/span\u003e.$el, \u003cspan class=\"hljs-built_in\"\u003ethis\u003c/span\u003e.widget);\n  }\n});\n\n\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e createChart = \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eel, widget\u003c/span\u003e) \u003c/span\u003e{\n    \u003cspan class=\"hljs-comment\"\u003e// Load data and render line chart in given element\u003c/span\u003e\n    loadData(widget, \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003echart_data\u003c/span\u003e) \u003c/span\u003e{\n      \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e Chart(el, {\n          \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'line'\u003c/span\u003e,\n          \u003cspan class=\"hljs-attr\"\u003edata\u003c/span\u003e: {\n              \u003cspan class=\"hljs-attr\"\u003elabels\u003c/span\u003e: _.range(chart_data.length),\n              \u003cspan class=\"hljs-attr\"\u003edatasets\u003c/span\u003e: [{\n                  \u003cspan class=\"hljs-attr\"\u003elabel\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'Data '\u003c/span\u003e + widget,\n                  \u003cspan class=\"hljs-attr\"\u003edata\u003c/span\u003e: chart_data,\n              }]\n          },\n      });\n      data.loaded_chart_count ++;\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e(data.loaded_chart_count == CHARTS_COUNT) {\n        \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.timeEnd(\u003cspan class=\"hljs-string\"\u003e'load'\u003c/span\u003e); \u003cspan class=\"hljs-comment\"\u003e// stop load timer\u003c/span\u003e\n      }\n    });\n};\n\n\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e Vue({\n  \u003cspan class=\"hljs-attr\"\u003eel\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"#app\"\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003edata\u003c/span\u003e: data\n});\n\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eloadData\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ewidget, cb\u003c/span\u003e) \u003c/span\u003e{\n    \u003cspan class=\"hljs-comment\"\u003e// Load data for widget given, and when it is loaded - call cb\u003c/span\u003e\n    fetch(\u003cspan class=\"hljs-string\"\u003e'/api/data/'\u003c/span\u003e + widget + \u003cspan class=\"hljs-string\"\u003e'?size='\u003c/span\u003e + DATA_LEN).then(\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003eres\u003c/span\u003e =\u003e\u003c/span\u003e res.json()).then(cb);\n}\n\u003c/span\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003escript\u003c/span\u003e\u003e\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ebody\u003c/span\u003e\u003e\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ehtml\u003c/span\u003e\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIt loads Charts.js and Vue using CDN and renders \u003ccode\u003eCHARTS_COUNT\u003c/code\u003e charts. We will work here with the function \u003ccode\u003eloadData()\u003c/code\u003e, to see what we could improve. But first - test our baseline. Run \u003ccode\u003edocker-compose up\u003c/code\u003e and check how quickly it loads. We could do it in browser console using \u003ccode\u003econsole.time\u003c/code\u003e, and on network tab:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/content/network_debug.png\" alt=\"\" title=\"Screenshot of network tab of browser debugger\"\u003e\u003c/p\u003e\n\u003cp\u003e29 seconds for 50 graphs? When all the JavaScript was loaded from cache? Not cool. Not cool at all.\u003c/p\u003e\n\u003ch2\u003eDebugging the problem\u003c/h2\u003e\n\u003cp\u003eBut why it takes so much? Lets open request details:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/content/request_timings.png\" alt=\"\" title=\"Time of separate request\"\u003e\u003c/p\u003e\n\u003cp\u003eWe see that 24 seconds are spent in \u003cstrong\u003eBlocked\u003c/strong\u003e state, and 4.5 in \u003cstrong\u003eWaiting\u003c/strong\u003e, everything else is negligible. Here what \u003ca href=\"https://developer.mozilla.org/en-US/docs/Tools/Network_Monitor/request_details#Timings\"\u003eMozilla documentation\u003c/a\u003e has to say about that states:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eBlocked:\u003c/strong\u003e Time spent in a queue waiting for a network connection.\u003c/p\u003e\n\u003cp\u003eThe browser imposes a limit on the number of simultaneous connections that can be made to a single server. In Firefox this defaults to 6, but can be changed using the network.http.max-persistent-connections-per-server preference. If all connections are in use, the browser can't download more resources until a connection is released.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eWaiting:\u003c/strong\u003e Waiting for a response from the server.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eLet's assume that we optimized everything we could about time of request processing on the server because my post is not about this. What could we do about time spent blocked? Could we increase the limit of simultaneous connections in a browser? \u003ca href=\"https://tools.ietf.org/html/rfc2616#section-8.1.4\"\u003eRFC 2616\u003c/a\u003e (document that defines HTTP/1.1) does not recommend this, and Firefox already has that amount higher than recommended:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eClients that use persistent connections SHOULD limit the number of\nsimultaneous connections that they maintain to a given server. A\nsingle-user client SHOULD NOT maintain more than 2 connections with\nany server or proxy. A proxy SHOULD use up to 2 * N connections to\nanother server or proxy, where N is the number of simultaneously\nactive users. These guidelines are intended to improve HTTP response\ntimes and avoid congestion.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eThere are other solutions, like \u003ca href=\"https://medium.com/@jperasmus11/domain-sharding-on-the-modern-web-dc97df4f6a90\"\u003edomain sharding\u003c/a\u003e where we duplicate our resources on different domains, so this limit is not applicable, but it requires configuring other domains on Nginx, updating front-end to do requests to different domains, and additional DNS calls.\u003c/p\u003e\n\u003cp\u003eAnother option is to do one request per dashboard and receive all the data that dashboard needs in one response. The most important downside of this - decrease in \u003ca href=\"https://en.wikipedia.org/wiki/Perceived_performance\"\u003eperceived performance\u003c/a\u003e, when user will not be able to see top graphs which are requested first, first, but will observe inactivity on the page for a long time and then everything will load. And this will not be possible when a user creates dashboard dynamically by adding widgets here and there. And will require a rewrite of server and client.\u003c/p\u003e\n\u003cp\u003eBut there is a possibility to do all request over one connection and then receive all responses over the same one:\u003c/p\u003e\n\u003ch2\u003eWebSockets\u003c/h2\u003e\n\u003cp\u003eFirst, for Nginx to pass WebSocket requests to the backend server, we need to change location configuration for our API like this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-nginx\"\u003e        \u003cspan class=\"hljs-attribute\"\u003elocation\u003c/span\u003e /api/ {\n            \u003cspan class=\"hljs-attribute\"\u003eproxy_pass\u003c/span\u003e      http://backend:8080/; \u003cspan class=\"hljs-comment\"\u003e# this line was here before, the rest are added\u003c/span\u003e\n            \u003cspan class=\"hljs-attribute\"\u003eproxy_http_version\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e;\n            \u003cspan class=\"hljs-attribute\"\u003eproxy_set_header\u003c/span\u003e Upgrade $http_upgrade;\n            \u003cspan class=\"hljs-attribute\"\u003eproxy_set_header\u003c/span\u003e Connection \u003cspan class=\"hljs-string\"\u003e\"Upgrade\"\u003c/span\u003e;\n            \u003cspan class=\"hljs-attribute\"\u003eproxy_set_header\u003c/span\u003e Host $host;\n            \u003cspan class=\"hljs-attribute\"\u003eproxy_read_timeout\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e3600s\u003c/span\u003e;\n            \u003cspan class=\"hljs-attribute\"\u003eproxy_send_timeout\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e3600s\u003c/span\u003e;\n        }\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThen, as we will send all the requests and receive all the responses over one connection, and they will be received not in the same order as they were sent, we need to figure out how to match requests with responses. That could be done using unique ids, which define to which chart each response belongs.\u003c/p\u003e\n\u003cp\u003eSo, we will replace our \u003ccode\u003eloadData\u003c/code\u003e function that called \u003ccode\u003efetch\u003c/code\u003e with the following code:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e ws = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e WebSocket(\u003cspan class=\"hljs-string\"\u003e'ws://'\u003c/span\u003e + \u003cspan class=\"hljs-built_in\"\u003edocument\u003c/span\u003e.domain + \u003cspan class=\"hljs-string\"\u003e':'\u003c/span\u003e + location.port + \u003cspan class=\"hljs-string\"\u003e'/api/ws/'\u003c/span\u003e);\n\nws.onopen = \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) \u003c/span\u003e{\n    \u003cspan class=\"hljs-comment\"\u003e// Vue instance should be created after socket is open because otherwise \u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e// components could try to send requests before it opens, and will fail\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e Vue({\n      \u003cspan class=\"hljs-attr\"\u003eel\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"#app\"\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr\"\u003edata\u003c/span\u003e: data\n    });\n}\n\n\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e socketSubscribers = {}; \u003cspan class=\"hljs-comment\"\u003e// will map request id's to repsponse handlers\u003c/span\u003e\nws.onmessage = \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003eevent\u003c/span\u003e) \u003c/span\u003e{\n    \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e data = \u003cspan class=\"hljs-built_in\"\u003eJSON\u003c/span\u003e.parse(event.data);\n    \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e subscriber = socketSubscribers[data.id];\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e(subscriber) {\n        subscriber(data);\n        \u003cspan class=\"hljs-comment\"\u003e// \u003cspan class=\"hljs-doctag\"\u003eTODO:\u003c/span\u003e maybe remove subscriber\u003c/span\u003e\n    };\n};\n\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eget_unique_id\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) \u003c/span\u003e{\n    \u003cspan class=\"hljs-comment\"\u003e// Will not work for multiple users, for production use some UUID implementation\u003c/span\u003e\n    get_unique_id.uid = (get_unique_id.uid || \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) + \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e;\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e get_unique_id.uid\n}\n\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eloadData\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ewidget, cb\u003c/span\u003e) \u003c/span\u003e{\n    \u003cspan class=\"hljs-comment\"\u003e// Load data for widget given, and when it is loaded - call cb\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e id = get_unique_id();\n\n    \u003cspan class=\"hljs-comment\"\u003e// Send request \u003c/span\u003e\n    ws.send(\u003cspan class=\"hljs-built_in\"\u003eJSON\u003c/span\u003e.stringify({\n        \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: id, \n        \u003cspan class=\"hljs-attr\"\u003edata\u003c/span\u003e: widget,\n        \u003cspan class=\"hljs-attr\"\u003esize\u003c/span\u003e: DATA_LEN,\n    }));\n    \u003cspan class=\"hljs-comment\"\u003e// Add subscriber for response with this id\u003c/span\u003e\n    socketSubscribers[id] = \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003edata\u003c/span\u003e) \u003c/span\u003e{\n        cb(data.data);\n    };\n}\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis code is artificially simplified to fit in this post, and for example, proper ID generation, handling of errors, reconnect in case of lost connection are not implemented.\u003c/p\u003e\n\u003cp\u003eLet's also look at how the server is changed. We need to add a new handler for WebSocket endpoint:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-meta\"\u003e@app.websocket(\u003cspan class=\"hljs-params\"\u003e\u003cspan class=\"hljs-string\"\u003e'/ws'\u003c/span\u003e\u003c/span\u003e)\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ewebsocket\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003erequest, websocket\u003c/span\u003e):\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003ewhile\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003eTrue\u003c/span\u003e: \u003cspan class=\"hljs-comment\"\u003e# Run forever\u003c/span\u003e\n        data = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e websocket.recv() \u003cspan class=\"hljs-comment\"\u003e# when receiving request from socket\u003c/span\u003e\n        \n        \u003cspan class=\"hljs-comment\"\u003e# start task to handle that, pass it socket\u003c/span\u003e\n        asyncio.create_task(handle_socket_data(websocket, data)) \n\n\u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ehandle_socket_data\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ewebsocket, data\u003c/span\u003e):\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e:\n        json_data = json.loads(data)\n        data = json_data[\u003cspan class=\"hljs-string\"\u003e'data'\u003c/span\u003e]\n        size = json_data.get(\u003cspan class=\"hljs-string\"\u003e'size'\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e)\n        \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e websocket.send(json.dumps(\u003cspan class=\"hljs-built_in\"\u003edict\u003c/span\u003e(\n            \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e=json_data[\u003cspan class=\"hljs-string\"\u003e'id'\u003c/span\u003e],\n            data=\u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e get_data(data, size)\n        )))\n    \u003cspan class=\"hljs-keyword\"\u003eexcept\u003c/span\u003e Exception \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e e:\n        \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e websocket.send(json.dumps(\u003cspan class=\"hljs-built_in\"\u003edict\u003c/span\u003e(\n            error=\u003cspan class=\"hljs-built_in\"\u003estr\u003c/span\u003e(e)\n        )))\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe server is not as complex as front-end part, but it is just because we are not re-implemented router here. Which we are likely to do if our goal was to multiplex multiple requests over one WebSocket.\u003c/p\u003e\n\u003cp\u003eSo, unfortunately, Firefox does not have WebSocket debugger to see it's performance, but we used \u003ccode\u003econsole.time\u003c/code\u003e to measure time from start of script execution to the moment when \u003ccode\u003eCHARTS_COUNT\u003c/code\u003e charts are finished loading, and it gives me 5215ms. This is a lot better than 29 seconds. 5-6 times better.\u003c/p\u003e\n\u003cp\u003eCould we do this even better? Well, time of each request is random and between 1 and 5 seconds, so if we will have it under 5 seconds it will be just an accident, but if better means not only faster but maintainable, then yes.\u003c/p\u003e\n\u003cp\u003eThis code above is a very simple example. It becomes more complicated when you had different endpoints so you will need to reimplement router for WebSockets handler. Then if you have different HTTP methods, you will also need to add that into the router and into the WebSocket payload. Then, if you need auth, cache control, you will start to reimplement HTTP. And it has a lot of features. For example, the browser already has a cache for requests and is able to update it using different methods (Etag, If-Modified-Since). Frameworks already have routers, auth and stuff like that.\u003c/p\u003e\n\u003cp\u003eAdditionally, if you have microservice architecture, will you create WebSocket for each service? Or create a microservice proxy that connects to other microservices over HTTP and provides WebSocket interface? Or add it to the backlog and forget about it forever, because you will never get to it because you will have to support that huge pile of sh code you wrote to optimize page load time.\u003c/p\u003e\n\u003cp\u003eSo, let me show you a better way:\u003c/p\u003e\n\u003ch2\u003eHTTP2\u003c/h2\u003e\n\u003cp\u003eFirst and biggest task that we need to do in order to use HTTP2 is to have TLS certificate for our domain. If you are serious about your app, you should have them for https anyway. For our experiments we could generate a self-signed certificate for localhost using this command:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eopenssl req -x509 -out localhost.crt -keyout localhost.key \\\n  -newkey rsa:2048 -nodes -sha256 \\\n  -subj \u003cspan class=\"hljs-string\"\u003e'/CN=localhost'\u003c/span\u003e -extensions EXT -config \u0026#x3C;( \\\n   \u003cspan class=\"hljs-built_in\"\u003eprintf\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"[dn]\\nCN=localhost\\n[req]\\ndistinguished_name = dn\\n[EXT]\\nsubjectAltName=DNS:localhost\\nkeyUsage=digitalSignature\\nextendedKeyUsage=serverAuth\"\u003c/span\u003e)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThen just add that certificate to Nginx container:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-docker\"\u003e\u003cspan class=\"hljs-keyword\"\u003eCOPY\u003c/span\u003e\u003cspan class=\"bash\"\u003e localhost.crt /etc/ssl/certs/localhost.crt;\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eCOPY\u003c/span\u003e\u003cspan class=\"bash\"\u003e localhost.key /etc/ssl/private/localhost.key;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd now, update \u003ccode\u003enginx.conf\u003c/code\u003e server section with this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-nginx\"\u003e        \u003cspan class=\"hljs-attribute\"\u003elisten\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e443\u003c/span\u003e ssl http2 default_server;\n        \u003cspan class=\"hljs-attribute\"\u003elisten\u003c/span\u003e [::]:\u003cspan class=\"hljs-number\"\u003e443\u003c/span\u003e ssl http2 default_server;\n        \u003cspan class=\"hljs-attribute\"\u003essl_ciphers\u003c/span\u003e EECDH+CHACHA20:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;\n\n        \u003cspan class=\"hljs-attribute\"\u003essl_certificate\u003c/span\u003e /etc/ssl/certs/localhost.crt;\n        \u003cspan class=\"hljs-attribute\"\u003essl_certificate_key\u003c/span\u003e /etc/ssl/private/localhost.key;\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow, when we open https://localhost:8083/ in a browser, and check network tab, we will see this:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/content/http2_network_debug.png\" alt=\"\" title=\"Requests with HTTP2\"\u003e\u003c/p\u003e\n\u003cp\u003e5.3 seconds and all requests start at the same time. Same speed improvement as WebSockets, but this time we just changed Nginx config, and not touched front-end or back-end code at all.\u003c/p\u003e\n\u003cp\u003eAdditional benefits from using HTTP is that it is now a lot easier to debug (you could explore WebSocket frames using Chrome debugger), but you could not reproduce socket request using \u003ccode\u003ecurl\u003c/code\u003e. Also, here we automatically get browser cache and compression of HTTP headers.\u003c/p\u003e\n\u003cp\u003eOf course, some old browsers could have no support HTTP2, but this should not worry us, because the protocol is negotiated automatically.\u003c/p\u003e\n\u003ch2\u003eConclusion\u003c/h2\u003e\n\u003cp\u003eIf you really have reason and resources to use WebSockets - use WebSockets. If your only task was to optimize page load, and you wanted to decrease time requests spend in a blocked state - just turn on HTTP2, don't repeat my mistake of developing WebSocket solution just because you do not know about HTTP2. You do now.\u003c/p\u003e"}],"pages":3,"archives":[{"url":"/month/2021-10/page/1","id":"2021-10","count":1,"title":"2021-10"},{"url":"/month/2021-01/page/1","id":"2021-01","count":4,"title":"2021-01"},{"url":"/month/2020-12/page/1","id":"2020-12","count":1,"title":"2020-12"},{"url":"/month/2020-09/page/1","id":"2020-09","count":2,"title":"2020-09"},{"url":"/month/2020-08/page/1","id":"2020-08","count":2,"title":"2020-08"},{"url":"/month/2020-07/page/1","id":"2020-07","count":10,"title":"2020-07"},{"url":"/month/2020-06/page/1","id":"2020-06","count":7,"title":"2020-06"},{"url":"/month/2018-12/page/1","id":"2018-12","count":1,"title":"2018-12"}],"topics":[{"url":"/tag/MOOC/page/1","id":"MOOC","title":"MOOC","count":2},{"url":"/tag/SICP/page/1","id":"SICP","title":"SICP","count":20},{"url":"/tag/asm/page/1","id":"asm","title":"asm","count":1},{"url":"/tag/ideas/page/1","id":"ideas","title":"ideas","count":1},{"url":"/tag/notes/page/1","id":"notes","title":"notes","count":6},{"url":"/tag/on writing/page/1","id":"on writing","title":"on writing","count":3}]},"__N_SSG":true},"page":"/page/[page]","query":{"page":"3"},"buildId":"vTIm-6E4fBbgVLRlj9tfU","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>