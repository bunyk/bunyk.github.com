{"pageProps":{"pageNumber":"1","posts":[{"id":"typing","title":"Thoughs on typing","date":"2020-09-23","tags":["ideas"],"excerpt":"<p>I was searching for something related to SICP, found <a href=\"https://irreal.org/blog/?p=6019\">this post</a>, and noticed another article on that blog, <a href=\"https://irreal.org/blog/?p=9115\">about typing speed</a>.</p>\n<p>That article argues that even though typing speed usually is considered to not be a bottleneck in the developer's productivity, it really is. Because, even if we agree that typing code is a small fraction of all the work that software developer is doing, developers type a lot, and it's mostly communication: chats, Jira, emails, documentation, etc.</p>","content":"<p>I was searching for something related to SICP, found <a href=\"https://irreal.org/blog/?p=6019\">this post</a>, and noticed another article on that blog, <a href=\"https://irreal.org/blog/?p=9115\">about typing speed</a>.</p>\n<p>That article argues that even though typing speed usually is considered to not be a bottleneck in the developer's productivity, it really is. Because, even if we agree that typing code is a small fraction of all the work that software developer is doing, developers type a lot, and it's mostly communication: chats, Jira, emails, documentation, etc.</p>\n<p>Which got me thinking that on last performance review often mentioned area of improvement for me was communication. So, I went through <a href=\"https://developers.google.com/tech-writing/overview\">Google technical writing course</a> and did exercises there on how to write better text. Did I start to communicate better? Barely, I still prefer to write code instead of long Jira issue descriptions or design documents with proposals for new features. Maybe it is because I type slowly (60 wpm). This is better than 90% or something of the population, but the general population does not spend most of their working day behind the keyboard.</p>\n<p>There was another article on that blog, <a href=\"https://irreal.org/blog/?p=9087\">how to increase your typing speed</a>, which linked to <a href=\"https://www.youtube.com/watch?v=1ArVtCQqQRE\">a video with tips to improve typing speed</a>, and <a href=\"https://www.youtube.com/watch?v=hnX63qh0EfM\">video blog of a guy who increased his speed from 50 wpm to 100 wpm</a>, and I thought that maybe I should to try to reach 100 wpm speed too.</p>\n<p>So, I went to <a href=\"https://www.keybr.com/\">keybr.com</a>, and already spent in a total of 2 hours practicing there, and my current record is 90.6 wpm. Not yet 100, but very close.</p>\n<p>Keybr generates random texts (with \"words\" made from random characters) by using statistics on how you type, to train your weakest keys. I think this approach is good and will get me to 100 wpm there in a month or so of focused practice. But it could be improved further.</p>\n<p>First, keybr.com has no special characters, which are critical for a programmer. And even for a writer. When I write this in markdown, I use square brackets to add links, for example.</p>\n<p>Second, the text is different every time, and you could not repeat the same text to see how you improved.</p>\n<p>I also have read about <a href=\"https://forum.colemak.com/topic/2201-training-with-amphetype/\">an interesting method on the forum about Colemak keyboard layout</a>, called \"type-reading\", where you type some interesting book paragraph by paragraph, so you train your typing at the same time as you read it. And suggestion to use this to learn some poems. I think it is a very nice idea, which could help me to learn some German. (If you are wondering, no, I'm not going to learn Colemak or Dvorak, I switch Ctrl and Fn keys on my computers, to have Ctrl on the lower-left corner, and that is enough pain when I'm using someone's computer, or when someone uses mine).</p>\n<p>And third, it would be nice to have statistics on only on separate keys, but for trigrams or some kind of n-grams (I'm not sure which n would be optimal). And given some text, it should calculate optimal exercise to speed-up typing that text the most. Keeping in the account that the fastest trigrams are hardest to speedup, but the most frequent ones will influence overall typing speed at most.</p>\n<p>And it should be some console program, so anytime I could type the command:</p>\n<pre><code>typetrainer add if_kipling if.txt\n</code></pre>\n<p>And it will add lessons based on that poem to the set of lessons. And then to test &#x26; train run:</p>\n<pre><code>typetrainer test if_kipling\ntypetrainer train if_kipling\n</code></pre>\n<p>And training session will be generated with randomly selected trigrams, where the probability of each trigram to appear next is probably the frequency of that trigram in sample text divided by the speed with which it is typed measured in our average trigram speed (the faster we type the less it is needed to be improved).</p>\n<p>And for each trigram, we keep per-lesson stats, and global stats, of maybe 10 last typing speeds in the ring buffer, so we have a moving average of 10 values instead of the last value, which could get pretty noisy.</p>\n<p>Maybe https://github.com/pb-/gotypist could be updated to be like that.</p>\n<p>But maybe I should fist focus on achieving 100 wpm speed on keybr.com, and finishing SICP. I have many interests, sometimes they conflict, as Smixx would rap in \"Developers\".</p>"},{"id":"sicp2.5.1","title":"SICP 2.5.1 Generic arithmetic operations","date":"2020-09-02","tags":["SICP"],"excerpt":"<p>In <a href=\"/posts/sicp2.4/\">previous post</a> I have used wrong StackOverflow answer. :) Or, to be more precise, right answer for that section, but useless here, as we want to store in table functions for multiple arguments.</p>\n<p><a href=\"https://stackoverflow.com/a/19114031/816449\">Correct answer</a> that supports lists looks like this:</p>\n<pre><code class=\"hljs language-scheme\">(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> *op-table* (<span class=\"hljs-name\">make-hash-table</span>))\n\n(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">put</span> op type proc)\n  (<span class=\"hljs-name\">hash-table/put!</span> *op-table* (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">list</span></span> op type) proc))\n\n(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">get</span> op type)\n  (<span class=\"hljs-name\">hash-table/get</span> *op-table* (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">list</span></span> op type) <span class=\"hljs-literal\">#f</span>))</code></pre>","content":"<p>In <a href=\"/posts/sicp2.4/\">previous post</a> I have used wrong StackOverflow answer. :) Or, to be more precise, right answer for that section, but useless here, as we want to store in table functions for multiple arguments.</p>\n<p><a href=\"https://stackoverflow.com/a/19114031/816449\">Correct answer</a> that supports lists looks like this:</p>\n<pre><code class=\"hljs language-scheme\">(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> *op-table* (<span class=\"hljs-name\">make-hash-table</span>))\n\n(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">put</span> op type proc)\n  (<span class=\"hljs-name\">hash-table/put!</span> *op-table* (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">list</span></span> op type) proc))\n\n(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">get</span> op type)\n  (<span class=\"hljs-name\">hash-table/get</span> *op-table* (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">list</span></span> op type) <span class=\"hljs-literal\">#f</span>))</code></pre>\n<p>Also I needed to copypaste a lot of code to be able to start working on <a href=\"#exercise-2-77\">first exercise</a>:</p>\n<pre><code class=\"hljs language-scheme\">(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">attach-tag</span> type-tag contents)\n  (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">cons</span></span> type-tag contents))\n(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">type-tag</span> datum)\n  (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">if</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">pair?</span></span> datum)\n      (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">car</span></span> datum)\n      (<span class=\"hljs-name\">error</span> <span class=\"hljs-string\">\"Bad tagged datum -- TYPE-TAG\"</span> datum)))\n(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">contents</span> datum)\n  (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">if</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">pair?</span></span> datum)\n      (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">cdr</span></span> datum)\n      (<span class=\"hljs-name\">error</span> <span class=\"hljs-string\">\"Bad tagged datum -- CONTENTS\"</span> datum)))\n\n(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">apply-generic</span> op . args)\n  (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">let</span></span> ((<span class=\"hljs-name\">type-tags</span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">map</span></span> type-tag args)))\n    (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">let</span></span> ((<span class=\"hljs-name\">proc</span> (<span class=\"hljs-name\">get</span> op type-tags)))\n      (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">if</span></span> proc\n          (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">apply</span></span> proc (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">map</span></span> contents args))\n          (<span class=\"hljs-name\">error</span>\n            <span class=\"hljs-string\">\"No method for these types -- APPLY-GENERIC\"</span>\n            (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">list</span></span> op type-tags))))))\n\n(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">real-part</span></span> z) (<span class=\"hljs-name\">apply-generic</span> <span class=\"hljs-symbol\">'real-part</span> z))\n(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">imag-part</span></span> z) (<span class=\"hljs-name\">apply-generic</span> <span class=\"hljs-symbol\">'imag-part</span> z))\n(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">magnitude</span></span> z) (<span class=\"hljs-name\">apply-generic</span> <span class=\"hljs-symbol\">'magnitude</span> z))\n(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">angle</span></span> z) (<span class=\"hljs-name\">apply-generic</span> <span class=\"hljs-symbol\">'angle</span> z))\n\n\n\n(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">install-rectangular-package</span>)\n  <span class=\"hljs-comment\">;; internal procedures</span>\n  (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">real-part</span></span> z) (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">car</span></span> z))\n  (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">imag-part</span></span> z) (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">cdr</span></span> z))\n  (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">make-from-real-imag</span> x y) (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">cons</span></span> x y))\n  (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">magnitude</span></span> z)\n    (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">sqrt</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">+</span></span> (<span class=\"hljs-name\">square</span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">real-part</span></span> z))\n             (<span class=\"hljs-name\">square</span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">imag-part</span></span> z)))))\n  (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">angle</span></span> z)\n    (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">atan</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">imag-part</span></span> z) (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">real-part</span></span> z)))\n  (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">make-from-mag-ang</span> r a) \n    (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">cons</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">*</span></span> r (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">cos</span></span> a)) (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">*</span></span> r (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">sin</span></span> a))))\n  <span class=\"hljs-comment\">;; interface to the rest of the system</span>\n  (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">tag</span> x) (<span class=\"hljs-name\">attach-tag</span> <span class=\"hljs-symbol\">'rectangular</span> x))\n  (<span class=\"hljs-name\">put</span> <span class=\"hljs-symbol\">'real-part</span> '(rectangular) real-part)\n  (<span class=\"hljs-name\">put</span> <span class=\"hljs-symbol\">'imag-part</span> '(rectangular) imag-part)\n  (<span class=\"hljs-name\">put</span> <span class=\"hljs-symbol\">'magnitude</span> '(rectangular) magnitude)\n  (<span class=\"hljs-name\">put</span> <span class=\"hljs-symbol\">'angle</span> '(rectangular) angle)\n  (<span class=\"hljs-name\">put</span> <span class=\"hljs-symbol\">'make-from-real-imag</span> <span class=\"hljs-symbol\">'rectangular</span> \n       (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">lambda</span></span> (x y) (<span class=\"hljs-name\">tag</span> (<span class=\"hljs-name\">make-from-real-imag</span> x y))))\n  (<span class=\"hljs-name\">put</span> <span class=\"hljs-symbol\">'make-from-mag-ang</span> <span class=\"hljs-symbol\">'rectangular</span> \n       (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">lambda</span></span> (r a) (<span class=\"hljs-name\">tag</span> (<span class=\"hljs-name\">make-from-mag-ang</span> r a))))\n  <span class=\"hljs-symbol\">'done</span>)\n(<span class=\"hljs-name\">install-rectangular-package</span>)\n\n(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">install-polar-package</span>)\n  <span class=\"hljs-comment\">;; internal procedures</span>\n  (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">magnitude</span></span> z) (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">car</span></span> z))\n  (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">angle</span></span> z) (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">cdr</span></span> z))\n  (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">make-from-mag-ang</span> r a) (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">cons</span></span> r a))\n  (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">real-part</span></span> z)\n    (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">*</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">magnitude</span></span> z) (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">cos</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">angle</span></span> z))))\n  (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">imag-part</span></span> z)\n    (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">*</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">magnitude</span></span> z) (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">sin</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">angle</span></span> z))))\n  (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">make-from-real-imag</span> x y) \n    (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">cons</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">sqrt</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">+</span></span> (<span class=\"hljs-name\">square</span> x) (<span class=\"hljs-name\">square</span> y)))\n          (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">atan</span></span> y x)))\n  <span class=\"hljs-comment\">;; interface to the rest of the system</span>\n  (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">tag</span> x) (<span class=\"hljs-name\">attach-tag</span> <span class=\"hljs-symbol\">'polar</span> x))\n  (<span class=\"hljs-name\">put</span> <span class=\"hljs-symbol\">'real-part</span> '(polar) real-part)\n  (<span class=\"hljs-name\">put</span> <span class=\"hljs-symbol\">'imag-part</span> '(polar) imag-part)\n  (<span class=\"hljs-name\">put</span> <span class=\"hljs-symbol\">'magnitude</span> '(polar) magnitude)\n  (<span class=\"hljs-name\">put</span> <span class=\"hljs-symbol\">'angle</span> '(polar) angle)\n  (<span class=\"hljs-name\">put</span> <span class=\"hljs-symbol\">'make-from-real-imag</span> <span class=\"hljs-symbol\">'polar</span>\n       (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">lambda</span></span> (x y) (<span class=\"hljs-name\">tag</span> (<span class=\"hljs-name\">make-from-real-imag</span> x y))))\n  (<span class=\"hljs-name\">put</span> <span class=\"hljs-symbol\">'make-from-mag-ang</span> <span class=\"hljs-symbol\">'polar</span> \n       (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">lambda</span></span> (r a) (<span class=\"hljs-name\">tag</span> (<span class=\"hljs-name\">make-from-mag-ang</span> r a))))\n  <span class=\"hljs-symbol\">'done</span>)\n(<span class=\"hljs-name\">install-rectangular-package</span>)\n\n(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">install-complex-package</span>)\n  <span class=\"hljs-comment\">;; imported procedures from rectangular and polar packages</span>\n  (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">make-from-real-imag</span> x y)\n    ((<span class=\"hljs-name\">get</span> <span class=\"hljs-symbol\">'make-from-real-imag</span> <span class=\"hljs-symbol\">'rectangular</span>) x y))\n  (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">make-from-mag-ang</span> r a)\n    ((<span class=\"hljs-name\">get</span> <span class=\"hljs-symbol\">'make-from-mag-ang</span> <span class=\"hljs-symbol\">'polar</span>) r a))\n  <span class=\"hljs-comment\">;; internal procedures</span>\n  (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">add-complex</span> z1 z2)\n    (<span class=\"hljs-name\">make-from-real-imag</span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">+</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">real-part</span></span> z1) (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">real-part</span></span> z2))\n                         (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">+</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">imag-part</span></span> z1) (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">imag-part</span></span> z2))))\n  (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">sub-complex</span> z1 z2)\n    (<span class=\"hljs-name\">make-from-real-imag</span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">-</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">real-part</span></span> z1) (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">real-part</span></span> z2))\n                         (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">-</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">imag-part</span></span> z1) (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">imag-part</span></span> z2))))\n  (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">mul-complex</span> z1 z2)\n    (<span class=\"hljs-name\">make-from-mag-ang</span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">*</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">magnitude</span></span> z1) (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">magnitude</span></span> z2))\n                       (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">+</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">angle</span></span> z1) (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">angle</span></span> z2))))\n  (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">div-complex</span> z1 z2)\n    (<span class=\"hljs-name\">make-from-mag-ang</span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">/</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">magnitude</span></span> z1) (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">magnitude</span></span> z2))\n                       (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">-</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">angle</span></span> z1) (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">angle</span></span> z2))))\n  <span class=\"hljs-comment\">;; interface to rest of the system</span>\n  (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">tag</span> z) (<span class=\"hljs-name\">attach-tag</span> <span class=\"hljs-symbol\">'complex</span> z))\n  (<span class=\"hljs-name\">put</span> <span class=\"hljs-symbol\">'add</span> '(complex complex)\n       (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">lambda</span></span> (z1 z2) (<span class=\"hljs-name\">tag</span> (<span class=\"hljs-name\">add-complex</span> z1 z2))))\n  (<span class=\"hljs-name\">put</span> <span class=\"hljs-symbol\">'sub</span> '(complex complex)\n       (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">lambda</span></span> (z1 z2) (<span class=\"hljs-name\">tag</span> (<span class=\"hljs-name\">sub-complex</span> z1 z2))))\n  (<span class=\"hljs-name\">put</span> <span class=\"hljs-symbol\">'mul</span> '(complex complex)\n       (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">lambda</span></span> (z1 z2) (<span class=\"hljs-name\">tag</span> (<span class=\"hljs-name\">mul-complex</span> z1 z2))))\n  (<span class=\"hljs-name\">put</span> <span class=\"hljs-symbol\">'div</span> '(complex complex)\n       (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">lambda</span></span> (z1 z2) (<span class=\"hljs-name\">tag</span> (<span class=\"hljs-name\">div-complex</span> z1 z2))))\n  (<span class=\"hljs-name\">put</span> <span class=\"hljs-symbol\">'make-from-real-imag</span> <span class=\"hljs-symbol\">'complex</span>\n       (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">lambda</span></span> (x y) (<span class=\"hljs-name\">tag</span> (<span class=\"hljs-name\">make-from-real-imag</span> x y))))\n  (<span class=\"hljs-name\">put</span> <span class=\"hljs-symbol\">'make-from-mag-ang</span> <span class=\"hljs-symbol\">'complex</span>\n       (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">lambda</span></span> (r a) (<span class=\"hljs-name\">tag</span> (<span class=\"hljs-name\">make-from-mag-ang</span> r a))))\n  (<span class=\"hljs-name\">put</span> <span class=\"hljs-symbol\">'real-part</span> '(complex) real-part)\n  (<span class=\"hljs-name\">put</span> <span class=\"hljs-symbol\">'imag-part</span> '(complex) imag-part)\n  (<span class=\"hljs-name\">put</span> <span class=\"hljs-symbol\">'magnitude</span> '(complex) magnitude)\n  (<span class=\"hljs-name\">put</span> <span class=\"hljs-symbol\">'angle</span> '(complex) angle)\n  <span class=\"hljs-symbol\">'done</span>)\n(<span class=\"hljs-name\">install-complex-package</span>)</code></pre>\n<h2>Exercise 2.77</h2>\n<pre><code class=\"hljs language-scheme\">(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> z (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">cons</span></span> <span class=\"hljs-symbol\">'complex</span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">cons</span></span> <span class=\"hljs-symbol\">'rectangular</span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">cons</span></span> <span class=\"hljs-number\">3</span> <span class=\"hljs-number\">4</span>))))\n\n(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">magnitude</span></span> z)</code></pre>\n<p>It calls <code>apply-generic</code> to do operation <code>'magnitude</code> with z</p>\n<pre><code class=\"hljs language-scheme\">(<span class=\"hljs-name\">apply-generic</span> <span class=\"hljs-symbol\">'magnitude</span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">cons</span></span> <span class=\"hljs-symbol\">'complex</span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">cons</span></span> <span class=\"hljs-symbol\">'rectangular</span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">cons</span></span> <span class=\"hljs-number\">3</span> <span class=\"hljs-number\">4</span>))))</code></pre>\n<p><code>apply-generic</code> looks for operation <code>'magnitude</code> for <code>'complex</code> numbers, and applies it to value inside</p>\n<pre><code class=\"hljs language-scheme\">(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">apply</span></span> (<span class=\"hljs-name\">get</span> <span class=\"hljs-symbol\">'magnitude</span> <span class=\"hljs-symbol\">'complex</span>) (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">cons</span></span> <span class=\"hljs-symbol\">'rectangular</span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">cons</span></span> <span class=\"hljs-number\">3</span> <span class=\"hljs-number\">4</span>)))</code></pre>\n<p>That operation, thanks to Alyssa P. Hacker, is just application of same <code>magnitude</code> function, but this time for <code>'rectangular</code> object</p>\n<pre><code class=\"hljs language-scheme\">(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">magnitude</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">cons</span></span> <span class=\"hljs-symbol\">'rectangular</span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">cons</span></span> <span class=\"hljs-number\">3</span> <span class=\"hljs-number\">4</span>)))</code></pre>\n<p>apply-generic applies operation 'magnitude for 'rectangular type to content of rectangular \"package\":</p>\n<pre><code class=\"hljs language-scheme\">(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">apply</span></span> (<span class=\"hljs-name\">get</span> <span class=\"hljs-symbol\">'magnitude</span> <span class=\"hljs-symbol\">'rectangular</span>) (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">cons</span></span> <span class=\"hljs-number\">3</span> <span class=\"hljs-number\">4</span>))</code></pre>\n<p>which is <code>magnitude</code> function from inside rectangular package</p>\n<pre><code class=\"hljs language-scheme\">(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">magnitude</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">cons</span></span> <span class=\"hljs-number\">3</span> <span class=\"hljs-number\">4</span>))\n(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">sqrt</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">+</span></span> (<span class=\"hljs-name\">square</span> <span class=\"hljs-number\">3</span>)\n         (<span class=\"hljs-name\">square</span> <span class=\"hljs-number\">4</span>)))\n<span class=\"hljs-number\">5</span></code></pre>\n<h2>Exercise 2.78</h2>\n<pre><code class=\"hljs language-scheme\">(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">attach-tag</span> type-tag contents)\n  (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">if</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">eq?</span></span> type-tag <span class=\"hljs-symbol\">'scheme-number</span>)\n    contents\n    (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">cons</span></span> type-tag contents)\n  )\n)\n(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">type-tag</span> datum)\n  (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">cond</span></span>\n    ((<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">number?</span></span> datum) <span class=\"hljs-symbol\">'scheme-number</span>)\n    ((<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">pair?</span></span> datum) (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">car</span></span> datum))\n    (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">else</span></span> (<span class=\"hljs-name\">error</span> <span class=\"hljs-string\">\"Bad tagged datum -- TYPE-TAG\"</span> datum))\n  )\n)\n(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">contents</span> datum)\n  (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">cond</span></span>\n    ((<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">number?</span></span> datum) datum)\n    ((<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">pair?</span></span> datum) (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">cdr</span></span> datum))\n    (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">else</span></span> (<span class=\"hljs-name\">error</span> <span class=\"hljs-string\">\"Bad tagged datum -- CONTENTS\"</span> datum))\n  )\n)</code></pre>\n<p>To test:</p>\n<pre><code class=\"hljs language-scheme\">(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">add</span> x y) (<span class=\"hljs-name\">apply-generic</span> <span class=\"hljs-symbol\">'add</span> x y))\n(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">sub</span> x y) (<span class=\"hljs-name\">apply-generic</span> <span class=\"hljs-symbol\">'sub</span> x y))\n(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">mul</span> x y) (<span class=\"hljs-name\">apply-generic</span> <span class=\"hljs-symbol\">'mul</span> x y))\n(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">div</span> x y) (<span class=\"hljs-name\">apply-generic</span> <span class=\"hljs-symbol\">'div</span> x y))\n\n(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">install-scheme-number-package</span>)\n  (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">tag</span> x)\n    (<span class=\"hljs-name\">attach-tag</span> <span class=\"hljs-symbol\">'scheme-number</span> x))    \n  (<span class=\"hljs-name\">put</span> <span class=\"hljs-symbol\">'add</span> '(scheme-number scheme-number)\n       (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">lambda</span></span> (x y) (<span class=\"hljs-name\">tag</span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">+</span></span> x y))))\n  (<span class=\"hljs-name\">put</span> <span class=\"hljs-symbol\">'sub</span> '(scheme-number scheme-number)\n       (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">lambda</span></span> (x y) (<span class=\"hljs-name\">tag</span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">-</span></span> x y))))\n  (<span class=\"hljs-name\">put</span> <span class=\"hljs-symbol\">'mul</span> '(scheme-number scheme-number)\n       (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">lambda</span></span> (x y) (<span class=\"hljs-name\">tag</span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">*</span></span> x y))))\n  (<span class=\"hljs-name\">put</span> <span class=\"hljs-symbol\">'div</span> '(scheme-number scheme-number)\n       (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">lambda</span></span> (x y) (<span class=\"hljs-name\">tag</span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">/</span></span> x y))))\n  (<span class=\"hljs-name\">put</span> <span class=\"hljs-symbol\">'make</span> <span class=\"hljs-symbol\">'scheme-number</span>\n       (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">lambda</span></span> (x) (<span class=\"hljs-name\">tag</span> x)))\n  <span class=\"hljs-symbol\">'done</span>)\n(<span class=\"hljs-name\">install-scheme-number-package</span>)</code></pre>\n<h2>Exercise 2.79</h2>\n<pre><code class=\"hljs language-scheme\">(<span class=\"hljs-name\">put</span> <span class=\"hljs-symbol\">'equ?</span> '(scheme-number scheme-number) =)\n\n(<span class=\"hljs-name\">put</span> <span class=\"hljs-symbol\">'equ?</span> '(complex complex)\n     (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">lambda</span></span> (x y) (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">and</span></span>\n        (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">=</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">real-part</span></span> x) (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">real-part</span></span> y))\n        (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">=</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">imag-part</span></span> x) (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">imag-part</span></span> y))\n    ))\n)\n(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\">equ?</span> x y) (<span class=\"hljs-name\">apply-generic</span> <span class=\"hljs-symbol\">'equ?</span> x y))</code></pre>\n<h2>Exercise 2.80</h2>\n<pre><code class=\"hljs language-scheme\">(<span class=\"hljs-name\">put</span> <span class=\"hljs-symbol\">'zero?</span> '(scheme-number)\n     (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">lambda</span></span> (x) (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">=</span></span> x <span class=\"hljs-number\">0</span>))\n)\n(<span class=\"hljs-name\">put</span> <span class=\"hljs-symbol\">'zero?</span> '(complex)\n     (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">lambda</span></span> (x) (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">=</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">magnitude</span></span> x) <span class=\"hljs-number\">0</span>))\n)\n(<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">define</span></span> (<span class=\"hljs-name\"><span class=\"hljs-builtin-name\">zero?</span></span> x) (<span class=\"hljs-name\">apply-generic</span> <span class=\"hljs-symbol\">'zero?</span> x))</code></pre>"}],"pages":1,"archives":[{"url":"/month/2021-10/page/1","id":"2021-10","count":1,"title":"2021-10"},{"url":"/month/2021-01/page/1","id":"2021-01","count":4,"title":"2021-01"},{"url":"/month/2020-12/page/1","id":"2020-12","count":1,"title":"2020-12"},{"url":"/month/2020-09/page/1","id":"2020-09","count":2,"title":"2020-09"},{"url":"/month/2020-08/page/1","id":"2020-08","count":2,"title":"2020-08"},{"url":"/month/2020-07/page/1","id":"2020-07","count":10,"title":"2020-07"},{"url":"/month/2020-06/page/1","id":"2020-06","count":7,"title":"2020-06"},{"url":"/month/2018-12/page/1","id":"2018-12","count":1,"title":"2018-12"}],"topics":[{"url":"/tag/MOOC/page/1","id":"MOOC","title":"MOOC","count":2},{"url":"/tag/SICP/page/1","id":"SICP","title":"SICP","count":20},{"url":"/tag/asm/page/1","id":"asm","title":"asm","count":1},{"url":"/tag/ideas/page/1","id":"ideas","title":"ideas","count":1},{"url":"/tag/notes/page/1","id":"notes","title":"notes","count":6},{"url":"/tag/on writing/page/1","id":"on writing","title":"on writing","count":3}],"month":"2020-09"},"__N_SSG":true}