<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>SICP 2.3.3 Representing sets</title>
	<meta name="description" content="">
	<meta name="generator" content="Hugo 0.48-DEV" />
	
	
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">
	<link rel="stylesheet" href="/css/style.css">
	<link rel="stylesheet" href="/style.css">
	<script type="text/javascript" src="/js/scripts.js"></script>
	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container">
		<div class="logo" role="banner">
			<a class="logo__link" href="/" title="Bunyk Taras" rel="home">
				<div class="logo__title">Bunyk Taras</div>
				
			</a>
		</div>
	</div>
	
<nav class="menu">
	<ul class="menu__list">
		<li class="menu__item"><a class="menu__link" href="/">HOME</a></li>
		<li class="menu__item"><a class="menu__link" href="/resume/">RESUME</a></li>
		<li class="menu__item"><a class="menu__link" href="https://bunyk.wordpress.com/">OLD BLOG</a></li>
	</ul>
</nav>

</header>
		<div class="wrapper flex">
			<section class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SICP 2.3.3 Representing sets</h1><div class="post__meta meta">
<svg class="icon icon-time" width="16" height="14" viewBox="0 0 16 16"><path d="m8-.0000003c-4.4 0-8 3.6-8 8 0 4.4000003 3.6 8.0000003 8 8.0000003 4.4 0 8-3.6 8-8.0000003 0-4.4-3.6-8-8-8zm0 14.4000003c-3.52 0-6.4-2.88-6.4-6.4000003 0-3.52 2.88-6.4 6.4-6.4 3.52 0 6.4 2.88 6.4 6.4 0 3.5200003-2.88 6.4000003-6.4 6.4000003zm.4-10.4000003h-1.2v4.8l4.16 2.5600003.64-1.04-3.6-2.1600003z"/></svg>
<time class="post__meta-date meta-date" datetime="2020-07-28T23:59:22">July 28, 2020</time></div>
		</header><div class="content post__content clearfix">
			<p>This was more boring in comparison to previous section, probably because it required writing less code, and just writing more explanations. Writing is thinking, so I tried to do that. Or maybe it was boring because sets are not as exciting as symbolic differentiation. At least when you have high level language.</p>

<p></p>

<h2 id="exercise-2-59">Exercise 2.59</h2>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#66d9ef">define </span>(element-of-set? x set)
  (<span style="color:#66d9ef">cond </span>((null? set) false)
        ((equal? x (car set)) true)
        (<span style="color:#66d9ef">else </span>(element-of-set? x (cdr set)))))

(<span style="color:#66d9ef">define </span>(adjoin-set x set)
  (<span style="color:#66d9ef">if </span>(element-of-set? x set)
      set
      (cons x set)))

(<span style="color:#66d9ef">define </span>(union-set set1 set2)
  (fold-left
    (<span style="color:#66d9ef">lambda </span>(union next) (adjoin-set next union))
    set1
    set2
  )
)</code></pre></div>

<h2 id="exercise-2-60">Exercise 2.60</h2>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#66d9ef">define </span>(element-of-set? x set)
  (<span style="color:#66d9ef">cond </span>((null? set) false)
        ((equal? x (car set)) true)
        (<span style="color:#66d9ef">else </span>(element-of-set? x (cdr set)))))</code></pre></div>

<p>O(n), as unique one, but here list could be way longer, so less performant.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#66d9ef">define </span>(adjoin-set x set)
  (cons x set)
)</code></pre></div>

<p>O(1), lot better than unique one ( O(n)), because we not checking uniqueness.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#66d9ef">define </span>(union-set set1 set2)
  (append set1 set2)
)</code></pre></div>

<p>Append has complexity O(n) = O(len(set1)) if I&rsquo;m not mistaken. O(n), better than O(n<sup>2</sup>).</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#66d9ef">define </span>(intersection-set set1 set2)
  (<span style="color:#66d9ef">cond </span>((<span style="color:#66d9ef">or </span>(null? set1) (null? set2)) <span style="color:#f92672">&#39;</span>())
        ((element-of-set? (car set1) set2)        
         (cons (car set1)
               (intersection-set (cdr set1) set2)))
        (<span style="color:#66d9ef">else </span>(intersection-set (cdr set1) set2))))</code></pre></div>

<p>Intersection has same implementation and as a result same asymptotic complexity O(n<sup>2</sup>), but we expect n to be a lot larger.</p>

<p>So, this approach would suit applications where we will do a lot of adjoins and unions, and not much checking for element or intersections.</p>

<h2 id="exercise-2-61">Exercise 2.61</h2>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#66d9ef">define </span>(adjoin-set x set)
  (<span style="color:#66d9ef">cond </span>((<span style="color:#66d9ef">or </span>(null? set) (&lt; x (car set))) (cons x set))
        ((= x (car set)) set)
        (<span style="color:#66d9ef">else </span>(cons (car set) (adjoin-set x (cdr set))))))

(adjoin-set <span style="color:#ae81ff">0</span> (list <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">3</span>))
(adjoin-set <span style="color:#ae81ff">1</span> (list <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">3</span>))
(adjoin-set <span style="color:#ae81ff">2</span> (list <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">3</span>))
(adjoin-set <span style="color:#ae81ff">4</span> (list <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">3</span>))</code></pre></div>

<h2 id="exercise-2-62">Exercise 2.62</h2>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#66d9ef">define </span>(union-set set1 set2)
    (cond
        ((null? set1) set2)
        ((null? set2) set1)
        ((&lt; (car set1) (car set2)) (cons (car set1) (union-set (cdr set1) set2)))
        (<span style="color:#66d9ef">else </span>(cons (car set2) (union-set set1 (cdr set2))))
    )
)
(union-set (list <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span>) (list <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">4</span>))
(union-set (list <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span>) (list <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">4</span>))</code></pre></div>

<h2 id="exercise-2-63">Exercise 2.63</h2>

<p>a. Yes, they give same results by traversing tree from left to right.</p>

<p>b. One without <code>append</code> is better. For the second one <code>copy-to-list</code> is called for right subtree first, and then process conses current tree entry to result, then <code>copy-to-list</code> is called recursively to cons left subtree to the resulting list.</p>

<p>In case with append, we compute <code>tree-&gt;list1</code> for both subtrees simultaniously, then iterate over result for left subtree inside <code>append</code>.  Append takes O(n) time, where n is length of left argument. It is processing half of nodes in each level in the tree, which is approximately O(n log(n)).</p>

<h2 id="exercise-2-64">Exercise 2.64</h2>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#66d9ef">define </span>(list-&gt;tree elements)
  (car (partial-tree elements (length elements))))

(<span style="color:#66d9ef">define </span>(partial-tree elts n)
  (<span style="color:#66d9ef">if </span>(= n <span style="color:#ae81ff">0</span>)
      (cons <span style="color:#f92672">&#39;</span>() elts)
      (<span style="color:#66d9ef">let </span>((left-size (quotient (- n <span style="color:#ae81ff">1</span>) <span style="color:#ae81ff">2</span>)))
        (<span style="color:#66d9ef">let </span>((left-result (partial-tree elts left-size)))
          (<span style="color:#66d9ef">let </span>((left-tree (car left-result))
                (non-left-elts (cdr left-result))
                (right-size (- n (+ left-size <span style="color:#ae81ff">1</span>))))
            (<span style="color:#66d9ef">let </span>((this-entry (car non-left-elts))
                  (right-result (partial-tree (cdr non-left-elts)
                                              right-size)))
              (<span style="color:#66d9ef">let </span>((right-tree (car right-result))
                    (remaining-elts (cdr right-result)))
                (cons (make-tree this-entry left-tree right-tree)
                      remaining-elts))))))))</code></pre></div>

<p><code>partial-tree</code> takes as arguments <code>elts</code> - list of elements, and integer <code>n</code> and returns pair whose <code>car</code> is balanced tree containing the first <code>n</code> elements of the list and <code>cdr</code> is the list of elements not included in the tree.</p>

<p>If we need to construct tree with 0 elements, we just return empty tree and list provided to us. Otherwise, we will have tree with one element in root, and subtrees. Size of subtrees will be (n-1) / 2 (remaining amount of elements appriximately equally split for each subtree). First we build left subtree and obtain remaining elements. First of the remaining elements goes into root of our tree, the rest - to building right subtree. After we have both subtrees attached to tree with root element, we return it, and what was left in list of elements from building right subtree.</p>

<p>So, when we have list <code>(1 3 5 7 9 11)</code>, we will have following tree:</p>

<pre><code>(5
    (1
        ()
        (3 () ())
    )
    (9
        (7 () ())
        (11 () ())
    )
)
</code></pre>

<p>b. What is the order of growth in the number of steps required by list-&gt;tree to convert a list of n elements?</p>

<p>partial-tree is called once for n = 0. For n &gt; 0, it is called X(n), where X(n) = 2 + X( (n-1) / 2) + X(n - 1 - (n-1)/2 = (n-1)/2) =&gt; X(n) = 2 + X((n-1)/2). If X is identity function - equation is true, so X(n) = n. Order of growth is linear.</p>

<h2 id="exercise-2-65">Exercise 2.65</h2>

<p>Finally coding and not writing essays. I&rsquo;m bad at essays (probably need another textbook on this topic, but how to test myself?)</p>

<p>I imagine we convert both trees to ordered lists, then use operations on ordered lists described in previous section, then convert back to trees. All of this operations take O(n).</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#66d9ef">define </span>(union-set s1 s2)
  (list-&gt;tree (list-union-set (tree-&gt;list2 s1) (tree-&gt;list2)))
)</code></pre></div>

<p>Same for intersection, just call different function. I&rsquo;m even not going to test this code, as it will be more effort than writing it.</p>

<h2 id="exercise-2-66">Exercise 2.66</h2>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#66d9ef">define </span>(lookup given-key set-of-records)
  (<span style="color:#66d9ef">cond </span>((null? set-of-records) false)
        ((= given-key (key (entry set-of-records)))
         (entry set-of-records))
        ((&lt; given-key (key (entry set-of-records)))
         (lookup (left-branch set-of-records)))
        (else
         (lookup (right-branch set-of-records)))))</code></pre></div>
		</div>
		
<div class="post__tags tags clearfix">
	<svg class="icon icon-tag" width="16" height="16" viewBox="0 0 16 16"><path d="M16 9.5c0 .373-.24.74-.5 1l-5 5c-.275.26-.634.5-1 .5-.373 0-.74-.24-1-.5L1 8a2.853 2.853 0 0 1-.7-1C.113 6.55 0 5.973 0 5.6V1.4C0 1.034.134.669.401.401.67.134 1.034 0 1.4 0h4.2c.373 0 .95.113 1.4.3.45.187.732.432 1 .7l7.5 7.502c.26.274.5.632.5.998zM3.5 5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"/></svg>
	<ul class="tags__list">
		<li class="tags__item"><a class="tags__link btn" href="/tags/sicp/" rel="tag">SICP</a></li>
	</ul>
</div>
	</article>
</main>



<section class="comments">
	<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "bunykshumblehomepage" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>


			</section>
			
		</div>
		<footer class="footer">
	<div class="container">
		<div class="footer__copyright">&copy; 2020 Bunyk Taras. <span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span></div>
	</div>
</footer>
	</div>
<script>
	var navigation = responsiveNav(".menu", {
		navClass: "menu--collapse",
		label: "Menu",
	});
</script></body>
</html>
