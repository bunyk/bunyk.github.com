<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>SICP 1.3.4 Procedures as returned values</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/688040b3fc223486cedc.css" as="style"/><link rel="stylesheet" href="/_next/static/css/688040b3fc223486cedc.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-ab63730ce14ffb2d4de2.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework-77b689d02b4bf42ce2e0.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons-131aad2d92e69c360009.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-4f9408d32df08544de44.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-d383b5fdcc7af26c9ab8.js" as="script"/><link rel="preload" href="/_next/static/chunks/762-bec077d9715dbffe23e5.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/posts/%5Bid%5D-4d391b18df3a2ccf9664.js" as="script"/></head><body><div id="__next"><div class="MuiContainer-root MuiContainer-maxWidthMd"><div class="MuiToolbar-root MuiToolbar-regular jss1 MuiToolbar-gutters"><h1 class="MuiTypography-root jss2 MuiTypography-h5 MuiTypography-noWrap" aligh="center">Taras Bunyk</h1></div><nav class="MuiToolbar-root MuiToolbar-dense jss3 MuiToolbar-gutters"><a href="/">Home</a><a href="/resume">Resume</a><a href="https://bunyk.wordpress.com/">Old blog (in Ukrainian)</a></nav><div class="MuiGrid-root MuiGrid-container MuiGrid-spacing-xs-5"><div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-12 MuiGrid-grid-md-9"><div class="MuiPaper-root MuiCard-root MuiPaper-elevation1 MuiPaper-rounded"><div class="MuiCardHeader-root"><div class="MuiCardHeader-content"><span class="MuiTypography-root MuiCardHeader-title MuiTypography-h5 MuiTypography-displayBlock">SICP 1.3.4 Procedures as returned values</span><span class="MuiTypography-root MuiCardHeader-subheader MuiTypography-body1 MuiTypography-colorTextSecondary MuiTypography-displayBlock">Published: 2020-07-02 Tags: SICP</span></div></div><div class="MuiCardContent-root"><p>Today I have learned that John Carmack was also challenged by SICP:</p>
<blockquote>
<p>100 pages into Structure and Interpretation of Computer Programs. I'm proud of myself for not skipping the Church Numerals exercise. <a href="https://twitter.com/ID_AA_Carmack/status/350028210551013376">Twitter</a></p>
</blockquote>
<p>I still need to get so far.</p>
<h2>Exercise 1.40</h2>
<pre><code class="hljs language-scheme">(<span class="hljs-name"><span class="hljs-builtin-name">define</span></span> (<span class="hljs-name">cubic</span> a b c) 
  (<span class="hljs-name"><span class="hljs-builtin-name">lambda</span></span> (x) (<span class="hljs-name"><span class="hljs-builtin-name">+</span></span>
    (<span class="hljs-name"><span class="hljs-builtin-name">*</span></span> x x x)
    (<span class="hljs-name"><span class="hljs-builtin-name">*</span></span> a x x)
    (<span class="hljs-name"><span class="hljs-builtin-name">*</span></span> b x)
    c
  ))
)</code></pre>
<h2>Exercise 1.41</h2>
<pre><code class="hljs language-scheme">(<span class="hljs-name"><span class="hljs-builtin-name">define</span></span> (<span class="hljs-name">inc</span> x) (<span class="hljs-name"><span class="hljs-builtin-name">+</span></span> x <span class="hljs-number">1</span>))

(<span class="hljs-name"><span class="hljs-builtin-name">define</span></span> (<span class="hljs-name">double</span> f)
  (<span class="hljs-name"><span class="hljs-builtin-name">lambda</span></span> (x) (<span class="hljs-name">f</span> (<span class="hljs-name">f</span> x)))
)</code></pre>
<h2>Exercise 1.42</h2>
<pre><code class="hljs language-scheme">(<span class="hljs-name"><span class="hljs-builtin-name">define</span></span> (<span class="hljs-name">sqr</span> x) (<span class="hljs-name"><span class="hljs-builtin-name">*</span></span> x x))

(<span class="hljs-name"><span class="hljs-builtin-name">define</span></span> (<span class="hljs-name">compose</span> f g) 
  (<span class="hljs-name"><span class="hljs-builtin-name">lambda</span></span> (x) (<span class="hljs-name">f</span> (<span class="hljs-name">g</span> x)))
)

((<span class="hljs-name">compose</span> sqr inc) <span class="hljs-number">6</span>)</code></pre>
<h2>Exercise 1.43</h2>
<pre><code class="hljs language-scheme">(<span class="hljs-name"><span class="hljs-builtin-name">define</span></span> (<span class="hljs-name">repeated</span> f n) 
  (<span class="hljs-name"><span class="hljs-builtin-name">if</span></span> (<span class="hljs-name"><span class="hljs-builtin-name">=</span></span> n <span class="hljs-number">1</span>)
    f
    (<span class="hljs-name"><span class="hljs-builtin-name">if</span></span> (<span class="hljs-name"><span class="hljs-builtin-name">even?</span></span> n)
      (<span class="hljs-name">repeated</span> (<span class="hljs-name">double</span> f) (<span class="hljs-name"><span class="hljs-builtin-name">/</span></span> n <span class="hljs-number">2</span>))
      (<span class="hljs-name">compose</span> f (<span class="hljs-name">repeated</span> f (<span class="hljs-name"><span class="hljs-builtin-name">-</span></span> n <span class="hljs-number">1</span>)))
    )
  )
)</code></pre>
<h2>Exercise 1.44</h2>
<pre><code class="hljs language-scheme">(<span class="hljs-name"><span class="hljs-builtin-name">define</span></span> dx <span class="hljs-number">0.000001</span>)
(<span class="hljs-name"><span class="hljs-builtin-name">define</span></span> (<span class="hljs-name">smooth</span> f)
  (<span class="hljs-name"><span class="hljs-builtin-name">lambda</span></span> (x) (<span class="hljs-name"><span class="hljs-builtin-name">/</span></span> (<span class="hljs-name"><span class="hljs-builtin-name">+</span></span>
    (<span class="hljs-name">f</span> x)
    (<span class="hljs-name">f</span> (<span class="hljs-name"><span class="hljs-builtin-name">+</span></span> x dx))
    (<span class="hljs-name">f</span> (<span class="hljs-name"><span class="hljs-builtin-name">-</span></span> x dx))
  ) <span class="hljs-number">3.0</span>))
)

(<span class="hljs-name">repeated</span> smooth <span class="hljs-number">10</span>)</code></pre>
<h1>Exercise 1.45</h1>
<pre><code class="hljs language-scheme">(<span class="hljs-name"><span class="hljs-builtin-name">define</span></span> tolerance <span class="hljs-number">0.00001</span>)
(<span class="hljs-name"><span class="hljs-builtin-name">define</span></span> (<span class="hljs-name">fixed-point</span> f first-guess)
  (<span class="hljs-name"><span class="hljs-builtin-name">define</span></span> (<span class="hljs-name">close-enough?</span> v1 v2)
    (<span class="hljs-name"><span class="hljs-builtin-name">&#x3C;</span></span> (<span class="hljs-name"><span class="hljs-builtin-name">abs</span></span> (<span class="hljs-name"><span class="hljs-builtin-name">-</span></span> v1 v2)) tolerance))
  (<span class="hljs-name"><span class="hljs-builtin-name">define</span></span> (<span class="hljs-name">try</span> guess limit)
    (<span class="hljs-name"><span class="hljs-builtin-name">display</span></span> guess) (<span class="hljs-name"><span class="hljs-builtin-name">newline</span></span>)<span class="hljs-comment">; to debug trace</span>
    (<span class="hljs-name"><span class="hljs-builtin-name">let</span></span> ((<span class="hljs-name">next</span> (<span class="hljs-name">f</span> guess)))
      (<span class="hljs-name"><span class="hljs-builtin-name">if</span></span> (<span class="hljs-name"><span class="hljs-builtin-name">=</span></span> limit <span class="hljs-number">0</span>)
        (<span class="hljs-name">error</span> <span class="hljs-string">"Reached iteration limit"</span>)
        (<span class="hljs-name"><span class="hljs-builtin-name">if</span></span> (<span class="hljs-name">close-enough?</span> guess next)
            next
            (<span class="hljs-name">try</span> next (<span class="hljs-name"><span class="hljs-builtin-name">-</span></span> limit <span class="hljs-number">1</span>)))
      )))
  (<span class="hljs-name">try</span> first-guess <span class="hljs-number">1000</span>)
)

(<span class="hljs-name"><span class="hljs-builtin-name">define</span></span> (<span class="hljs-name">average-damp</span> f) 
  (<span class="hljs-name"><span class="hljs-builtin-name">lambda</span></span> (y) (<span class="hljs-name"><span class="hljs-builtin-name">/</span></span> (<span class="hljs-name"><span class="hljs-builtin-name">+</span></span> (<span class="hljs-name">f</span> y) y) <span class="hljs-number">2</span>))
)

(<span class="hljs-name"><span class="hljs-builtin-name">define</span></span> (<span class="hljs-name">npow</span> x n)
  (<span class="hljs-name"><span class="hljs-builtin-name">if</span></span> (<span class="hljs-name"><span class="hljs-builtin-name">=</span></span> n <span class="hljs-number">1</span>) x (<span class="hljs-name"><span class="hljs-builtin-name">*</span></span> x (<span class="hljs-name">npow</span> x (<span class="hljs-name"><span class="hljs-builtin-name">-</span></span> n <span class="hljs-number">1</span>)) ))
)

(<span class="hljs-name"><span class="hljs-builtin-name">define</span></span> (<span class="hljs-name">n-root</span> x n) 
  (<span class="hljs-name">fixed-point</span>
    ((<span class="hljs-name">repeated</span> average-damp (<span class="hljs-name"><span class="hljs-builtin-name">/</span></span> n <span class="hljs-number">2</span>)) (<span class="hljs-name"><span class="hljs-builtin-name">lambda</span></span> (y) (<span class="hljs-name"><span class="hljs-builtin-name">/</span></span> x (<span class="hljs-name">npow</span> y (<span class="hljs-name"><span class="hljs-builtin-name">-</span></span> n <span class="hljs-number">1</span>)))))
    <span class="hljs-number">1</span>
  )
)</code></pre>
<p>I saw on the internet solutions better than n / 2, but I would like to move on.</p>
<h1>Exercise 1.46</h1>
<pre><code class="hljs language-scheme">(<span class="hljs-name"><span class="hljs-builtin-name">define</span></span> (<span class="hljs-name">iterative-improve</span> good-enough next)
  (<span class="hljs-name"><span class="hljs-builtin-name">define</span></span> (<span class="hljs-name">iter</span> guess) 
    (<span class="hljs-name"><span class="hljs-builtin-name">if</span></span> (<span class="hljs-name">good-enough</span> guess)
      guess
      (<span class="hljs-name">iter</span> (<span class="hljs-name">next</span> guess))
    )
  )
  iter
)

(<span class="hljs-name"><span class="hljs-builtin-name">define</span></span> (<span class="hljs-name">~=</span> a b) 
  (<span class="hljs-name"><span class="hljs-builtin-name">&#x3C;</span></span> (<span class="hljs-name"><span class="hljs-builtin-name">abs</span></span> (<span class="hljs-name"><span class="hljs-builtin-name">-</span></span> a b)) <span class="hljs-number">0.00001</span>)
)

(<span class="hljs-name"><span class="hljs-builtin-name">define</span></span> (<span class="hljs-name"><span class="hljs-builtin-name">sqrt</span></span> x) 
  ((<span class="hljs-name">iterative-improve</span>
    (<span class="hljs-name"><span class="hljs-builtin-name">lambda</span></span> (y) (<span class="hljs-name">~=</span> (<span class="hljs-name"><span class="hljs-builtin-name">*</span></span> y y) x))
    (<span class="hljs-name"><span class="hljs-builtin-name">lambda</span></span> (y) (<span class="hljs-name"><span class="hljs-builtin-name">/</span></span> (<span class="hljs-name"><span class="hljs-builtin-name">+</span></span> y (<span class="hljs-name"><span class="hljs-builtin-name">/</span></span> x y)) <span class="hljs-number">2</span>))
  ) <span class="hljs-number">1.0</span>)
)

(<span class="hljs-name"><span class="hljs-builtin-name">define</span></span> (<span class="hljs-name">fixed-point</span> f first-guess)
  ((<span class="hljs-name">iterative-improve</span>
     (<span class="hljs-name"><span class="hljs-builtin-name">lambda</span></span> (y) (<span class="hljs-name">~=</span> (<span class="hljs-name">f</span> y) y))<span class="hljs-comment">; not very optimal because we computing f twice </span>
     f
  ) first-guess)
)</code></pre>
<p>And I could move to the chapter about data structures.</p></div></div></div><div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-12 MuiGrid-grid-md-3"><h6 class="MuiTypography-root jss5 MuiTypography-h6 MuiTypography-gutterBottom">Archives</h6><ul><li><a href="/month/2018-12/page/1">2018-12</a> <span title="posts count">(<!-- -->1<!-- -->)</span></li><li><a href="/month/2020-06/page/1">2020-06</a> <span title="posts count">(<!-- -->7<!-- -->)</span></li><li><a href="/month/2020-07/page/1">2020-07</a> <span title="posts count">(<!-- -->10<!-- -->)</span></li><li><a href="/month/2020-08/page/1">2020-08</a> <span title="posts count">(<!-- -->2<!-- -->)</span></li><li><a href="/month/2020-09/page/1">2020-09</a> <span title="posts count">(<!-- -->2<!-- -->)</span></li><li><a href="/month/2020-12/page/1">2020-12</a> <span title="posts count">(<!-- -->1<!-- -->)</span></li><li><a href="/month/2021-01/page/1">2021-01</a> <span title="posts count">(<!-- -->4<!-- -->)</span></li></ul><h6 class="MuiTypography-root jss5 MuiTypography-h6 MuiTypography-gutterBottom">Topics</h6><ul><li><a href="/tag/MOOC/page/1">MOOC</a> <span title="posts count">(<!-- -->2<!-- -->)</span></li><li><a href="/tag/SICP/page/1">SICP</a> <span title="posts count">(<!-- -->20<!-- -->)</span></li><li><a href="/tag/ideas/page/1">ideas</a> <span title="posts count">(<!-- -->1<!-- -->)</span></li><li><a href="/tag/notes/page/1">notes</a> <span title="posts count">(<!-- -->5<!-- -->)</span></li><li><a href="/tag/on%20writing/page/1">on writing</a> <span title="posts count">(<!-- -->3<!-- -->)</span></li></ul></div><p class="MuiTypography-root MuiTypography-body2 MuiTypography-colorTextSecondary MuiTypography-alignCenter">© <!-- -->2021<!-- --> Bunyk Taras. Built with Material UI &amp; Next.js</p></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"id":"sicp1.3.4","title":"SICP 1.3.4 Procedures as returned values","date":"2020-07-02","tags":["SICP"],"excerpt":"\u003cp\u003eToday I have learned that John Carmack was also challenged by SICP:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e100 pages into Structure and Interpretation of Computer Programs. I'm proud of myself for not skipping the Church Numerals exercise. \u003ca href=\"https://twitter.com/ID_AA_Carmack/status/350028210551013376\"\u003eTwitter\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eI still need to get so far.\u003c/p\u003e","content":"\u003cp\u003eToday I have learned that John Carmack was also challenged by SICP:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e100 pages into Structure and Interpretation of Computer Programs. I'm proud of myself for not skipping the Church Numerals exercise. \u003ca href=\"https://twitter.com/ID_AA_Carmack/status/350028210551013376\"\u003eTwitter\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eI still need to get so far.\u003c/p\u003e\n\u003ch2\u003eExercise 1.40\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ecubic\u003c/span\u003e a b c) \n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003elambda\u003c/span\u003e\u003c/span\u003e (x) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e x x x)\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e a x x)\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e b x)\n    c\n  ))\n)\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eExercise 1.41\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003einc\u003c/span\u003e x) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e x \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e))\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003edouble\u003c/span\u003e f)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003elambda\u003c/span\u003e\u003c/span\u003e (x) (\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e x)))\n)\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eExercise 1.42\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003esqr\u003c/span\u003e x) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e x x))\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ecompose\u003c/span\u003e f g) \n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003elambda\u003c/span\u003e\u003c/span\u003e (x) (\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eg\u003c/span\u003e x)))\n)\n\n((\u003cspan class=\"hljs-name\"\u003ecompose\u003c/span\u003e sqr inc) \u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e)\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eExercise 1.43\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003erepeated\u003c/span\u003e f n) \n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n    f\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eeven?\u003c/span\u003e\u003c/span\u003e n)\n      (\u003cspan class=\"hljs-name\"\u003erepeated\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003edouble\u003c/span\u003e f) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e/\u003c/span\u003e\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e))\n      (\u003cspan class=\"hljs-name\"\u003ecompose\u003c/span\u003e f (\u003cspan class=\"hljs-name\"\u003erepeated\u003c/span\u003e f (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)))\n    )\n  )\n)\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eExercise 1.44\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e dx \u003cspan class=\"hljs-number\"\u003e0.000001\u003c/span\u003e)\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003esmooth\u003c/span\u003e f)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003elambda\u003c/span\u003e\u003c/span\u003e (x) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e/\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e\n    (\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e x)\n    (\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e x dx))\n    (\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e x dx))\n  ) \u003cspan class=\"hljs-number\"\u003e3.0\u003c/span\u003e))\n)\n\n(\u003cspan class=\"hljs-name\"\u003erepeated\u003c/span\u003e smooth \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e)\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eExercise 1.45\u003c/h1\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e tolerance \u003cspan class=\"hljs-number\"\u003e0.00001\u003c/span\u003e)\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003efixed-point\u003c/span\u003e f first-guess)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eclose-enough?\u003c/span\u003e v1 v2)\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e\u0026#x3C;\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eabs\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e v1 v2)) tolerance))\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003etry\u003c/span\u003e guess limit)\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edisplay\u003c/span\u003e\u003c/span\u003e guess) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003enewline\u003c/span\u003e\u003c/span\u003e)\u003cspan class=\"hljs-comment\"\u003e; to debug trace\u003c/span\u003e\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003elet\u003c/span\u003e\u003c/span\u003e ((\u003cspan class=\"hljs-name\"\u003enext\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e guess)))\n      (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e limit \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n        (\u003cspan class=\"hljs-name\"\u003eerror\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"Reached iteration limit\"\u003c/span\u003e)\n        (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eclose-enough?\u003c/span\u003e guess next)\n            next\n            (\u003cspan class=\"hljs-name\"\u003etry\u003c/span\u003e next (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e limit \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)))\n      )))\n  (\u003cspan class=\"hljs-name\"\u003etry\u003c/span\u003e first-guess \u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e)\n)\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eaverage-damp\u003c/span\u003e f) \n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003elambda\u003c/span\u003e\u003c/span\u003e (y) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e/\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e y) y) \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e))\n)\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003enpow\u003c/span\u003e x n)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e=\u003c/span\u003e\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) x (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e x (\u003cspan class=\"hljs-name\"\u003enpow\u003c/span\u003e x (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)) ))\n)\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003en-root\u003c/span\u003e x n) \n  (\u003cspan class=\"hljs-name\"\u003efixed-point\u003c/span\u003e\n    ((\u003cspan class=\"hljs-name\"\u003erepeated\u003c/span\u003e average-damp (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e/\u003c/span\u003e\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003elambda\u003c/span\u003e\u003c/span\u003e (y) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e/\u003c/span\u003e\u003c/span\u003e x (\u003cspan class=\"hljs-name\"\u003enpow\u003c/span\u003e y (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)))))\n    \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n  )\n)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eI saw on the internet solutions better than n / 2, but I would like to move on.\u003c/p\u003e\n\u003ch1\u003eExercise 1.46\u003c/h1\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eiterative-improve\u003c/span\u003e good-enough next)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e guess) \n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003egood-enough\u003c/span\u003e guess)\n      guess\n      (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003enext\u003c/span\u003e guess))\n    )\n  )\n  iter\n)\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e~=\u003c/span\u003e a b) \n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e\u0026#x3C;\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003eabs\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e-\u003c/span\u003e\u003c/span\u003e a b)) \u003cspan class=\"hljs-number\"\u003e0.00001\u003c/span\u003e)\n)\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003esqrt\u003c/span\u003e\u003c/span\u003e x) \n  ((\u003cspan class=\"hljs-name\"\u003eiterative-improve\u003c/span\u003e\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003elambda\u003c/span\u003e\u003c/span\u003e (y) (\u003cspan class=\"hljs-name\"\u003e~=\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e*\u003c/span\u003e\u003c/span\u003e y y) x))\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003elambda\u003c/span\u003e\u003c/span\u003e (y) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e/\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e+\u003c/span\u003e\u003c/span\u003e y (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003e/\u003c/span\u003e\u003c/span\u003e x y)) \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e))\n  ) \u003cspan class=\"hljs-number\"\u003e1.0\u003c/span\u003e)\n)\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003efixed-point\u003c/span\u003e f first-guess)\n  ((\u003cspan class=\"hljs-name\"\u003eiterative-improve\u003c/span\u003e\n     (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-builtin-name\"\u003elambda\u003c/span\u003e\u003c/span\u003e (y) (\u003cspan class=\"hljs-name\"\u003e~=\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e y) y))\u003cspan class=\"hljs-comment\"\u003e; not very optimal because we computing f twice \u003c/span\u003e\n     f\n  ) first-guess)\n)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd I could move to the chapter about data structures.\u003c/p\u003e"},"archives":[{"url":"/month/2018-12/page/1","id":"2018-12","count":1,"title":"2018-12"},{"url":"/month/2020-06/page/1","id":"2020-06","count":7,"title":"2020-06"},{"url":"/month/2020-07/page/1","id":"2020-07","count":10,"title":"2020-07"},{"url":"/month/2020-08/page/1","id":"2020-08","count":2,"title":"2020-08"},{"url":"/month/2020-09/page/1","id":"2020-09","count":2,"title":"2020-09"},{"url":"/month/2020-12/page/1","id":"2020-12","count":1,"title":"2020-12"},{"url":"/month/2021-01/page/1","id":"2021-01","count":4,"title":"2021-01"}],"topics":[{"url":"/tag/MOOC/page/1","id":"MOOC","title":"MOOC","count":2},{"url":"/tag/SICP/page/1","id":"SICP","title":"SICP","count":20},{"url":"/tag/ideas/page/1","id":"ideas","title":"ideas","count":1},{"url":"/tag/notes/page/1","id":"notes","title":"notes","count":5},{"url":"/tag/on writing/page/1","id":"on writing","title":"on writing","count":3}]},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"sicp1.3.4"},"buildId":"Zn0comZmfh30_fMqSLkCB","isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-8683bd742a84c1edd48c.js"></script><script src="/_next/static/chunks/webpack-ab63730ce14ffb2d4de2.js" async=""></script><script src="/_next/static/chunks/framework-77b689d02b4bf42ce2e0.js" async=""></script><script src="/_next/static/chunks/commons-131aad2d92e69c360009.js" async=""></script><script src="/_next/static/chunks/main-4f9408d32df08544de44.js" async=""></script><script src="/_next/static/chunks/pages/_app-d383b5fdcc7af26c9ab8.js" async=""></script><script src="/_next/static/chunks/762-bec077d9715dbffe23e5.js" async=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-4d391b18df3a2ccf9664.js" async=""></script><script src="/_next/static/Zn0comZmfh30_fMqSLkCB/_buildManifest.js" async=""></script><script src="/_next/static/Zn0comZmfh30_fMqSLkCB/_ssgManifest.js" async=""></script></body></html>