<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>SICP 2.4 Multiple representations for abstract data</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/b53cc6ef9e9e352d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b53cc6ef9e9e352d.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-9b312e20a4e32339.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-959cc2ac3c742fb4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-ec0fdebf93e8fc69.js" defer=""></script><script src="/_next/static/chunks/996-372da0b0d3708a80.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-959ba1136e063a38.js" defer=""></script><script src="/_next/static/oYFLE0UPvivtpAhPvNsyJ/_buildManifest.js" defer=""></script><script src="/_next/static/oYFLE0UPvivtpAhPvNsyJ/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><h1 id="top">Taras Bunyk</h1><nav><a href="/">Home</a><a href="http://bunyk.github.io/mandala/">Snowflake drawing</a><a href="/resume">Resume</a><a href="https://bunyk.wordpress.com/">Old blog (in Ukrainian)</a></nav><article><h1>SICP 2.4 Multiple representations for abstract data</h1><div><em>Published: 2020-08-26T17:03:55.000Z</em></div><div><p>I went on vacation and lost cadence on this project. Need to get back on track, remember how to launch interpreter, etc. :)</p>
<p>In this chapter we will need <code>get</code> and <code>put</code> functions which could be implemented by similar system functions.</p>
<p>Found this on <a href="https://stackoverflow.com/a/29465496/816449">StackOverflow</a>, of course.</p>
<pre><code class="hljs language-scheme">(<span class="hljs-name"><span class="hljs-built_in">define</span></span> put <span class="hljs-number">2</span>d-put!)
(<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">get</span> a b)
    <span class="hljs-comment">;(display "get ") (display a) (display b) (newline)</span>
    (<span class="hljs-name">2d-get</span> a b)
)</code></pre>
<p>And some setup from <a href="/posts/sicp2.3.2">previous section</a>:</p>
<pre><code class="hljs language-scheme">(<span class="hljs-name"><span class="hljs-built_in">define</span></span> variable? symbol?)
(<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">same-variable?</span> v1 v2)
  (<span class="hljs-name"><span class="hljs-built_in">and</span></span> (<span class="hljs-name">variable?</span> v1) (<span class="hljs-name">variable?</span> v2) (<span class="hljs-name"><span class="hljs-built_in">eq?</span></span> v1 v2)))
(<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">=number?</span> exp num)
  (<span class="hljs-name"><span class="hljs-built_in">and</span></span> (<span class="hljs-name"><span class="hljs-built_in">number?</span></span> exp) (<span class="hljs-name"><span class="hljs-built_in">=</span></span> exp num)))</code></pre>
<h2 id="exercise-273">Exercise 2.73</h2>
<pre><code class="hljs language-scheme">(<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">deriv</span> exp var)
   (<span class="hljs-name"><span class="hljs-built_in">cond</span></span> ((<span class="hljs-name"><span class="hljs-built_in">number?</span></span> exp) <span class="hljs-number">0</span>)
         ((<span class="hljs-name">variable?</span> exp) (<span class="hljs-name"><span class="hljs-built_in">if</span></span> (<span class="hljs-name">same-variable?</span> exp var) <span class="hljs-number">1</span> <span class="hljs-number">0</span>))
         (<span class="hljs-name"><span class="hljs-built_in">else</span></span> ((<span class="hljs-name">get</span> <span class="hljs-symbol">'deriv</span> (<span class="hljs-name">operator</span> exp)) (<span class="hljs-name">operands</span> exp)
                                            var))))
(<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">operator</span> exp) (<span class="hljs-name"><span class="hljs-built_in">car</span></span> exp))
(<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">operands</span> exp) (<span class="hljs-name"><span class="hljs-built_in">cdr</span></span> exp))</code></pre>
<p>a) So, in our new derive we do lookup in table instead of <code>cond</code> expression. We are not able to move <code>number?</code> into lookup, because <code>number?</code> is condition for a set of values, not just one value, and table works only with one value.</p>
<p>b)</p>
<pre><code class="hljs language-scheme">(<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">make-sum</span> args) 
    (<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">sum</span> items total nonnum)
        (<span class="hljs-name"><span class="hljs-built_in">cond</span></span>
            ((<span class="hljs-name"><span class="hljs-built_in">null?</span></span> items)
                (<span class="hljs-name"><span class="hljs-built_in">if</span></span> (<span class="hljs-name"><span class="hljs-built_in">null?</span></span> nonnum)
                    total
                    (<span class="hljs-name"><span class="hljs-built_in">cons</span></span> <span class="hljs-symbol">'+</span> (<span class="hljs-name"><span class="hljs-built_in">if</span></span> (<span class="hljs-name"><span class="hljs-built_in">=</span></span> total <span class="hljs-number">0</span>)
                                nonnum
                                (<span class="hljs-name"><span class="hljs-built_in">cons</span></span> total nonnum)
                    ))
                )
            )
            ((<span class="hljs-name"><span class="hljs-built_in">number?</span></span> (<span class="hljs-name"><span class="hljs-built_in">car</span></span> items))
                (<span class="hljs-name">sum</span> (<span class="hljs-name"><span class="hljs-built_in">cdr</span></span> items) (<span class="hljs-name"><span class="hljs-built_in">+</span></span> (<span class="hljs-name"><span class="hljs-built_in">car</span></span> items) total) nonnum))
            (<span class="hljs-name"><span class="hljs-built_in">else</span></span>
                (<span class="hljs-name">sum</span> (<span class="hljs-name"><span class="hljs-built_in">cdr</span></span> items) total (<span class="hljs-name"><span class="hljs-built_in">cons</span></span> (<span class="hljs-name"><span class="hljs-built_in">car</span></span> items) nonnum)))
        )
    )
    (<span class="hljs-name">sum</span> args <span class="hljs-number">0</span> '())
)

(<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">make-prod</span> m1 m2)
  (<span class="hljs-name"><span class="hljs-built_in">cond</span></span> ((<span class="hljs-name"><span class="hljs-built_in">or</span></span> (<span class="hljs-name">=number?</span> m1 <span class="hljs-number">0</span>) (<span class="hljs-name">=number?</span> m2 <span class="hljs-number">0</span>)) <span class="hljs-number">0</span>)
        ((<span class="hljs-name">=number?</span> m1 <span class="hljs-number">1</span>) m2)
        ((<span class="hljs-name">=number?</span> m2 <span class="hljs-number">1</span>) m1)
        ((<span class="hljs-name"><span class="hljs-built_in">and</span></span> (<span class="hljs-name"><span class="hljs-built_in">number?</span></span> m1) (<span class="hljs-name"><span class="hljs-built_in">number?</span></span> m2)) (<span class="hljs-name"><span class="hljs-built_in">*</span></span> m1 m2))
        (<span class="hljs-name"><span class="hljs-built_in">else</span></span> (<span class="hljs-name"><span class="hljs-built_in">list</span></span> <span class="hljs-symbol">'*</span> m1 m2))))

(<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">install-derivatives-package</span>) 
  (<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">deriv-sum</span> items var)
    (<span class="hljs-name">make-sum</span> (<span class="hljs-name"><span class="hljs-built_in">map</span></span> (<span class="hljs-name"><span class="hljs-built_in">lambda</span></span> (e) (<span class="hljs-name">deriv</span> e var)) items))
  )
  (<span class="hljs-name">put</span> <span class="hljs-symbol">'deriv</span> <span class="hljs-symbol">'+</span> deriv-sum)

  (<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">deriv-prod</span> items var)
    (<span class="hljs-name"><span class="hljs-built_in">let</span></span> ((<span class="hljs-name">tail</span>
        (<span class="hljs-name"><span class="hljs-built_in">if</span></span> (<span class="hljs-name"><span class="hljs-built_in">null?</span></span> (<span class="hljs-name">cddr</span> items))
            (<span class="hljs-name"><span class="hljs-built_in">cadr</span></span> items)
            (<span class="hljs-name"><span class="hljs-built_in">cons</span></span> <span class="hljs-symbol">'*</span> (<span class="hljs-name"><span class="hljs-built_in">cdr</span></span> items))
        )
    ))
        (<span class="hljs-name">make-sum</span> (<span class="hljs-name"><span class="hljs-built_in">list</span></span> 
           (<span class="hljs-name">make-prod</span> (<span class="hljs-name"><span class="hljs-built_in">car</span></span> items)
                      (<span class="hljs-name">deriv</span> tail var))
           (<span class="hljs-name">make-prod</span> (<span class="hljs-name">deriv</span> (<span class="hljs-name"><span class="hljs-built_in">car</span></span> items) var)
                      tail)
        ))
    )
  )
  (<span class="hljs-name">put</span> <span class="hljs-symbol">'deriv</span> <span class="hljs-symbol">'+</span> deriv-sum)
  (<span class="hljs-name">put</span> <span class="hljs-symbol">'deriv</span> <span class="hljs-symbol">'*</span> deriv-prod)
)
(<span class="hljs-name">install-derivatives-package</span>) </code></pre>
<p>I think I wrote too much code here because I wanted to support sums and products of multiple arguments.</p>
<p>c) Exponentation</p>
<pre><code class="hljs language-scheme">(<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">make-exp</span> base e)
  (<span class="hljs-name"><span class="hljs-built_in">cond</span></span> ((<span class="hljs-name">=number?</span> e <span class="hljs-number">0</span>) <span class="hljs-number">1</span>)
        ((<span class="hljs-name">=number?</span> e <span class="hljs-number">1</span>) base)
        (<span class="hljs-name"><span class="hljs-built_in">else</span></span> (<span class="hljs-name"><span class="hljs-built_in">list</span></span> <span class="hljs-symbol">'**</span> base e))))

  (<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">deriv-exp</span> items var)
    (<span class="hljs-name"><span class="hljs-built_in">let</span></span> (
        (<span class="hljs-name">base</span> (<span class="hljs-name"><span class="hljs-built_in">car</span></span> items))
        (<span class="hljs-name">e</span> (<span class="hljs-name"><span class="hljs-built_in">cadr</span></span> items))
    )
        (<span class="hljs-name">make-prod</span>
            e
            (<span class="hljs-name">make-exp</span> base (<span class="hljs-name"><span class="hljs-built_in">-</span></span> e <span class="hljs-number">1</span>))
        )
    )
  )
  (<span class="hljs-name">put</span> <span class="hljs-symbol">'deriv</span> <span class="hljs-symbol">'**</span> deriv-exp)

(<span class="hljs-name">deriv</span> '(+ (** x <span class="hljs-number">3</span>) (** x <span class="hljs-number">2</span>)) <span class="hljs-symbol">'x</span>)</code></pre>
<p>d) We could switch arguments inside <code>get</code>, or inside <code>put</code>, or switch arguments when we call put. That's all what will be needed.</p>
<h2 id="exercise-274">Exercise 2.74</h2>
<p>I skipped it because it is too abstract.</p>
<h2 id="exercise-275">Exercise 2.75</h2>
<pre><code class="hljs language-scheme">(<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">make-from-mag-ang</span> r a) 
  (<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">dispatch</span> op)
    (<span class="hljs-name"><span class="hljs-built_in">cond</span></span> ((<span class="hljs-name"><span class="hljs-built_in">eq?</span></span> op <span class="hljs-symbol">'real-part</span>) (<span class="hljs-name"><span class="hljs-built_in">*</span></span> r (<span class="hljs-name"><span class="hljs-built_in">cos</span></span> a)))
          ((<span class="hljs-name"><span class="hljs-built_in">eq?</span></span> op <span class="hljs-symbol">'imag-part</span>) (<span class="hljs-name"><span class="hljs-built_in">*</span></span> r (<span class="hljs-name"><span class="hljs-built_in">sin</span></span> a)))
          ((<span class="hljs-name"><span class="hljs-built_in">eq?</span></span> op <span class="hljs-symbol">'magnitude</span>) r)
          ((<span class="hljs-name"><span class="hljs-built_in">eq?</span></span> op <span class="hljs-symbol">'angle</span>) a)
          (<span class="hljs-name"><span class="hljs-built_in">else</span></span>
           (<span class="hljs-name">error</span> <span class="hljs-string">"Unknown op -- MAKE-FROM-REAL-IMAG"</span> op))))
  dispatch)</code></pre>
<h2 id="exercise-276">Exercise 2.76</h2>
<p>Skip this too. Because I see no way to verify that I did it correctly. Learning needs feedback.</p></div></article><div><div id="disqus_thread"></div></div><nav><a href="/">Home</a><a href="#top">Back to top</a></nav><footer>Â© <!-- -->2022<!-- --> Bunyk Taras. Built with Next.js</footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"id":"sicp2.4","title":"SICP 2.4 Multiple representations for abstract data","date":"2020-08-26T17:03:55.000Z","tags":["SICP"],"updated_at":"2022-10-10T22:49:27+02:00","content":"\u003cp\u003eI went on vacation and lost cadence on this project. Need to get back on track, remember how to launch interpreter, etc. :)\u003c/p\u003e\n\u003cp\u003eIn this chapter we will need \u003ccode\u003eget\u003c/code\u003e and \u003ccode\u003eput\u003c/code\u003e functions which could be implemented by similar system functions.\u003c/p\u003e\n\u003cp\u003eFound this on \u003ca href=\"https://stackoverflow.com/a/29465496/816449\"\u003eStackOverflow\u003c/a\u003e, of course.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e put \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003ed-put!)\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eget\u003c/span\u003e a b)\n    \u003cspan class=\"hljs-comment\"\u003e;(display \"get \") (display a) (display b) (newline)\u003c/span\u003e\n    (\u003cspan class=\"hljs-name\"\u003e2d-get\u003c/span\u003e a b)\n)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd some setup from \u003ca href=\"/posts/sicp2.3.2\"\u003eprevious section\u003c/a\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e variable? symbol?)\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003esame-variable?\u003c/span\u003e v1 v2)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eand\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003evariable?\u003c/span\u003e v1) (\u003cspan class=\"hljs-name\"\u003evariable?\u003c/span\u003e v2) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eeq?\u003c/span\u003e\u003c/span\u003e v1 v2)))\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e=number?\u003c/span\u003e exp num)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eand\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003enumber?\u003c/span\u003e\u003c/span\u003e exp) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e=\u003c/span\u003e\u003c/span\u003e exp num)))\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"exercise-273\"\u003eExercise 2.73\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ederiv\u003c/span\u003e exp var)\n   (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003econd\u003c/span\u003e\u003c/span\u003e ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003enumber?\u003c/span\u003e\u003c/span\u003e exp) \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n         ((\u003cspan class=\"hljs-name\"\u003evariable?\u003c/span\u003e exp) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003esame-variable?\u003c/span\u003e exp var) \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e))\n         (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eelse\u003c/span\u003e\u003c/span\u003e ((\u003cspan class=\"hljs-name\"\u003eget\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'deriv\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eoperator\u003c/span\u003e exp)) (\u003cspan class=\"hljs-name\"\u003eoperands\u003c/span\u003e exp)\n                                            var))))\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eoperator\u003c/span\u003e exp) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003ecar\u003c/span\u003e\u003c/span\u003e exp))\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eoperands\u003c/span\u003e exp) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003ecdr\u003c/span\u003e\u003c/span\u003e exp))\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ea) So, in our new derive we do lookup in table instead of \u003ccode\u003econd\u003c/code\u003e expression. We are not able to move \u003ccode\u003enumber?\u003c/code\u003e into lookup, because \u003ccode\u003enumber?\u003c/code\u003e is condition for a set of values, not just one value, and table works only with one value.\u003c/p\u003e\n\u003cp\u003eb)\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003emake-sum\u003c/span\u003e args) \n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003esum\u003c/span\u003e items total nonnum)\n        (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003econd\u003c/span\u003e\u003c/span\u003e\n            ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003enull?\u003c/span\u003e\u003c/span\u003e items)\n                (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003enull?\u003c/span\u003e\u003c/span\u003e nonnum)\n                    total\n                    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003econs\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'+\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e=\u003c/span\u003e\u003c/span\u003e total \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n                                nonnum\n                                (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003econs\u003c/span\u003e\u003c/span\u003e total nonnum)\n                    ))\n                )\n            )\n            ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003enumber?\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003ecar\u003c/span\u003e\u003c/span\u003e items))\n                (\u003cspan class=\"hljs-name\"\u003esum\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003ecdr\u003c/span\u003e\u003c/span\u003e items) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e+\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003ecar\u003c/span\u003e\u003c/span\u003e items) total) nonnum))\n            (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eelse\u003c/span\u003e\u003c/span\u003e\n                (\u003cspan class=\"hljs-name\"\u003esum\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003ecdr\u003c/span\u003e\u003c/span\u003e items) total (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003econs\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003ecar\u003c/span\u003e\u003c/span\u003e items) nonnum)))\n        )\n    )\n    (\u003cspan class=\"hljs-name\"\u003esum\u003c/span\u003e args \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e '())\n)\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003emake-prod\u003c/span\u003e m1 m2)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003econd\u003c/span\u003e\u003c/span\u003e ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eor\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e=number?\u003c/span\u003e m1 \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) (\u003cspan class=\"hljs-name\"\u003e=number?\u003c/span\u003e m2 \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)) \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n        ((\u003cspan class=\"hljs-name\"\u003e=number?\u003c/span\u003e m1 \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) m2)\n        ((\u003cspan class=\"hljs-name\"\u003e=number?\u003c/span\u003e m2 \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) m1)\n        ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eand\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003enumber?\u003c/span\u003e\u003c/span\u003e m1) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003enumber?\u003c/span\u003e\u003c/span\u003e m2)) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e*\u003c/span\u003e\u003c/span\u003e m1 m2))\n        (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eelse\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003elist\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'*\u003c/span\u003e m1 m2))))\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003einstall-derivatives-package\u003c/span\u003e) \n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ederiv-sum\u003c/span\u003e items var)\n    (\u003cspan class=\"hljs-name\"\u003emake-sum\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003emap\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003elambda\u003c/span\u003e\u003c/span\u003e (e) (\u003cspan class=\"hljs-name\"\u003ederiv\u003c/span\u003e e var)) items))\n  )\n  (\u003cspan class=\"hljs-name\"\u003eput\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'deriv\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'+\u003c/span\u003e deriv-sum)\n\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ederiv-prod\u003c/span\u003e items var)\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003elet\u003c/span\u003e\u003c/span\u003e ((\u003cspan class=\"hljs-name\"\u003etail\u003c/span\u003e\n        (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003enull?\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ecddr\u003c/span\u003e items))\n            (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003ecadr\u003c/span\u003e\u003c/span\u003e items)\n            (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003econs\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'*\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003ecdr\u003c/span\u003e\u003c/span\u003e items))\n        )\n    ))\n        (\u003cspan class=\"hljs-name\"\u003emake-sum\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003elist\u003c/span\u003e\u003c/span\u003e \n           (\u003cspan class=\"hljs-name\"\u003emake-prod\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003ecar\u003c/span\u003e\u003c/span\u003e items)\n                      (\u003cspan class=\"hljs-name\"\u003ederiv\u003c/span\u003e tail var))\n           (\u003cspan class=\"hljs-name\"\u003emake-prod\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ederiv\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003ecar\u003c/span\u003e\u003c/span\u003e items) var)\n                      tail)\n        ))\n    )\n  )\n  (\u003cspan class=\"hljs-name\"\u003eput\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'deriv\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'+\u003c/span\u003e deriv-sum)\n  (\u003cspan class=\"hljs-name\"\u003eput\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'deriv\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'*\u003c/span\u003e deriv-prod)\n)\n(\u003cspan class=\"hljs-name\"\u003einstall-derivatives-package\u003c/span\u003e) \u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eI think I wrote too much code here because I wanted to support sums and products of multiple arguments.\u003c/p\u003e\n\u003cp\u003ec) Exponentation\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003emake-exp\u003c/span\u003e base e)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003econd\u003c/span\u003e\u003c/span\u003e ((\u003cspan class=\"hljs-name\"\u003e=number?\u003c/span\u003e e \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n        ((\u003cspan class=\"hljs-name\"\u003e=number?\u003c/span\u003e e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) base)\n        (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eelse\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003elist\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'**\u003c/span\u003e base e))))\n\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ederiv-exp\u003c/span\u003e items var)\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003elet\u003c/span\u003e\u003c/span\u003e (\n        (\u003cspan class=\"hljs-name\"\u003ebase\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003ecar\u003c/span\u003e\u003c/span\u003e items))\n        (\u003cspan class=\"hljs-name\"\u003ee\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003ecadr\u003c/span\u003e\u003c/span\u003e items))\n    )\n        (\u003cspan class=\"hljs-name\"\u003emake-prod\u003c/span\u003e\n            e\n            (\u003cspan class=\"hljs-name\"\u003emake-exp\u003c/span\u003e base (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e-\u003c/span\u003e\u003c/span\u003e e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e))\n        )\n    )\n  )\n  (\u003cspan class=\"hljs-name\"\u003eput\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'deriv\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'**\u003c/span\u003e deriv-exp)\n\n(\u003cspan class=\"hljs-name\"\u003ederiv\u003c/span\u003e '(+ (** x \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e) (** x \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)) \u003cspan class=\"hljs-symbol\"\u003e'x\u003c/span\u003e)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ed) We could switch arguments inside \u003ccode\u003eget\u003c/code\u003e, or inside \u003ccode\u003eput\u003c/code\u003e, or switch arguments when we call put. That's all what will be needed.\u003c/p\u003e\n\u003ch2 id=\"exercise-274\"\u003eExercise 2.74\u003c/h2\u003e\n\u003cp\u003eI skipped it because it is too abstract.\u003c/p\u003e\n\u003ch2 id=\"exercise-275\"\u003eExercise 2.75\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003emake-from-mag-ang\u003c/span\u003e r a) \n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003edispatch\u003c/span\u003e op)\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003econd\u003c/span\u003e\u003c/span\u003e ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eeq?\u003c/span\u003e\u003c/span\u003e op \u003cspan class=\"hljs-symbol\"\u003e'real-part\u003c/span\u003e) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e*\u003c/span\u003e\u003c/span\u003e r (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003ecos\u003c/span\u003e\u003c/span\u003e a)))\n          ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eeq?\u003c/span\u003e\u003c/span\u003e op \u003cspan class=\"hljs-symbol\"\u003e'imag-part\u003c/span\u003e) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e*\u003c/span\u003e\u003c/span\u003e r (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003esin\u003c/span\u003e\u003c/span\u003e a)))\n          ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eeq?\u003c/span\u003e\u003c/span\u003e op \u003cspan class=\"hljs-symbol\"\u003e'magnitude\u003c/span\u003e) r)\n          ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eeq?\u003c/span\u003e\u003c/span\u003e op \u003cspan class=\"hljs-symbol\"\u003e'angle\u003c/span\u003e) a)\n          (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eelse\u003c/span\u003e\u003c/span\u003e\n           (\u003cspan class=\"hljs-name\"\u003eerror\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"Unknown op -- MAKE-FROM-REAL-IMAG\"\u003c/span\u003e op))))\n  dispatch)\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"exercise-276\"\u003eExercise 2.76\u003c/h2\u003e\n\u003cp\u003eSkip this too. Because I see no way to verify that I did it correctly. Learning needs feedback.\u003c/p\u003e"},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"sicp2.4"},"buildId":"oYFLE0UPvivtpAhPvNsyJ","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>