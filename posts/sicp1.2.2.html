<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>SICP 1.2.2 Tree recursion</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/b53cc6ef9e9e352d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b53cc6ef9e9e352d.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-959cc2ac3c742fb4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-b654c501598b6a83.js" defer=""></script><script src="/_next/static/chunks/996-372da0b0d3708a80.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-e5a68c245444f298.js" defer=""></script><script src="/_next/static/ljkl2AcbKtPNE2wH_VFb3/_buildManifest.js" defer=""></script><script src="/_next/static/ljkl2AcbKtPNE2wH_VFb3/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><h1 id="top">Taras Bunyk</h1><nav><a href="/">Home</a><a href="http://bunyk.github.io/mandala/">Snowflake drawing</a><a href="/resume">Resume</a><a href="/pages/sudoku.html">Sudoku fall</a><a href="https://bunyk.wordpress.com/">Old blog (in Ukrainian)</a></nav><article><h1>SICP 1.2.2 Tree recursion</h1><div><em>Published: 2020-06-14T19:06:09.000Z</em></div><div><p>I like how they did not shown yet how to work with any data structures, but wrote function that behaves like a immutable array:</p>
<pre><code class="hljs language-scheme"> (<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">first-denomination</span> kinds-of-coins)
  (<span class="hljs-name"><span class="hljs-built_in">cond</span></span> ((<span class="hljs-name"><span class="hljs-built_in">=</span></span> kinds-of-coins <span class="hljs-number">1</span>) <span class="hljs-number">1</span>)
        ((<span class="hljs-name"><span class="hljs-built_in">=</span></span> kinds-of-coins <span class="hljs-number">2</span>) <span class="hljs-number">5</span>)
        ((<span class="hljs-name"><span class="hljs-built_in">=</span></span> kinds-of-coins <span class="hljs-number">3</span>) <span class="hljs-number">10</span>)
        ((<span class="hljs-name"><span class="hljs-built_in">=</span></span> kinds-of-coins <span class="hljs-number">4</span>) <span class="hljs-number">25</span>)
        ((<span class="hljs-name"><span class="hljs-built_in">=</span></span> kinds-of-coins <span class="hljs-number">5</span>) <span class="hljs-number">50</span>)))</code></pre>
<h2 id="exercise-111">Exercise 1.11</h2>
<p>Functions should produce following sequence: 1, 2, 4, 11, 25, 59, 142
(<a href="https://oeis.org/A100550">Sequence A100550</a> in the On-Line Encyclopedia of Integer Sequences)</p>
<pre><code class="hljs language-scheme">(<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">next-f</span> c d e)
    (<span class="hljs-name"><span class="hljs-built_in">+</span></span> e (<span class="hljs-name"><span class="hljs-built_in">*</span></span> <span class="hljs-number">2</span> d) (<span class="hljs-name"><span class="hljs-built_in">*</span></span> <span class="hljs-number">3</span> c)))

(<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">f</span> n) 
    (<span class="hljs-name"><span class="hljs-built_in">if</span></span> (<span class="hljs-name"><span class="hljs-built_in">&#x3C;</span></span> n <span class="hljs-number">3</span>) 
        n
        (<span class="hljs-name">next-f</span> (<span class="hljs-name">f</span> (<span class="hljs-name"><span class="hljs-built_in">-</span></span> n <span class="hljs-number">3</span>))
           (<span class="hljs-name">f</span> (<span class="hljs-name"><span class="hljs-built_in">-</span></span> n <span class="hljs-number">2</span>))
           (<span class="hljs-name">f</span> (<span class="hljs-name"><span class="hljs-built_in">-</span></span> n <span class="hljs-number">1</span>)))))</code></pre>
<pre><code class="hljs language-scheme">(<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">f</span> n)
    (<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">f-iter</span> a b c n)
        (<span class="hljs-name"><span class="hljs-built_in">if</span></span> (<span class="hljs-name"><span class="hljs-built_in">&#x3C;</span></span> n <span class="hljs-number">3</span>)
            c
            (<span class="hljs-name">f-iter</span> b c (<span class="hljs-name">next-f</span> a b c) (<span class="hljs-name"><span class="hljs-built_in">-</span></span> n <span class="hljs-number">1</span>))))
    (<span class="hljs-name">f-iter</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span> n))</code></pre>
<p>Done.</p>
<h2 id="exercise-112-pascal-triangle">Exercise 1.12. Pascal triangle</h2>
<pre><code class="hljs language-scheme">(<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">P</span> row col) 
    (<span class="hljs-name"><span class="hljs-built_in">cond</span></span>
        ((<span class="hljs-name"><span class="hljs-built_in">=</span></span> col <span class="hljs-number">1</span>) <span class="hljs-number">1</span>) <span class="hljs-comment">; first number in row is 1</span>
        ((<span class="hljs-name"><span class="hljs-built_in">=</span></span> col row) <span class="hljs-number">1</span>) <span class="hljs-comment">; last number is 1 too</span>
        (<span class="hljs-name"><span class="hljs-built_in">else</span></span> (<span class="hljs-name"><span class="hljs-built_in">+</span></span> <span class="hljs-comment">; otherwise it's sum of two number above</span>
            (<span class="hljs-name">P</span> (<span class="hljs-name"><span class="hljs-built_in">-</span></span> row <span class="hljs-number">1</span>) (<span class="hljs-name"><span class="hljs-built_in">-</span></span> col <span class="hljs-number">1</span>))
            (<span class="hljs-name">P</span> (<span class="hljs-name"><span class="hljs-built_in">-</span></span> row <span class="hljs-number">1</span>) col)))))</code></pre>
<h2 id="exercise-113">Exercise 1.13</h2>
<p>This is hard one for me, because I'm not so good with math. I'll skip this for now.</p></div></article><div><div id="disqus_thread"></div></div><nav><a href="/">Home</a><a href="#top">Back to top</a></nav><footer>Â© <!-- -->2025<!-- --> Bunyk Taras. Built with Next.js</footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"id":"sicp1.2.2","title":"SICP 1.2.2 Tree recursion","date":"2020-06-14T19:06:09.000Z","tags":["SICP"],"updated_at":"2021-04-20T00:38:16+02:00","content":"\u003cp\u003eI like how they did not shown yet how to work with any data structures, but wrote function that behaves like a immutable array:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003efirst-denomination\u003c/span\u003e kinds-of-coins)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003econd\u003c/span\u003e\u003c/span\u003e ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e=\u003c/span\u003e\u003c/span\u003e kinds-of-coins \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n        ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e=\u003c/span\u003e\u003c/span\u003e kinds-of-coins \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e)\n        ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e=\u003c/span\u003e\u003c/span\u003e kinds-of-coins \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e)\n        ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e=\u003c/span\u003e\u003c/span\u003e kinds-of-coins \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e25\u003c/span\u003e)\n        ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e=\u003c/span\u003e\u003c/span\u003e kinds-of-coins \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e)))\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"exercise-111\"\u003eExercise 1.11\u003c/h2\u003e\n\u003cp\u003eFunctions should produce following sequence: 1, 2, 4, 11, 25, 59, 142\n(\u003ca href=\"https://oeis.org/A100550\"\u003eSequence A100550\u003c/a\u003e in the On-Line Encyclopedia of Integer Sequences)\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003enext-f\u003c/span\u003e c d e)\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e+\u003c/span\u003e\u003c/span\u003e e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e*\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e d) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e*\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e c)))\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e n) \n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e\u0026#x3C;\u003c/span\u003e\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e) \n        n\n        (\u003cspan class=\"hljs-name\"\u003enext-f\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e-\u003c/span\u003e\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e))\n           (\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e-\u003c/span\u003e\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e))\n           (\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e-\u003c/span\u003e\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)))))\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e n)\n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ef-iter\u003c/span\u003e a b c n)\n        (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e\u0026#x3C;\u003c/span\u003e\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e)\n            c\n            (\u003cspan class=\"hljs-name\"\u003ef-iter\u003c/span\u003e b c (\u003cspan class=\"hljs-name\"\u003enext-f\u003c/span\u003e a b c) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e-\u003c/span\u003e\u003c/span\u003e n \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e))))\n    (\u003cspan class=\"hljs-name\"\u003ef-iter\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e n))\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eDone.\u003c/p\u003e\n\u003ch2 id=\"exercise-112-pascal-triangle\"\u003eExercise 1.12. Pascal triangle\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eP\u003c/span\u003e row col) \n    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003econd\u003c/span\u003e\u003c/span\u003e\n        ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e=\u003c/span\u003e\u003c/span\u003e col \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) \u003cspan class=\"hljs-comment\"\u003e; first number in row is 1\u003c/span\u003e\n        ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e=\u003c/span\u003e\u003c/span\u003e col row) \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) \u003cspan class=\"hljs-comment\"\u003e; last number is 1 too\u003c/span\u003e\n        (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eelse\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e+\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e; otherwise it's sum of two number above\u003c/span\u003e\n            (\u003cspan class=\"hljs-name\"\u003eP\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e-\u003c/span\u003e\u003c/span\u003e row \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e-\u003c/span\u003e\u003c/span\u003e col \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e))\n            (\u003cspan class=\"hljs-name\"\u003eP\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e-\u003c/span\u003e\u003c/span\u003e row \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) col)))))\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"exercise-113\"\u003eExercise 1.13\u003c/h2\u003e\n\u003cp\u003eThis is hard one for me, because I'm not so good with math. I'll skip this for now.\u003c/p\u003e"},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"sicp1.2.2"},"buildId":"ljkl2AcbKtPNE2wH_VFb3","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>