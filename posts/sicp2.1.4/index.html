<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>SICP 2.1.4: Interval arithmetic</title>
	<meta name="description" content="">
	<meta name="generator" content="Hugo 0.48-DEV" />
	
	
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">
	<link rel="stylesheet" href="/css/style.css">
	<link rel="stylesheet" href="/style.css">
	<script type="text/javascript" src="/js/scripts.js"></script>
	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container">
		<div class="logo" role="banner">
			<a class="logo__link" href="/" title="Bunyk Taras" rel="home">
				<div class="logo__title">Bunyk Taras</div>
				
			</a>
		</div>
	</div>
	
<nav class="menu">
	<ul class="menu__list">
		<li class="menu__item"><a class="menu__link" href="/">HOME</a></li>
		<li class="menu__item"><a class="menu__link" href="/resume/">RESUME</a></li>
		<li class="menu__item"><a class="menu__link" href="https://bunyk.wordpress.com/">OLD BLOG</a></li>
	</ul>
</nav>

</header>
		<div class="wrapper flex">
			<section class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SICP 2.1.4: Interval arithmetic</h1><div class="post__meta meta">
<svg class="icon icon-time" width="16" height="14" viewBox="0 0 16 16"><path d="m8-.0000003c-4.4 0-8 3.6-8 8 0 4.4000003 3.6 8.0000003 8 8.0000003 4.4 0 8-3.6 8-8.0000003 0-4.4-3.6-8-8-8zm0 14.4000003c-3.52 0-6.4-2.88-6.4-6.4000003 0-3.52 2.88-6.4 6.4-6.4 3.52 0 6.4 2.88 6.4 6.4 0 3.5200003-2.88 6.4000003-6.4 6.4000003zm.4-10.4000003h-1.2v4.8l4.16 2.5600003.64-1.04-3.6-2.1600003z"/></svg>
<time class="post__meta-date meta-date" datetime="2020-07-15T20:36:52">July 15, 2020</time></div>
		</header><div class="content post__content clearfix">
			<p>Less mind-blowing ideas, more practice.</p>

<p></p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#66d9ef">define </span>(add-interval x y)
  (make-interval (+ (lower-bound x) (lower-bound y))
                 (+ (upper-bound x) (upper-bound y))))

(<span style="color:#66d9ef">define </span>(mul-interval x y)
  (<span style="color:#66d9ef">let </span>((p1 (* (lower-bound x) (lower-bound y)))
        (p2 (* (lower-bound x) (upper-bound y)))
        (p3 (* (upper-bound x) (lower-bound y)))
        (p4 (* (upper-bound x) (upper-bound y))))
    (make-interval (min p1 p2 p3 p4)
                   (max p1 p2 p3 p4))))

(<span style="color:#66d9ef">define </span>(div-interval x y)
  (mul-interval x 
                (make-interval (/ <span style="color:#ae81ff">1.0</span> (upper-bound y))
                               (/ <span style="color:#ae81ff">1.0</span> (lower-bound y)))))</code></pre></div>

<h2 id="exercise-2-7">Exercise 2.7</h2>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#66d9ef">define </span>(make-interval a b) (cons a b))

(<span style="color:#66d9ef">define </span>(lower-bound i)
  (min (car i) (cdr i)))

(<span style="color:#66d9ef">define </span>(upper-bound i)
  (max (car i) (cdr i)))</code></pre></div>

<h2 id="exercise-2-8">Exercise 2.8</h2>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#66d9ef">define </span>(sub-interval x y)
  (make-interval 
    (- (lower-bound x) (upper-bound y))
    (- (upper-bound x) (lower-bound y))))</code></pre></div>

<h2 id="exercise-2-9">Exercise 2.9</h2>

<p>Let&rsquo;s have interval (a<sub>1</sub>,b<sub>1</sub>) of width w<sub>1</sub> = b<sub>1</sub> - a<sub>1</sub>. And similar interval (a<sub>2</sub>,b<sub>2</sub>) of width w<sub>2</sub> = b<sub>2</sub> - a<sub>2</sub>.</p>

<p>(a<sub>1</sub>,b<sub>1</sub>) + (a<sub>2</sub>,b<sub>2</sub>) = (a<sub>1</sub> + a<sub>2</sub>, b<sub>1</sub>+b<sub>2</sub>)
width of this interval is (b<sub>1</sub>+b<sub>2</sub>) - (a<sub>1</sub>+a<sub>2</sub>) = (b<sub>1</sub> - a<sub>1</sub>) + (b<sub>2</sub>-a<sub>2</sub>) = w<sub>1</sub>+w<sub>2</sub></p>

<p>(a<sub>1</sub>,b<sub>1</sub>) - (a<sub>2</sub>,b<sub>2</sub>) = (a<sub>1</sub> - b<sub>2</sub>, b<sub>1</sub>-a<sub>2</sub>)</p>

<p>width of this interval is (b<sub>1</sub>-a<sub>2</sub>) - (a<sub>1</sub>-b<sub>2</sub>) = b<sub>1</sub> - a<sub>2</sub> - a<sub>1</sub> + b<sub>2</sub> = (b<sub>1</sub> - a<sub>1</sub>) + (b<sub>2</sub>-a<sub>2</sub>) = w<sub>1</sub>+w<sub>2</sub></p>

<p>Multiplication counterexample:</p>

<p>Let&rsquo;s multiply two intervals of width 1:
(1,2) * (1,2) = (1, 3)
Gives interval of width 3.</p>

<p>Let&rsquo;s multiply another two intervals of width 1:
(1,2) * (2,3) = (2, 6)</p>

<p>Gives interval of width 6. Width of multiplication could not be just function of width of arguments, because it&rsquo;s gives different results for the same inputs. It must be function of something else.</p>

<h2 id="exercise-2-10">Exercise 2.10</h2>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#66d9ef">define </span>(spans-zero i)
  (<span style="color:#66d9ef">and </span>(&lt;= (lower-bound i) <span style="color:#ae81ff">0</span>) (&gt;= (upper-bound i) <span style="color:#ae81ff">0</span>))
)

(<span style="color:#66d9ef">define </span>(div-interval x y)
  (<span style="color:#66d9ef">if </span>(spans-zero y)
    (error <span style="color:#e6db74">&#34;Could not divide by interval that spans zero&#34;</span>)
    (mul-interval x 
                (make-interval (/ <span style="color:#ae81ff">1.0</span> (upper-bound y))
                               (/ <span style="color:#ae81ff">1.0</span> (lower-bound y))))
  )
)</code></pre></div>

<h2 id="exercise-2-11">Exercise 2.11</h2>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#66d9ef">define </span>(random-interval) 
  (make-interval (- (random <span style="color:#ae81ff">11</span>) <span style="color:#ae81ff">5</span>) (- (random <span style="color:#ae81ff">11</span>) <span style="color:#ae81ff">5</span>))
)
(<span style="color:#66d9ef">define </span>(eq-interval a b)
  (and
    (= (lower-bound a) (lower-bound b))
    (= (upper-bound a) (upper-bound b))
  )
)


(<span style="color:#66d9ef">define </span>(test-mul-interval) 
  (<span style="color:#66d9ef">define </span>(bad-pair i1 i2) 
    (display <span style="color:#e6db74">&#34;Mul-iterval result differs for &#34;</span>)
    (display i1)
    (display i2)
    <span style="color:#66d9ef">#f</span>
  )
  (<span style="color:#66d9ef">define </span>(try n)
    (<span style="color:#66d9ef">if </span>(= n <span style="color:#ae81ff">0</span>) <span style="color:#66d9ef">#t</span>
      (<span style="color:#66d9ef">let </span>(
            (i1 (random-interval))
            (i2 (random-interval))
        )
        (<span style="color:#66d9ef">if </span>(eq-interval (mul-interval2 i1 i2) (mul-interval i1 i2))
          (try (- n <span style="color:#ae81ff">1</span>)) 
          (bad-pair i1 i2)
        )
      )
    )
  )
  (try <span style="color:#ae81ff">100</span>)
)

(<span style="color:#66d9ef">define </span>(mul-interval2 x y)
  (<span style="color:#66d9ef">let </span>(
    (lx (lower-bound x))
    (ux (upper-bound x))
    (ly (lower-bound y))
    (uy (upper-bound y))
  )

  (<span style="color:#66d9ef">cond </span>
    ((<span style="color:#66d9ef">and </span>(&lt; ux <span style="color:#ae81ff">0</span>) (&lt; uy <span style="color:#ae81ff">0</span>))
     (make-interval (* ux uy) (* lx ly)))

    ((<span style="color:#66d9ef">and </span>(spans-zero x) (&lt; uy <span style="color:#ae81ff">0</span>))
     (make-interval (* ux ly) (* lx ly)))

    ((<span style="color:#66d9ef">and </span>(&gt; lx <span style="color:#ae81ff">0</span>) (&lt; uy <span style="color:#ae81ff">0</span>))
     (make-interval (* ux ly) (* lx uy)))

    ((<span style="color:#66d9ef">and </span>(&lt; ux <span style="color:#ae81ff">0</span>) (spans-zero y))
     (make-interval (* lx uy) (* lx ly)))

    ((<span style="color:#66d9ef">and </span>(spans-zero x) (spans-zero y))
     (make-interval (min (* ux ly) (* lx uy)) (max (* lx ly) (* ux uy))))

    ((<span style="color:#66d9ef">and </span>(&gt; lx <span style="color:#ae81ff">0</span>) (spans-zero y))
     (make-interval (* ux ly) (* ux uy)))

    ((<span style="color:#66d9ef">and </span>(&lt; ux <span style="color:#ae81ff">0</span>) (&gt; ly <span style="color:#ae81ff">0</span>))
     (make-interval (* lx uy) (* ux ly)))

    ((<span style="color:#66d9ef">and </span>(spans-zero x) (&gt; ly <span style="color:#ae81ff">0</span>))
     (make-interval (* lx uy) (* ux uy)))

    ((<span style="color:#66d9ef">and </span>(&gt; lx <span style="color:#ae81ff">0</span>) (&gt; ly <span style="color:#ae81ff">0</span>))
     (make-interval (* lx ly) (* ux uy)))

    (<span style="color:#66d9ef">else </span>(error <span style="color:#e6db74">&#34;impossible case&#34;</span>))
  ))
)</code></pre></div>

<p>Wow this took a lot of effort. Good that they teached to use let, without it secod version of mul-interval would be huge.</p>

<p>And this required lots of attention, but somehow my code passed the test from the first try.</p>

<h2 id="exercise-2-12">Exercise 2.12</h2>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#66d9ef">define </span>(make-center-width c w)
  (make-interval (- c w) (+ c w)))
(<span style="color:#66d9ef">define </span>(center i)
  (/ (+ (lower-bound i) (upper-bound i)) <span style="color:#ae81ff">2</span>))
(<span style="color:#66d9ef">define </span>(width i)
  (/ (- (upper-bound i) (lower-bound i)) <span style="color:#ae81ff">2</span>))

(<span style="color:#66d9ef">define </span>(make-center-percent c p)
  (<span style="color:#66d9ef">let </span>((w (* p <span style="color:#ae81ff">0.01</span> (abs c))))
  (make-interval (- c w) (+ c w))))

(<span style="color:#66d9ef">define </span>(percent i)
  (* <span style="color:#ae81ff">100</span> (/ (width i) (center i)))
)</code></pre></div>

<h2 id="exercise-2-13">Exercise 2.13</h2>

<p>It&rsquo;s approximately addition.</p>

<h2 id="exercise-2-14">Exercise 2.14</h2>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#66d9ef">define </span>(par1 r1 r2)
  (div-interval (mul-interval r1 r2)
                (add-interval r1 r2)))
(<span style="color:#66d9ef">define </span>(par2 r1 r2)
  (<span style="color:#66d9ef">let </span>((one (make-interval <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span>))) 
    (div-interval one
                  (add-interval (div-interval one r1)
                                (div-interval one r2)))))

(<span style="color:#66d9ef">define </span>a (make-center-percent <span style="color:#ae81ff">100</span> <span style="color:#ae81ff">1</span>))
(<span style="color:#66d9ef">define </span>b (make-center-percent <span style="color:#ae81ff">200</span> <span style="color:#ae81ff">1</span>))


(center (par1 a b))
(center (par2 a b))

(percent (par1 a b))
(percent (par2 a b))</code></pre></div>

<h2 id="exercise-2-15">Exercise 2.15</h2>

<p>Every operation on intervals with non zero width increases width of result.</p>

<p>In par1 program does 3 operations in which both intervals have non zero widht, and par2 program does only addition, all the rest are operations with interval of zero widht.</p>

<h2 id="exercise-2-16">Exercise 2.16</h2>

<p>No I can not, because as they said, this problem is very difficult. I imagine it will require simplification of expression to some base form, before computing it.</p>
		</div>
		
<div class="post__tags tags clearfix">
	<svg class="icon icon-tag" width="16" height="16" viewBox="0 0 16 16"><path d="M16 9.5c0 .373-.24.74-.5 1l-5 5c-.275.26-.634.5-1 .5-.373 0-.74-.24-1-.5L1 8a2.853 2.853 0 0 1-.7-1C.113 6.55 0 5.973 0 5.6V1.4C0 1.034.134.669.401.401.67.134 1.034 0 1.4 0h4.2c.373 0 .95.113 1.4.3.45.187.732.432 1 .7l7.5 7.502c.26.274.5.632.5.998zM3.5 5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"/></svg>
	<ul class="tags__list">
		<li class="tags__item"><a class="tags__link btn" href="/tags/sicp/" rel="tag">SICP</a></li>
	</ul>
</div>
	</article>
</main>



<section class="comments">
	<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "bunykshumblehomepage" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>


			</section>
			
		</div>
		<footer class="footer">
	<div class="container">
		<div class="footer__copyright">&copy; 2021 Bunyk Taras. <span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span></div>
	</div>
</footer>
	</div>
<script>
	var navigation = responsiveNav(".menu", {
		navClass: "menu--collapse",
		label: "Menu",
	});
</script></body>
</html>
