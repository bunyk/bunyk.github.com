<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>SICP3.1 Assignment and local state</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/b53cc6ef9e9e352d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b53cc6ef9e9e352d.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-959cc2ac3c742fb4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-b654c501598b6a83.js" defer=""></script><script src="/_next/static/chunks/996-372da0b0d3708a80.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-e5a68c245444f298.js" defer=""></script><script src="/_next/static/ljkl2AcbKtPNE2wH_VFb3/_buildManifest.js" defer=""></script><script src="/_next/static/ljkl2AcbKtPNE2wH_VFb3/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><h1 id="top">Taras Bunyk</h1><nav><a href="/">Home</a><a href="http://bunyk.github.io/mandala/">Snowflake drawing</a><a href="/resume">Resume</a><a href="/pages/sudoku.html">Sudoku fall</a><a href="https://bunyk.wordpress.com/">Old blog (in Ukrainian)</a></nav><article><h1>SICP3.1 Assignment and local state</h1><div><em>Published: 2022-10-25T19:13:22.000Z</em></div><div><p>So, it have been a huge pause with working on this book, but I have a dream to get at least to building a simulator of digital circuits, part, so I'll restart from the beginning of chapter 3.</p>
<p>I just like how clearly this book explains some ideas I myself would have hard time to explain. State, for example:</p>
<blockquote>
<p>An object is said to "have state" if its behavior is influenced by its history. A bank account, for example, has state in that the answer to the question "Can I withdraw $100?" depends upon the history of deposit and withdrawal transactions.</p>
</blockquote>
<h2 id="311-local-state-variables">3.1.1 Local state variables</h2>
<h3 id="exercise-31">Exercise 3.1</h3>
<pre><code class="hljs language-scheme">(<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">make-accumulator</span> sum)
  (<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">acc</span> amount) 
	(<span class="hljs-name"><span class="hljs-built_in">set!</span></span> sum (<span class="hljs-name"><span class="hljs-built_in">+</span></span> sum amount))
	sum
  )
  acc
)</code></pre>
<h3 id="exercise-32">Exercise 3.2</h3>
<pre><code class="hljs language-scheme">(<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">make-monitored</span> f)
  (<span class="hljs-name"><span class="hljs-built_in">define</span></span> calls <span class="hljs-number">0</span>)
  (<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">monitored</span> arg)
	(<span class="hljs-name"><span class="hljs-built_in">if</span></span> (<span class="hljs-name"><span class="hljs-built_in">eq?</span></span> arg <span class="hljs-symbol">'how-many-calls?</span>)
	  calls
	  (<span class="hljs-name"><span class="hljs-built_in">begin</span></span>
		(<span class="hljs-name"><span class="hljs-built_in">set!</span></span> calls (<span class="hljs-name"><span class="hljs-built_in">+</span></span> calls <span class="hljs-number">1</span>))
		(<span class="hljs-name">f</span> arg)
	  )
	)
  )
  monitored
)

(<span class="hljs-name"><span class="hljs-built_in">define</span></span> s (<span class="hljs-name">make-monitored</span> sqrt))
(<span class="hljs-name">s</span> <span class="hljs-number">100</span>)
(<span class="hljs-name">s</span> <span class="hljs-symbol">'how-many-calls?</span>)</code></pre>
<h3 id="exercise-33">Exercise 3.3</h3>
<pre><code class="hljs language-scheme">(<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">make-account</span> balance password)
  (<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">withdraw</span> amount)
	(<span class="hljs-name"><span class="hljs-built_in">if</span></span> (<span class="hljs-name"><span class="hljs-built_in">>=</span></span> balance amount)
	  (<span class="hljs-name"><span class="hljs-built_in">begin</span></span>
		(<span class="hljs-name"><span class="hljs-built_in">set!</span></span> balance (<span class="hljs-name"><span class="hljs-built_in">-</span></span> balance amount))
		balance
	  )
	  <span class="hljs-string">"Insufficient funds!"</span>
	)
  )
  (<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">deposit</span> amount)
	(<span class="hljs-name"><span class="hljs-built_in">set!</span></span> balance (<span class="hljs-name"><span class="hljs-built_in">+</span></span> balance amount))
	balance
  )
  (<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">dispatch</span> pass m)
	(<span class="hljs-name"><span class="hljs-built_in">if</span></span> (<span class="hljs-name"><span class="hljs-built_in">eq?</span></span> pass password)
		(<span class="hljs-name"><span class="hljs-built_in">cond</span></span> ((<span class="hljs-name"><span class="hljs-built_in">eq?</span></span> m <span class="hljs-symbol">'withdraw</span>) withdraw)
			  ((<span class="hljs-name"><span class="hljs-built_in">eq?</span></span> m <span class="hljs-symbol">'deposit</span>) deposit)
			  (<span class="hljs-name"><span class="hljs-built_in">else</span></span> (<span class="hljs-name">error</span> <span class="hljs-string">"Unknown request - make-account"</span> m))
		)
		<span class="hljs-string">"Incorrect password!"</span>
	)
  )
  dispatch
)

(<span class="hljs-name"><span class="hljs-built_in">define</span></span> acc (<span class="hljs-name">make-account</span> <span class="hljs-number">100</span> <span class="hljs-symbol">'secret</span>))
((<span class="hljs-name">acc</span> <span class="hljs-symbol">'wrong-secret</span> <span class="hljs-symbol">'withdraw</span>) <span class="hljs-number">50</span>)
((<span class="hljs-name">acc</span> <span class="hljs-symbol">'secret</span> <span class="hljs-symbol">'withdraw</span>) <span class="hljs-number">50</span>)
((<span class="hljs-name">acc</span> <span class="hljs-symbol">'secret</span> <span class="hljs-symbol">'withdraw</span>) <span class="hljs-number">60</span>)
((<span class="hljs-name">acc</span> <span class="hljs-symbol">'secret</span> <span class="hljs-symbol">'deposit</span>) <span class="hljs-number">40</span>)
((<span class="hljs-name">acc</span> <span class="hljs-symbol">'secret</span> <span class="hljs-symbol">'withdraw</span>) <span class="hljs-number">60</span>)</code></pre>
<h3 id="exercise-34">Exercise 3.4</h3>
<pre><code class="hljs language-scheme">(<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">make-account</span> balance password)
  (<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">withdraw</span> amount)
	(<span class="hljs-name"><span class="hljs-built_in">if</span></span> (<span class="hljs-name"><span class="hljs-built_in">>=</span></span> balance amount)
	  (<span class="hljs-name"><span class="hljs-built_in">begin</span></span>
		(<span class="hljs-name"><span class="hljs-built_in">set!</span></span> balance (<span class="hljs-name"><span class="hljs-built_in">-</span></span> balance amount))
		balance
	  )
	  <span class="hljs-string">"Insufficient funds!"</span>
	)
  )
  (<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">deposit</span> amount)
	(<span class="hljs-name"><span class="hljs-built_in">set!</span></span> balance (<span class="hljs-name"><span class="hljs-built_in">+</span></span> balance amount))
	balance
  )

  (<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">call-the-cops</span>)
	(<span class="hljs-name"><span class="hljs-built_in">display</span></span> <span class="hljs-string">"Hey cops! Somebody is trying to rob bank account!\n"</span>)
  )
  (<span class="hljs-name"><span class="hljs-built_in">define</span></span> failed-accesses <span class="hljs-number">0</span>)
  (<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">dispatch</span> pass m)
	(<span class="hljs-name"><span class="hljs-built_in">if</span></span> (<span class="hljs-name"><span class="hljs-built_in">eq?</span></span> pass password)
	  	(<span class="hljs-name"><span class="hljs-built_in">begin</span></span> 
		  (<span class="hljs-name"><span class="hljs-built_in">set!</span></span> failed-accesses <span class="hljs-number">0</span>)
		  (<span class="hljs-name"><span class="hljs-built_in">cond</span></span> ((<span class="hljs-name"><span class="hljs-built_in">eq?</span></span> m <span class="hljs-symbol">'withdraw</span>) withdraw)
		  	    ((<span class="hljs-name"><span class="hljs-built_in">eq?</span></span> m <span class="hljs-symbol">'deposit</span>) deposit)
		  	    (<span class="hljs-name"><span class="hljs-built_in">else</span></span> (<span class="hljs-name">error</span> <span class="hljs-string">"Unknown request - make-account"</span> m))
		  )
		)
		(<span class="hljs-name"><span class="hljs-built_in">begin</span></span>
		  (<span class="hljs-name"><span class="hljs-built_in">set!</span></span> failed-accesses (<span class="hljs-name"><span class="hljs-built_in">+</span></span> failed-accesses <span class="hljs-number">1</span>))
		  (<span class="hljs-name"><span class="hljs-built_in">if</span></span> (<span class="hljs-name"><span class="hljs-built_in">></span></span> failed-accesses <span class="hljs-number">7</span>)
			(<span class="hljs-name">call-the-cops</span>)
			<span class="hljs-string">"Incorrect password!"</span>
		  )
		)
	)
  )
  dispatch
)

(<span class="hljs-name"><span class="hljs-built_in">define</span></span> acc (<span class="hljs-name">make-account</span> <span class="hljs-number">100</span> <span class="hljs-symbol">'secret</span>))
(<span class="hljs-name"><span class="hljs-built_in">map</span></span> (<span class="hljs-name"><span class="hljs-built_in">lambda</span></span> (a) (<span class="hljs-name">acc</span> <span class="hljs-symbol">'wrong-secret</span> <span class="hljs-symbol">'withdraw</span>)) '(<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span> <span class="hljs-number">7</span>))
((<span class="hljs-name">acc</span> <span class="hljs-symbol">'secret</span> <span class="hljs-symbol">'withdraw</span>) <span class="hljs-number">50</span>)
(<span class="hljs-name"><span class="hljs-built_in">map</span></span> (<span class="hljs-name"><span class="hljs-built_in">lambda</span></span> (a) (<span class="hljs-name">acc</span> <span class="hljs-symbol">'wrong-secret</span> <span class="hljs-symbol">'withdraw</span>)) '(<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span> <span class="hljs-number">8</span>))</code></pre>
<h2 id="312-the-benefits-of-introducing-assignment">3.1.2 The Benefits of Introducing Assignment</h2>
<h3 id="exercise-35-monte-carlo-integration">Exercise 3.5 Monte Carlo integration</h3>
<pre><code class="hljs language-scheme">(<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">random-in-range</span> low high)
  (<span class="hljs-name"><span class="hljs-built_in">let</span></span> ((<span class="hljs-name">range</span> (<span class="hljs-name"><span class="hljs-built_in">-</span></span> high low)))
	(<span class="hljs-name"><span class="hljs-built_in">+</span></span> low (<span class="hljs-name">random</span> range)))
)

(<span class="hljs-name">random-in-range</span> <span class="hljs-number">1.5</span> <span class="hljs-number">10.0</span>)

(<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">monte-carlo</span> trials experiment)
  (<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">iter</span> trials-remaining trials-passed)
	(<span class="hljs-name"><span class="hljs-built_in">cond</span></span> 
	  ((<span class="hljs-name"><span class="hljs-built_in">=</span></span> trials-remaining <span class="hljs-number">0</span>)
		   (<span class="hljs-name"><span class="hljs-built_in">/</span></span> trials-passed trials))
	  ((<span class="hljs-name">experiment</span>)
	   		(<span class="hljs-name">iter</span> (<span class="hljs-name"><span class="hljs-built_in">-</span></span> trials-remaining <span class="hljs-number">1</span>) (<span class="hljs-name"><span class="hljs-built_in">+</span></span> trials-passed <span class="hljs-number">1</span>)))
	  (<span class="hljs-name"><span class="hljs-built_in">else</span></span>
			(<span class="hljs-name">iter</span> (<span class="hljs-name"><span class="hljs-built_in">-</span></span> trials-remaining <span class="hljs-number">1</span>) trials-passed))
	)
  )
  (<span class="hljs-name">iter</span> trials <span class="hljs-number">0</span>)
)

<span class="hljs-comment">; (monte-carlo 100 (lambda () (&#x3C; (random 10) 5)))</span>

(<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">estimate-integral</span> P x1 y1 x2 y2 trials)
  (<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">integral-test</span>)
	(<span class="hljs-name">P</span> (<span class="hljs-name">random-in-range</span> x1 x2)
	   (<span class="hljs-name">random-in-range</span> y1 y2)
	)
  )
  (<span class="hljs-name"><span class="hljs-built_in">*</span></span> (<span class="hljs-name">rectangle-area</span> x1 y1 x2 y2)
     (<span class="hljs-name">monte-carlo</span> trials integral-test)
  )
)
(<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">rectangle-area</span> x1 y1 x2 y2) 
  (<span class="hljs-name"><span class="hljs-built_in">*</span></span> (<span class="hljs-name"><span class="hljs-built_in">abs</span></span> (<span class="hljs-name"><span class="hljs-built_in">-</span></span> x1 x2)) (<span class="hljs-name"><span class="hljs-built_in">abs</span></span> (<span class="hljs-name"><span class="hljs-built_in">-</span></span> y1 y2)))
)

(<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">in-unit-circle</span> x y)
  (<span class="hljs-name"><span class="hljs-built_in">&#x3C;</span></span> (<span class="hljs-name"><span class="hljs-built_in">+</span></span> (<span class="hljs-name">sqr</span> x) (<span class="hljs-name">sqr</span> y)) <span class="hljs-number">1.0</span>)
)


(<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">sqr</span> x) (<span class="hljs-name"><span class="hljs-built_in">*</span></span> x x))

(<span class="hljs-name"><span class="hljs-built_in">define</span></span> pi (<span class="hljs-name">estimate-integral</span> in-unit-circle <span class="hljs-number">-1.0</span> <span class="hljs-number">-1.0</span> <span class="hljs-number">1.0</span> <span class="hljs-number">1.0</span> <span class="hljs-number">100000</span>))

pi</code></pre>
<h3 id="exercise-36">Exercise 3.6</h3>
<pre><code class="hljs language-scheme">(<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">rand-update</span> val) (<span class="hljs-name"><span class="hljs-built_in">+</span></span> val <span class="hljs-number">1</span>))
(<span class="hljs-name"><span class="hljs-built_in">define</span></span> seed (<span class="hljs-name">rand-update</span> <span class="hljs-number">0</span>))

(<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">rand</span> m)
  (<span class="hljs-name"><span class="hljs-built_in">cond</span></span>
	((<span class="hljs-name"><span class="hljs-built_in">eq?</span></span> m <span class="hljs-symbol">'reset</span>)
	 (<span class="hljs-name"><span class="hljs-built_in">lambda</span></span> (val) (<span class="hljs-name"><span class="hljs-built_in">set!</span></span> seed val)))
	((<span class="hljs-name"><span class="hljs-built_in">eq?</span></span> m <span class="hljs-symbol">'generate</span>)
	  (<span class="hljs-name"><span class="hljs-built_in">begin</span></span>
	   	(<span class="hljs-name"><span class="hljs-built_in">set!</span></span> seed (<span class="hljs-name">rand-update</span> seed))
		seed
	  )
	)
  )
)



(<span class="hljs-name">rand</span> <span class="hljs-symbol">'generate</span>)
(<span class="hljs-name">rand</span> <span class="hljs-symbol">'generate</span>)

((<span class="hljs-name">rand</span> <span class="hljs-symbol">'reset</span>) <span class="hljs-number">100</span>)
(<span class="hljs-name">rand</span> <span class="hljs-symbol">'generate</span>)</code></pre>
<h2 id="313-the-costs-for-introducing-assignment">3.1.3 The costs for introducing assignment</h2>
<p>In this section we learn about referential transparency. Expression in which equals can be substituted for equals without changing it's value is called referentially transparent. <a href="https://stackoverflow.com/questions/210835/what-is-referential-transparency/9859966#9859966">This SO answer explains the term in more details</a>, and is one of the best answers I saw there.</p>
<h3 id="exercise-37">Exercise 3.7</h3>
<pre><code class="hljs language-scheme">(<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">make-joint</span> other-acc other-pass new-pass) 
  (<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">dispatch</span> pass m)
	(<span class="hljs-name"><span class="hljs-built_in">if</span></span> (<span class="hljs-name"><span class="hljs-built_in">eq?</span></span> pass new-pass)
	  (<span class="hljs-name">other-acc</span> other-pass m)
	  <span class="hljs-string">"Incorrect password!"</span>
	)
  )
  dispatch
)

(<span class="hljs-name"><span class="hljs-built_in">define</span></span> my-account (<span class="hljs-name">make-account</span> <span class="hljs-number">100</span> <span class="hljs-symbol">'my-pass</span>))
(<span class="hljs-name"><span class="hljs-built_in">define</span></span> wife-account (<span class="hljs-name">make-joint</span> my-account <span class="hljs-symbol">'my-pass</span> <span class="hljs-symbol">'wife-pass</span>))

((<span class="hljs-name">wife-account</span> <span class="hljs-symbol">'wife-pass</span> <span class="hljs-symbol">'withdraw</span>) <span class="hljs-number">200</span>)
((<span class="hljs-name">my-account</span> <span class="hljs-symbol">'my-pass</span> <span class="hljs-symbol">'deposit</span>) <span class="hljs-number">1000</span>)
((<span class="hljs-name">wife-account</span> <span class="hljs-symbol">'wife-pass</span> <span class="hljs-symbol">'withdraw</span>) <span class="hljs-number">200</span>)
((<span class="hljs-name">my-account</span> <span class="hljs-symbol">'my-pass</span> <span class="hljs-symbol">'withdraw</span>) <span class="hljs-number">100</span>)</code></pre>
<h3 id="exercise-38">Exercise 3.8</h3>
<pre><code class="hljs language-scheme"><span class="hljs-comment">; (+ (f 0) (f 1)) should return 0 if arguments are evaluated left to right, or 1 if right to left</span>
(<span class="hljs-name"><span class="hljs-built_in">define</span></span> state <span class="hljs-number">1</span>)
(<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">f</span> a)
  (<span class="hljs-name"><span class="hljs-built_in">if</span></span> (<span class="hljs-name"><span class="hljs-built_in">eq?</span></span> a <span class="hljs-number">0</span>)
	(<span class="hljs-name"><span class="hljs-built_in">set!</span></span> state <span class="hljs-number">0</span>)
  )
  (<span class="hljs-name"><span class="hljs-built_in">if</span></span> (<span class="hljs-name"><span class="hljs-built_in">eq?</span></span> state <span class="hljs-number">0</span>)
  	<span class="hljs-number">0</span>
	a
  )
)

(<span class="hljs-name"><span class="hljs-built_in">+</span></span> (<span class="hljs-name">f</span> <span class="hljs-number">0</span>) (<span class="hljs-name">f</span> <span class="hljs-number">1</span>))
<span class="hljs-comment">; mit-scheme seems to be right to left</span></code></pre></div></article><div><div id="disqus_thread"></div></div><nav><a href="/">Home</a><a href="#top">Back to top</a></nav><footer>© <!-- -->2025<!-- --> Bunyk Taras. Built with Next.js</footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"id":"sicp3.1","title":"SICP3.1 Assignment and local state","date":"2022-10-25T19:13:22.000Z","tags":["SICP"],"updated_at":"2022-10-31T18:30:57+01:00","content":"\u003cp\u003eSo, it have been a huge pause with working on this book, but I have a dream to get at least to building a simulator of digital circuits, part, so I'll restart from the beginning of chapter 3.\u003c/p\u003e\n\u003cp\u003eI just like how clearly this book explains some ideas I myself would have hard time to explain. State, for example:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eAn object is said to \"have state\" if its behavior is influenced by its history. A bank account, for example, has state in that the answer to the question \"Can I withdraw $100?\" depends upon the history of deposit and withdrawal transactions.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2 id=\"311-local-state-variables\"\u003e3.1.1 Local state variables\u003c/h2\u003e\n\u003ch3 id=\"exercise-31\"\u003eExercise 3.1\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003emake-accumulator\u003c/span\u003e sum)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eacc\u003c/span\u003e amount) \n\t(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eset!\u003c/span\u003e\u003c/span\u003e sum (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e+\u003c/span\u003e\u003c/span\u003e sum amount))\n\tsum\n  )\n  acc\n)\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"exercise-32\"\u003eExercise 3.2\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003emake-monitored\u003c/span\u003e f)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e calls \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003emonitored\u003c/span\u003e arg)\n\t(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eeq?\u003c/span\u003e\u003c/span\u003e arg \u003cspan class=\"hljs-symbol\"\u003e'how-many-calls?\u003c/span\u003e)\n\t  calls\n\t  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003ebegin\u003c/span\u003e\u003c/span\u003e\n\t\t(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eset!\u003c/span\u003e\u003c/span\u003e calls (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e+\u003c/span\u003e\u003c/span\u003e calls \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e))\n\t\t(\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e arg)\n\t  )\n\t)\n  )\n  monitored\n)\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e s (\u003cspan class=\"hljs-name\"\u003emake-monitored\u003c/span\u003e sqrt))\n(\u003cspan class=\"hljs-name\"\u003es\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e)\n(\u003cspan class=\"hljs-name\"\u003es\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'how-many-calls?\u003c/span\u003e)\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"exercise-33\"\u003eExercise 3.3\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003emake-account\u003c/span\u003e balance password)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ewithdraw\u003c/span\u003e amount)\n\t(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e\u003e=\u003c/span\u003e\u003c/span\u003e balance amount)\n\t  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003ebegin\u003c/span\u003e\u003c/span\u003e\n\t\t(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eset!\u003c/span\u003e\u003c/span\u003e balance (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e-\u003c/span\u003e\u003c/span\u003e balance amount))\n\t\tbalance\n\t  )\n\t  \u003cspan class=\"hljs-string\"\u003e\"Insufficient funds!\"\u003c/span\u003e\n\t)\n  )\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003edeposit\u003c/span\u003e amount)\n\t(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eset!\u003c/span\u003e\u003c/span\u003e balance (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e+\u003c/span\u003e\u003c/span\u003e balance amount))\n\tbalance\n  )\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003edispatch\u003c/span\u003e pass m)\n\t(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eeq?\u003c/span\u003e\u003c/span\u003e pass password)\n\t\t(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003econd\u003c/span\u003e\u003c/span\u003e ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eeq?\u003c/span\u003e\u003c/span\u003e m \u003cspan class=\"hljs-symbol\"\u003e'withdraw\u003c/span\u003e) withdraw)\n\t\t\t  ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eeq?\u003c/span\u003e\u003c/span\u003e m \u003cspan class=\"hljs-symbol\"\u003e'deposit\u003c/span\u003e) deposit)\n\t\t\t  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eelse\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eerror\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"Unknown request - make-account\"\u003c/span\u003e m))\n\t\t)\n\t\t\u003cspan class=\"hljs-string\"\u003e\"Incorrect password!\"\u003c/span\u003e\n\t)\n  )\n  dispatch\n)\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e acc (\u003cspan class=\"hljs-name\"\u003emake-account\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'secret\u003c/span\u003e))\n((\u003cspan class=\"hljs-name\"\u003eacc\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'wrong-secret\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'withdraw\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e)\n((\u003cspan class=\"hljs-name\"\u003eacc\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'secret\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'withdraw\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e)\n((\u003cspan class=\"hljs-name\"\u003eacc\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'secret\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'withdraw\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e60\u003c/span\u003e)\n((\u003cspan class=\"hljs-name\"\u003eacc\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'secret\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'deposit\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e40\u003c/span\u003e)\n((\u003cspan class=\"hljs-name\"\u003eacc\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'secret\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'withdraw\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e60\u003c/span\u003e)\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"exercise-34\"\u003eExercise 3.4\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003emake-account\u003c/span\u003e balance password)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ewithdraw\u003c/span\u003e amount)\n\t(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e\u003e=\u003c/span\u003e\u003c/span\u003e balance amount)\n\t  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003ebegin\u003c/span\u003e\u003c/span\u003e\n\t\t(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eset!\u003c/span\u003e\u003c/span\u003e balance (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e-\u003c/span\u003e\u003c/span\u003e balance amount))\n\t\tbalance\n\t  )\n\t  \u003cspan class=\"hljs-string\"\u003e\"Insufficient funds!\"\u003c/span\u003e\n\t)\n  )\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003edeposit\u003c/span\u003e amount)\n\t(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eset!\u003c/span\u003e\u003c/span\u003e balance (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e+\u003c/span\u003e\u003c/span\u003e balance amount))\n\tbalance\n  )\n\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ecall-the-cops\u003c/span\u003e)\n\t(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edisplay\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"Hey cops! Somebody is trying to rob bank account!\\n\"\u003c/span\u003e)\n  )\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e failed-accesses \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003edispatch\u003c/span\u003e pass m)\n\t(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eeq?\u003c/span\u003e\u003c/span\u003e pass password)\n\t  \t(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003ebegin\u003c/span\u003e\u003c/span\u003e \n\t\t  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eset!\u003c/span\u003e\u003c/span\u003e failed-accesses \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n\t\t  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003econd\u003c/span\u003e\u003c/span\u003e ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eeq?\u003c/span\u003e\u003c/span\u003e m \u003cspan class=\"hljs-symbol\"\u003e'withdraw\u003c/span\u003e) withdraw)\n\t\t  \t    ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eeq?\u003c/span\u003e\u003c/span\u003e m \u003cspan class=\"hljs-symbol\"\u003e'deposit\u003c/span\u003e) deposit)\n\t\t  \t    (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eelse\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eerror\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"Unknown request - make-account\"\u003c/span\u003e m))\n\t\t  )\n\t\t)\n\t\t(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003ebegin\u003c/span\u003e\u003c/span\u003e\n\t\t  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eset!\u003c/span\u003e\u003c/span\u003e failed-accesses (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e+\u003c/span\u003e\u003c/span\u003e failed-accesses \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e))\n\t\t  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e failed-accesses \u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e)\n\t\t\t(\u003cspan class=\"hljs-name\"\u003ecall-the-cops\u003c/span\u003e)\n\t\t\t\u003cspan class=\"hljs-string\"\u003e\"Incorrect password!\"\u003c/span\u003e\n\t\t  )\n\t\t)\n\t)\n  )\n  dispatch\n)\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e acc (\u003cspan class=\"hljs-name\"\u003emake-account\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'secret\u003c/span\u003e))\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003emap\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003elambda\u003c/span\u003e\u003c/span\u003e (a) (\u003cspan class=\"hljs-name\"\u003eacc\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'wrong-secret\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'withdraw\u003c/span\u003e)) '(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e))\n((\u003cspan class=\"hljs-name\"\u003eacc\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'secret\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'withdraw\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e)\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003emap\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003elambda\u003c/span\u003e\u003c/span\u003e (a) (\u003cspan class=\"hljs-name\"\u003eacc\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'wrong-secret\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'withdraw\u003c/span\u003e)) '(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e8\u003c/span\u003e))\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"312-the-benefits-of-introducing-assignment\"\u003e3.1.2 The Benefits of Introducing Assignment\u003c/h2\u003e\n\u003ch3 id=\"exercise-35-monte-carlo-integration\"\u003eExercise 3.5 Monte Carlo integration\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003erandom-in-range\u003c/span\u003e low high)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003elet\u003c/span\u003e\u003c/span\u003e ((\u003cspan class=\"hljs-name\"\u003erange\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e-\u003c/span\u003e\u003c/span\u003e high low)))\n\t(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e+\u003c/span\u003e\u003c/span\u003e low (\u003cspan class=\"hljs-name\"\u003erandom\u003c/span\u003e range)))\n)\n\n(\u003cspan class=\"hljs-name\"\u003erandom-in-range\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1.5\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e10.0\u003c/span\u003e)\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003emonte-carlo\u003c/span\u003e trials experiment)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e trials-remaining trials-passed)\n\t(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003econd\u003c/span\u003e\u003c/span\u003e \n\t  ((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e=\u003c/span\u003e\u003c/span\u003e trials-remaining \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n\t\t   (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e/\u003c/span\u003e\u003c/span\u003e trials-passed trials))\n\t  ((\u003cspan class=\"hljs-name\"\u003eexperiment\u003c/span\u003e)\n\t   \t\t(\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e-\u003c/span\u003e\u003c/span\u003e trials-remaining \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e+\u003c/span\u003e\u003c/span\u003e trials-passed \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)))\n\t  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eelse\u003c/span\u003e\u003c/span\u003e\n\t\t\t(\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e-\u003c/span\u003e\u003c/span\u003e trials-remaining \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) trials-passed))\n\t)\n  )\n  (\u003cspan class=\"hljs-name\"\u003eiter\u003c/span\u003e trials \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n)\n\n\u003cspan class=\"hljs-comment\"\u003e; (monte-carlo 100 (lambda () (\u0026#x3C; (random 10) 5)))\u003c/span\u003e\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eestimate-integral\u003c/span\u003e P x1 y1 x2 y2 trials)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003eintegral-test\u003c/span\u003e)\n\t(\u003cspan class=\"hljs-name\"\u003eP\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003erandom-in-range\u003c/span\u003e x1 x2)\n\t   (\u003cspan class=\"hljs-name\"\u003erandom-in-range\u003c/span\u003e y1 y2)\n\t)\n  )\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e*\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003erectangle-area\u003c/span\u003e x1 y1 x2 y2)\n     (\u003cspan class=\"hljs-name\"\u003emonte-carlo\u003c/span\u003e trials integral-test)\n  )\n)\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003erectangle-area\u003c/span\u003e x1 y1 x2 y2) \n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e*\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eabs\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e-\u003c/span\u003e\u003c/span\u003e x1 x2)) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eabs\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e-\u003c/span\u003e\u003c/span\u003e y1 y2)))\n)\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ein-unit-circle\u003c/span\u003e x y)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e\u0026#x3C;\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e+\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003esqr\u003c/span\u003e x) (\u003cspan class=\"hljs-name\"\u003esqr\u003c/span\u003e y)) \u003cspan class=\"hljs-number\"\u003e1.0\u003c/span\u003e)\n)\n\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003esqr\u003c/span\u003e x) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e*\u003c/span\u003e\u003c/span\u003e x x))\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e pi (\u003cspan class=\"hljs-name\"\u003eestimate-integral\u003c/span\u003e in-unit-circle \u003cspan class=\"hljs-number\"\u003e-1.0\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e-1.0\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1.0\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1.0\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e100000\u003c/span\u003e))\n\npi\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"exercise-36\"\u003eExercise 3.6\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003erand-update\u003c/span\u003e val) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e+\u003c/span\u003e\u003c/span\u003e val \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e))\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e seed (\u003cspan class=\"hljs-name\"\u003erand-update\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e))\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003erand\u003c/span\u003e m)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003econd\u003c/span\u003e\u003c/span\u003e\n\t((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eeq?\u003c/span\u003e\u003c/span\u003e m \u003cspan class=\"hljs-symbol\"\u003e'reset\u003c/span\u003e)\n\t (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003elambda\u003c/span\u003e\u003c/span\u003e (val) (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eset!\u003c/span\u003e\u003c/span\u003e seed val)))\n\t((\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eeq?\u003c/span\u003e\u003c/span\u003e m \u003cspan class=\"hljs-symbol\"\u003e'generate\u003c/span\u003e)\n\t  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003ebegin\u003c/span\u003e\u003c/span\u003e\n\t   \t(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eset!\u003c/span\u003e\u003c/span\u003e seed (\u003cspan class=\"hljs-name\"\u003erand-update\u003c/span\u003e seed))\n\t\tseed\n\t  )\n\t)\n  )\n)\n\n\n\n(\u003cspan class=\"hljs-name\"\u003erand\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'generate\u003c/span\u003e)\n(\u003cspan class=\"hljs-name\"\u003erand\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'generate\u003c/span\u003e)\n\n((\u003cspan class=\"hljs-name\"\u003erand\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'reset\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e)\n(\u003cspan class=\"hljs-name\"\u003erand\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'generate\u003c/span\u003e)\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"313-the-costs-for-introducing-assignment\"\u003e3.1.3 The costs for introducing assignment\u003c/h2\u003e\n\u003cp\u003eIn this section we learn about referential transparency. Expression in which equals can be substituted for equals without changing it's value is called referentially transparent. \u003ca href=\"https://stackoverflow.com/questions/210835/what-is-referential-transparency/9859966#9859966\"\u003eThis SO answer explains the term in more details\u003c/a\u003e, and is one of the best answers I saw there.\u003c/p\u003e\n\u003ch3 id=\"exercise-37\"\u003eExercise 3.7\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003emake-joint\u003c/span\u003e other-acc other-pass new-pass) \n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003edispatch\u003c/span\u003e pass m)\n\t(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eeq?\u003c/span\u003e\u003c/span\u003e pass new-pass)\n\t  (\u003cspan class=\"hljs-name\"\u003eother-acc\u003c/span\u003e other-pass m)\n\t  \u003cspan class=\"hljs-string\"\u003e\"Incorrect password!\"\u003c/span\u003e\n\t)\n  )\n  dispatch\n)\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e my-account (\u003cspan class=\"hljs-name\"\u003emake-account\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'my-pass\u003c/span\u003e))\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e wife-account (\u003cspan class=\"hljs-name\"\u003emake-joint\u003c/span\u003e my-account \u003cspan class=\"hljs-symbol\"\u003e'my-pass\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'wife-pass\u003c/span\u003e))\n\n((\u003cspan class=\"hljs-name\"\u003ewife-account\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'wife-pass\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'withdraw\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e)\n((\u003cspan class=\"hljs-name\"\u003emy-account\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'my-pass\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'deposit\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e)\n((\u003cspan class=\"hljs-name\"\u003ewife-account\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'wife-pass\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'withdraw\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e)\n((\u003cspan class=\"hljs-name\"\u003emy-account\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'my-pass\u003c/span\u003e \u003cspan class=\"hljs-symbol\"\u003e'withdraw\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e)\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"exercise-38\"\u003eExercise 3.8\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e\u003cspan class=\"hljs-comment\"\u003e; (+ (f 0) (f 1)) should return 0 if arguments are evaluated left to right, or 1 if right to left\u003c/span\u003e\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e state \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003edefine\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e a)\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eeq?\u003c/span\u003e\u003c/span\u003e a \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n\t(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eset!\u003c/span\u003e\u003c/span\u003e state \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n  )\n  (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eif\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003eeq?\u003c/span\u003e\u003c/span\u003e state \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n  \t\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\ta\n  )\n)\n\n(\u003cspan class=\"hljs-name\"\u003e\u003cspan class=\"hljs-built_in\"\u003e+\u003c/span\u003e\u003c/span\u003e (\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) (\u003cspan class=\"hljs-name\"\u003ef\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e))\n\u003cspan class=\"hljs-comment\"\u003e; mit-scheme seems to be right to left\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e"},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"sicp3.1"},"buildId":"ljkl2AcbKtPNE2wH_VFb3","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>